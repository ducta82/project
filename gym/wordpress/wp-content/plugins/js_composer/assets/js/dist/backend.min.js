function vc_toTitleCase(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function vc_convert_column_size(e){var t="vc_col-sm-",n=e?e.split("/"):[1,1],i=_.range(1,13),a=!_.isUndefined(n[0])&&0<=_.indexOf(i,parseInt(n[0],10))?parseInt(n[0],10):!1,s=!_.isUndefined(n[1])&&0<=_.indexOf(i,parseInt(n[1],10))?parseInt(n[1],10):!1;return!1!==a&&!1!==s?t+12*a/s:t+"12"}function vc_convert_column_span_size(e){return e=e.replace(/^vc_/,""),"span12"===e?"1/1":"span11"===e?"11/12":"span10"===e?"5/6":"span9"===e?"3/4":"span8"===e?"2/3":"span7"===e?"7/12":"span6"===e?"1/2":"span5"===e?"5/12":"span4"===e?"1/3":"span3"===e?"1/4":"span2"===e?"1/6":"span1"===e?"1/12":!1}function vc_get_column_mask(e){var t,n=e.split("_"),i=n.length,a=0;for(t in n)if(!isNaN(parseFloat(n[t]))&&isFinite(n[t])){var s=n[t].match(/(\d{1,2})(\d{1,2})/);a=_.reduce(s.slice(1),function(e,t){return e+parseInt(t,10)},a)}return i+""+a}function vc_guid(){return VCS4()+VCS4()+"-"+VCS4()}function VCS4(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function vc_button_param_target_callback(){var e=jQuery,t=this.$content.find("[name=target]").parents('[data-vc-ui-element="panel-shortcode-param"]:first'),n=e(".wpb-edit-form [name=href]"),i=_.debounce(function(){var n=e(this).val();0<n.length&&"http://"!==n&&"https://"!==n?t.show():t.hide()},300);n.keyup(i).trigger("keyup")}function vc_cta_button_param_target_callback(){var e=jQuery,t=this.$content.find("[name=target]").parents('[data-vc-ui-element="panel-shortcode-param"]:first'),n=e(".wpb-edit-form [name=href]"),i=_.debounce(function(){var n=e(this).val();0<n.length&&"http://"!==n&&"https://"!==n?t.show():t.hide()},300);n.keyup(i).trigger("keyup")}function vc_grid_exclude_dependency_callback(){var e=jQuery,t=e(".wpb_vc_param_value[name=exclude]",this.$content),n=t.data("vc-param-object");if(void 0===n)return!1;var i=e('select.wpb_vc_param_value[name="post_type"]',this.$content),a=i.val();n.source_data=function(e,t){return{query:{query:a,term:e.term}}},n.source_data_val=a,i.change(function(){a=e(this).val(),n.source_data_val!=a&&(n.source_data=function(e,t){return{query:{query:a,term:e.term}}},n.$el.data("uiAutocomplete").destroy(),n.$sortable_wrapper.find(".vc_data").remove(),n.render(),n.source_data_val=a)})}function vcGridFilterExcludeCallBack(){var e,t,n,i,a=jQuery;return e=a(".wpb_vc_param_value[name=filter_source]",this.$content),i=e.val(),t=a(".wpb_vc_param_value[name=exclude_filter]",this.$content),n=t.data("vc-param-object"),void 0===n?!1:void e.change(function(){var e=a(this);i!==e.val()&&n.clearValue(),n.source_data=function(){return{vc_filter_by:e.val()}}}).trigger("change")}function vcChartCustomColorDependency(){var e,t,n;e=jQuery,t=e(".wpb_vc_param_value[name=style]",this.$content),n=this.$content,t.on("change",function(){var t;t=e(this).val(),n.toggleClass("vc_chart-edit-form-custom-color","custom"===t)}),t.trigger("change")}function vc_wpnop(e){var t,n,i=!1,a=!1;return(-1!=e.indexOf("<pre")||-1!=e.indexOf("<script"))&&(i=!0,e=e.replace(/<(pre|script)[^>]*>[\s\S]+?<\/\1>/g,function(e){return e=e.replace(/<br ?\/?>(\r\n|\n)?/g,"<wp-temp-lb>"),e.replace(/<\/?p( [^>]*)?>(\r\n|\n)?/g,"<wp-temp-lb>")})),-1!=e.indexOf("[caption")&&(a=!0,e=e.replace(/\[caption[\s\S]+?\[\/caption\]/g,function(e){return e.replace(/<br([^>]*)>/g,"<wp-temp-br$1>").replace(/[\r\n\t]+/,"")})),t="blockquote|ul|ol|li|table|thead|tbody|tfoot|tr|th|td|div|h[1-6]|p|fieldset",e=e.replace(new RegExp("\\s*</("+t+")>\\s*","g"),"</$1>\n"),e=e.replace(new RegExp("\\s*<((?:"+t+")(?: [^>]*)?)>","g"),"\n<$1>"),e=e.replace(/(<p [^>]+>.*?)<\/p>/g,"$1</p#>"),e=e.replace(/<div( [^>]*)?>\s*<p>/gi,"<div$1>\n\n"),e=e.replace(/\s*<p>/gi,""),e=e.replace(/\s*<\/p>\s*/gi,"\n\n"),e=e.replace(/\n[\s\u00a0]+\n/g,"\n\n"),e=e.replace(/\s*<br ?\/?>\s*/gi,"\n"),e=e.replace(/\s*<div/g,"\n<div"),e=e.replace(/<\/div>\s*/g,"</div>\n"),e=e.replace(/\s*\[caption([^\[]+)\[\/caption\]\s*/gi,"\n\n[caption$1[/caption]\n\n"),e=e.replace(/caption\]\n\n+\[caption/g,"caption]\n\n[caption"),n="blockquote|ul|ol|li|table|thead|tbody|tfoot|tr|th|td|h[1-6]|pre|fieldset",e=e.replace(new RegExp("\\s*<((?:"+n+")(?: [^>]*)?)\\s*>","g"),"\n<$1>"),e=e.replace(new RegExp("\\s*</("+n+")>\\s*","g"),"</$1>\n"),e=e.replace(/<li([^>]*)>/g,"	<li$1>"),-1!=e.indexOf("<hr")&&(e=e.replace(/\s*<hr( [^>]*)?>\s*/g,"\n\n<hr$1>\n\n")),-1!=e.indexOf("<object")&&(e=e.replace(/<object[\s\S]+?<\/object>/g,function(e){return e.replace(/[\r\n]+/g,"")})),e=e.replace(/<\/p#>/g,"</p>\n"),e=e.replace(/\s*(<p [^>]+>[\s\S]*?<\/p>)/g,"\n$1"),e=e.replace(/^\s+/,""),e=e.replace(/[\s\u00a0]+$/,""),i&&(e=e.replace(/<wp-temp-lb>/g,"\n")),a&&(e=e.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),e}function vc_wpautop(e){var t=!1,n=!1,i="table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|option|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|noscript|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary";return-1!=e.indexOf("<object")&&(e=e.replace(/<object[\s\S]+?<\/object>/g,function(e){return e.replace(/[\r\n]+/g,"")})),e=e.replace(/<[^<>]+>/g,function(e){return e.replace(/[\r\n]+/g," ")}),(-1!=e.indexOf("<pre")||-1!=e.indexOf("<script"))&&(t=!0,e=e.replace(/<(pre|script)[^>]*>[\s\S]+?<\/\1>/g,function(e){return e.replace(/(\r\n|\n)/g,"<wp-temp-lb>")})),-1!=e.indexOf("[caption")&&(n=!0,e=e.replace(/\[caption[\s\S]+?\[\/caption\]/g,function(e){return e=e.replace(/<br([^>]*)>/g,"<wp-temp-br$1>"),e=e.replace(/<[a-zA-Z0-9]+( [^<>]+)?>/g,function(e){return e.replace(/[\r\n\t]+/," ")}),e.replace(/\s*\n\s*/g,"<wp-temp-br />")})),e+="\n\n",e=e.replace(/<br \/>\s*<br \/>/gi,"\n\n"),e=e.replace(new RegExp("(<(?:"+i+")(?: [^>]*)?>)","gi"),"\n$1"),e=e.replace(new RegExp("(</(?:"+i+")>)","gi"),"$1\n\n"),e=e.replace(/<hr( [^>]*)?>/gi,"<hr$1>\n\n"),e=e.replace(/\r\n|\r/g,"\n"),e=e.replace(/\n\s*\n+/g,"\n\n"),e=e.replace(/([\s\S]+?)\n\n/g,"<p>$1</p>\n"),e=e.replace(/<p>\s*?<\/p>/gi,""),e=e.replace(new RegExp("<p>\\s*(</?(?:"+i+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),e=e.replace(/<p>(<li.+?)<\/p>/gi,"$1"),e=e.replace(/<p>\s*<blockquote([^>]*)>/gi,"<blockquote$1><p>"),e=e.replace(/<\/blockquote>\s*<\/p>/gi,"</p></blockquote>"),e=e.replace(new RegExp("<p>\\s*(</?(?:"+i+")(?: [^>]*)?>)","gi"),"$1"),e=e.replace(new RegExp("(</?(?:"+i+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),e=e.replace(/\s*\n/gi,"<br />\n"),e=e.replace(new RegExp("(</?(?:"+i+")[^>]*>)\\s*<br />","gi"),"$1"),e=e.replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)>)/gi,"$1"),e=e.replace(/(?:<p>|<br ?\/?>)*\s*\[caption([^\[]+)\[\/caption\]\s*(?:<\/p>|<br ?\/?>)*/gi,"[caption$1[/caption]"),e=e.replace(/(<(?:div|th|td|form|fieldset|dd)[^>]*>)(.*?)<\/p>/g,function(e,t,n){return n.match(/<p( [^>]*)?>/)?e:t+"<p>"+n+"</p>"}),t&&(e=e.replace(/<wp-temp-lb>/g,"\n")),n&&(e=e.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),e}function vcAddShortcodeDefaultParams(e){var t=e.get("params");t=_.extend({},vc.getDefaults(e.get("shortcode")),t),e.set({params:t},{silent:!0})}function vc_globalHashCode(e){return"string"!=typeof e&&(e=JSON.stringify(e)),e.length?e.split("").reduce(function(e,t){return e=(e<<5)-e+t.charCodeAt(0),e&e},0):0}function vcChartParamAfterAddCallback(e,t){if(("new"===t||"clone"===t)&&e.find(".vc_control.column_toggle").click(),"new"===t){var n,i,a,s,o,c;for(o=["white","black"],i=e.find("[name=values_color]"),a=i.find("option"),n=0;!(100<n++);)if(s=Math.floor(Math.random()*a.length),-1===jQuery.inArray(a.eq(s).val(),o)){a.eq(s).prop("selected",!0),i.change();break}c=["#5472d2","#00c1cf","#fe6c61","#8d6dc4","#4cadc9","#cec2ab","#50485b","#75d69c","#f7be68","#5aa1e3","#6dab3c","#f4524d","#f79468","#b97ebb","#ebebeb","#f7f7f7","#0088cc","#58b9da","#6ab165","#ff9900","#ff675b","#555555"],s=Math.floor(Math.random()*c.length),e.find("[name=values_custom_color]").val(c[s]).change()}}function vcEscapeHtml(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return null===e||"undefined"==typeof e?"":e.replace(/[&<>"']/g,function(e){return t[e]})}function vc_slugify(e){return e.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}if(!window.vc)var vc={};!function(){vc.templateOptions={"default":{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},custom:{evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g}};var e=/(.)^/,t={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},n=/\\|'|\r|\n|\u2028|\u2029/g,i=function(e){return"\\"+t[e]};vc.template=function(t,a){a=_.defaults({},a,vc.templateOptions["default"]);var s=RegExp([(a.escape||e).source,(a.interpolate||e).source,(a.evaluate||e).source].join("|")+"|$","g"),o=0,c="__p+='";t.replace(s,function(e,a,s,r,l){return c+=t.slice(o,l).replace(n,i),o=l+e.length,a?c+="'+\n((__t=("+a+"))==null?'':_.escape(__t))+\n'":s?c+="'+\n((__t=("+s+"))==null?'':__t)+\n'":r&&(c+="';\n"+r+"\n__p+='"),e}),c+="';\n",a.variable||(c="with(obj||{}){\n"+c+"}\n"),c="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+c+"return __p;\n";var r;try{r=new Function(a.variable||"obj","_",c)}catch(l){throw l.source=c,l}var d=function(e){return r.call(this,e,_)},h=a.variable||"obj";return d.source="function("+h+"){\n"+c+"}",d}}(),function(e){"use strict";_.isUndefined(window.vc)&&(window.vc={}),window.Vc_postSettingsEditor=Backbone.View.extend({$editor:!1,sel:"wpb_csseditor",ace_enabled:!1,initialize:function(e){e&&0<e.length&&(this.sel=e),this.ace_enabled=!0},aceEnabled:function(){return this.ace_enabled&&window.ace&&window.ace.edit},setEditor:function(e){return this.aceEnabled()?this.setEditorAce(e):this.setEditorTextarea(e),this.$editor},focus:function(){if(this.aceEnabled()){this.$editor.focus();var e=this.$editor.session.getLength();this.$editor.gotoLine(e,this.$editor.session.getLine(e-1).length)}else this.$editor.focus()},setEditorAce:function(e){this.$editor||(this.$editor=ace.edit(this.sel),this.$editor.getSession().setMode("ace/mode/css"),this.$editor.setTheme("ace/theme/chrome")),this.$editor.setValue(e),this.$editor.clearSelection(),this.$editor.focus();var t=this.$editor.getSession().getLength();return this.$editor.gotoLine(t,this.$editor.getSession().getLine(t-1).length),this.$editor},setEditorTextarea:function(t){return this.$editor||(this.$editor=e("<textarea></textarea>").css({width:"100%",height:"100%",minHeight:"300px"}),e("#"+this.sel).empty().append(this.$editor).css({overflowLeft:"hidden",width:"100%",height:"100%"})),this.$editor.val(t),this.$editor.focus(),this.$editor.parent().css({overflow:"auto"}),this.$editor},setSize:function(){var t=e(window).height()-380;this.aceEnabled()?e("#"+this.sel).css({height:t,minHeight:t}):(this.$editor.parent().css({height:t,minHeight:t}),this.$editor.css({height:"98%",width:"98%"}))},setSizeResizable:function(){var t,n,i,a=e("#"+this.sel);n=a.offset().top,i=vc.active_panel.$el.find('[data-vc-ui-element="panel-footer"]').offset().top,t=i-n-70,this.aceEnabled()?a.css({height:t,minHeight:t}):(this.$editor.parent().css({height:t,minHeight:t}),this.$editor.css({height:"98%",width:"98%"}))},getEditor:function(){return this.$editor},getValue:function(){return this.aceEnabled()?this.$editor.getValue():this.$editor.val()}})}(window.jQuery),function(e,t,n){"use strict";function i(e){var t=this.extend(e);return t.prototype._vcUIEventsHooks||(t.prototype._vcUIEventsHooks=[]),e.uiEvents&&t.prototype._vcUIEventsHooks.push(e.uiEvents),t}t.View.vcExtendUI=i,n.View=t.View.extend({delegateEvents:function(){n.View.__super__.delegateEvents.call(this),this._vcUIEventsHooks&&this._vcUIEventsHooks.length&&e.each(this._vcUIEventsHooks,function(t){e.isObject(t)&&e.each(t,function(t,n){e.isString(t)&&e.each(t.split(/\s+/),function(e){this.on(n,this[e],this)},this)},this)},this)}})}(_,Backbone,vc),function(e){"use strict";_.isUndefined(window.vc)&&(window.vc={}),vc.showSpinner=function(){e("#vc_logo").addClass("vc_ui-wp-spinner")},vc.hideSpinner=function(){e("#vc_logo").removeClass("vc_ui-wp-spinner")},e(document).ajaxSend(function(e,t,n){n&&n.data&&"string"==typeof n.data&&n.data.match(/vc_inline=true/)&&vc.showSpinner()}).ajaxStop(function(){vc.hideSpinner()}),vc.active_panel=!1,vc.closeActivePanel=function(e){return this.active_panel?void(e&&vc.active_panel.model&&vc.active_panel.model.get("id")===e.get("id")?(vc.active_panel.model=null,this.active_panel.hide()):e||(vc.active_panel.model=null,this.active_panel.hide())):!1},vc.activePanelName=function(){return this.active_panel&&this.active_panel.panelName?this.active_panel.panelName:null},vc.updateSettingsBadge=function(){var t=vc.$custom_css.val();t&&""!==t.trim()?e("#vc_post-css-badge").show():e("#vc_post-css-badge").hide()},vc.ModalView=Backbone.View.extend({message_box_timeout:!1,events:{"hidden.bs.modal":"hide","shown.bs.modal":"shown"},initialize:function(){_.bindAll(this,"setSize","hide")},setSize:function(){var t=e(window).height()-150;this.$content.css("maxHeight",t),this.trigger("setSize")},render:function(){return e(window).bind("resize.ModalView",this.setSize),this.setSize(),vc.closeActivePanel(),this.$el.modal("show"),this},showMessage:function(t,n){this.message_box_timeout&&this.$el.find(".vc_message").remove()&&window.clearTimeout(this.message_box_timeout),this.message_box_timeout=!1;var i=e('<div class="vc_message type-'+n+'"></div>');this.$el.find(".vc_modal-body").prepend(i),i.text(t).fadeIn(),this.message_box_timeout=window.setTimeout(function(){i.remove()},6e3)},hide:function(){e(window).unbind("resize.ModalView")},shown:function(){}}),vc.element_start_index=0,vc.AddElementBlockView=vc.ModalView.extend({el:e("#vc_add-element-dialog"),prepend:!1,builder:"",events:{"click .vc_shortcode-link":"createElement","keyup #vc_elements_name_filter":"filterElements","hidden.bs.modal":"hide","show.bs.modal":"buildFiltering","click .wpb-content-layouts-container [data-filter]":"filterElements","shown.bs.modal":"shown"},buildFiltering:function(){this.do_render=!1;var t,n,i;t='[data-vc-ui-element="add-element-button"]',n=this.model?this.model.get("shortcode"):"vc_column",i=this._getNotIn(n),e("#vc_elements_name_filter").val(""),this.$content.addClass("vc_filter-all"),this.$content.attr("data-vc-ui-filter","*");var a=vc.getMapped(n),s=n&&!_.isUndefined(a.as_parent)?a.as_parent:!1;if(_.isObject(s)){var o=[];_.isString(s.only)&&o.push(_.reduce(s.only.replace(/\s/,"").split(","),function(e,t){return e+(_.isEmpty(e)?"":",")+'[data-element="'+t.trim()+'"]'},"")),_.isString(s.except)&&o.push(_.reduce(s.except.replace(/\s/,"").split(","),function(e,t){return e+':not([data-element="'+t.trim()+'"])'},"")),t+=o.join(",")}else i&&(t=i);n&&!_.isUndefined(a.allowed_container_element)&&(a.allowed_container_element?_.isString(a.allowed_container_element)&&(t+=":not([data-is-container=true]), [data-element="+a.allowed_container_element+"]"):t+=":not([data-is-container=true])"),this.$buttons.removeClass("vc_visible").addClass("vc_inappropriate"),e(t,this.$content).removeClass("vc_inappropriate").addClass("vc_visible"),this.hideEmptyFilters()},hideEmptyFilters:function(){this.$el.find(".vc_filter-content-elements .active").removeClass("active"),this.$el.find(".vc_filter-content-elements > :first").addClass("active");var t=this;this.$el.find("[data-filter]").each(function(){e(e(this).data("filter")+".vc_visible:not(.vc_inappropriate)",t.$content).length?e(this).parent().show():e(this).parent().hide()})},render:function(t,n){return this.builder=new vc.ShortcodesBuilder,this.prepend=_.isBoolean(n)?n:!1,this.place_after_id=_.isString(n)?n:!1,this.model=_.isObject(t)?t:!1,this.$content=this.$el.find('[data-vc-ui-element="panel-add-element-list"]'),this.$buttons=e('[data-vc-ui-element="add-element-button"]',this.$content),this.preventDoubleExecution=!1,vc.AddElementBlockView.__super__.render.call(this)},hide:function(){this.do_render&&(this.show_settings&&this.showEditForm(),this.exit())},showEditForm:function(){vc.edit_element_block_view.render(this.builder.last())},exit:function(){this.builder.render()},createElement:function(t){var n,i,a,s,o,c,r,l;if(!this.preventDoubleExecution){this.preventDoubleExecution=!0,this.do_render=!0,t.preventDefault(),n=e(t.currentTarget),i=n.data("tag"),a={},"undefined"!=typeof window.vc_settings_presets.vc_row&&(a=_.extend(a,window.vc_settings_presets.vc_row)),o={},"undefined"!=typeof window.vc_settings_presets.vc_row_inner&&(o=_.extend(o,window.vc_settings_presets.vc_row_inner)),s={width:"1/1"},"undefined"!=typeof window.vc_settings_presets.vc_column&&(s=_.extend(s,window.vc_settings_presets.vc_column)),!1===this.model&&"vc_row"!==i?(this.builder.create({shortcode:"vc_row",params:a}).create({shortcode:"vc_column",parent_id:this.builder.lastID(),params:s}),this.model=this.builder.last()):!1!==this.model&&"vc_row"===i&&(i+="_inner");var d={shortcode:i,parent_id:this.model?this.model.get("id"):!1,params:"vc_row_inner"===i?o:{}};if(this.prepend){d.order=0;var h=vc.shortcodes.findWhere({parent_id:this.model.get("id")});h&&(d.order=h.get("order")-1),vc.activity="prepend"}else this.place_after_id&&(d.place_after_id=this.place_after_id);for(this.builder.create(d),l=this.builder.models.length-1;l>=0;l--)r=this.builder.models[l].get("shortcode"),"undefined"!=typeof window.vc_settings_presets[r]&&(this.builder.models[l].attributes.params=_.extend(this.builder.models[l].attributes.params,window.vc_settings_presets[r]));"vc_row"===i?this.builder.create({shortcode:"vc_column",parent_id:this.builder.lastID(),params:s}):"vc_row_inner"===i&&(s={width:"1/1"},"undefined"!=typeof window.vc_settings_presets.vc_column_inner&&(s=_.extend(s,window.vc_settings_presets.vc_column_inner)),this.builder.create({shortcode:"vc_column_inner",parent_id:this.builder.lastID(),params:s}));var p=vc.getMapped(i);if(_.isString(p.default_content)&&p.default_content.length){var v=this.builder.parse({},p.default_content,this.builder.last().toJSON());_.each(v,function(e){e.default_content=!0,this.builder.create(e)},this)}this.show_settings=!(_.isBoolean(p.show_settings_on_create)&&!1===p.show_settings_on_create),c=this,this.$el.one("hidden.bs.modal",function(){c.preventDoubleExecution=!1}).modal("hide")}},_getNotIn:_.memoize(function(e){var t=_.reduce(vc.map,function(t,n){var i=_.isEmpty(t)?"":",";return _.isObject(n.as_child)?(_.isString(n.as_child.only)&&(_.contains(n.as_child.only.replace(/\s/,"").split(","),e)||(t+=i+"[data-element="+n.base+"]")),_.isString(n.as_child.except)&&_.contains(n.as_child.except.replace(/\s/,"").split(","),e)&&(t+=i+"[data-element="+n.base+"]")):!1===n.as_child&&(t+=i+"[data-element="+n.base+"]"),t},"");return'[data-vc-ui-element="add-element-button"]:not('+t+")"}),filterElements:function(t){t.stopPropagation(),t.preventDefault();var n=e(t.currentTarget),i='[data-vc-ui-element="add-element-button"]',a=e("#vc_elements_name_filter").val();if(this.$content.removeClass("vc_filter-all"),n.is("[data-filter]")){e(".wpb-content-layouts-container .isotope-filter .active",this.$content).removeClass("active"),n.parent().addClass("active");var s=n.data("filter");i+=s,"*"===s?this.$content.addClass("vc_filter-all"):this.$content.removeClass("vc_filter-all"),this.$content.attr("data-vc-ui-filter",s.replace(".js-category-","")),e("#vc_elements_name_filter").val("")}else 0<a.length?(i+=":containsi('"+a+"'):not('.vc_element-deprecated')",e(".wpb-content-layouts-container .isotope-filter .active",this.$content).removeClass("active"),this.$content.attr("data-vc-ui-filter","name:"+a)):a.length||(e('.wpb-content-layouts-container .isotope-filter [data-filter="*"]').parent().addClass("active"),this.$content.attr("data-vc-ui-filter","*"),this.$content.addClass("vc_filter-all"));e(".vc_visible",this.$content).removeClass("vc_visible"),e(i,this.$content).addClass("vc_visible")},shown:function(){vc.is_mobile||e("#vc_elements_name_filter").focus()}}),vc.AddElementBlockViewBackendEditor=vc.AddElementBlockView.extend({render:function(t,n){return this.prepend=_.isBoolean(n)?n:!1,this.place_after_id=_.isString(n)?n:!1,this.model=_.isObject(t)?t:!1,this.$content=this.$el.find('[data-vc-ui-element="panel-add-element-list"]'),this.$buttons=e('[data-vc-ui-element="add-element-button"]',this.$content),vc.AddElementBlockView.__super__.render.call(this)},createElement:function(t){var n,i,a,s,o,c;if(!this.preventDoubleExecution){this.preventDoubleExecution=!0;var r,l,d;_.isObject(t)&&t.preventDefault(),this.do_render=!0;var h=e(t.currentTarget).data("tag");a={},"undefined"!=typeof window.vc_settings_presets.vc_row&&(a=_.extend(a,window.vc_settings_presets.vc_row)),s={width:"1/1"},"undefined"!=typeof window.vc_settings_presets.vc_column&&(s=_.extend(s,window.vc_settings_presets.vc_column)),!1===this.model?(d=vc.shortcodes.create({shortcode:"vc_row",params:a}),l=vc.shortcodes.create({shortcode:"vc_column",params:s,parent_id:d.id,root_id:d.id}),r="vc_row"!==h?vc.shortcodes.create({shortcode:h,parent_id:l.id,root_id:d.id}):d):"vc_row"===h?(o={},"undefined"!=typeof window.vc_settings_presets.vc_row_inner&&(o=_.extend(o,window.vc_settings_presets.vc_row_inner)),c={width:"1/1"},"undefined"!=typeof window.vc_settings_presets.vc_column_inner&&(c=_.extend(c,window.vc_settings_presets.vc_column_inner)),d=vc.shortcodes.create({shortcode:"vc_row_inner",params:o,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder()}),r=vc.shortcodes.create({shortcode:"vc_column_inner",params:c,parent_id:d.id,root_id:d.id})):r=vc.shortcodes.create({shortcode:h,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder(),root_id:this.model.get("root_id")}),this.show_settings=!(_.isBoolean(vc.getMapped(h).show_settings_on_create)&&!1===vc.getMapped(h).show_settings_on_create),this.model=r,i=this.model.get("shortcode"),"undefined"!=typeof window.vc_settings_presets[i]&&(this.model.attributes.params=_.extend(this.model.attributes.params,window.vc_settings_presets[i])),n=this,this.$el.one("hidden.bs.modal",function(){n.preventDoubleExecution=!1}).modal("hide")}},showEditForm:function(){vc.edit_element_block_view.render(this.model)},exit:function(){},getFirstPositionIndex:function(){return vc.element_start_index-=1,vc.element_start_index}}),vc.PanelView=vc.View.extend({mediaSizeClassPrefix:"vc_media-",customMediaQuery:!0,panelName:"panel",draggable:!1,$body:!1,$tabs:!1,$content:!1,events:{"click [data-dismiss=panel]":"hide","mouseover [data-transparent=panel]":"addOpacity","click [data-transparent=panel]":"toggleOpacity","mouseout [data-transparent=panel]":"removeOpacity","click .vc_panel-tabs-link":"changeTab"},_vcUIEventsHooks:[{resize:"setResize"}],options:{startTab:0},clicked:!1,showMessageDisabled:!0,initialize:function(){this.clicked=!1,this.$el.removeClass("vc_panel-opacity"),this.$body=e("body"),this.$content=this.$el.find(".vc_panel-body"),_.bindAll(this,"setSize","fixElContainment","changeTab","setTabsSize"),this.on("show",this.setSize,this),this.on("setSize",this.setResize,this),this.on("render",this.resetMinimize,this)},toggleOpacity:function(){this.clicked=!this.clicked},addOpacity:function(){!this.clicked&&this.$el.addClass("vc_panel-opacity")},removeOpacity:function(){!this.clicked&&this.$el.removeClass("vc_panel-opacity")},message_box_timeout:!1,init:function(){},render:function(){return this.trigger("render"),this.trigger("afterRender"),this},show:function(){if(!this.$el.hasClass("vc_active")){vc.closeActivePanel(),this.init(),vc.active_panel=this,this.clicked=!1,this.$el.removeClass("vc_panel-opacity");var t=this.$el.find(".vc_panel-tabs");t.length&&(this.$tabs=t,this.setTabs()),this.$el.addClass("vc_active"),this.draggable?this.initDraggable():e(window).trigger("resize"),this.fixElContainment(),this.trigger("show")}},hide:function(e){e&&e.preventDefault(),this.model&&(this.model=null),vc.active_panel=!1,this.$el.removeClass("vc_active")},content:function(){return this.$el.find(".panel-body")},setResize:function(){this.customMediaQuery&&this.setMediaSizeClass()},setMediaSizeClass:function(){var e,t;e=this.$el.width(),t={xs:!0,sm:!1,md:!1,lg:!1},e>=525&&(t.sm=!0),e>=745&&(t.md=!0),e>=945&&(t.lg=!0),_.each(t,function(e,t){e?this.$el.addClass(this.mediaSizeClassPrefix+t):this.$el.removeClass(this.mediaSizeClassPrefix+t)},this)},fixElContainment:function(){this.$body||(this.$body=e("body"));var t=this.$el.width(),n=this.$body.width(),i=this.$body.height(),a=[-t+20,0,n-20,i-30],s=this.$el.position(),o={};s.left<a[0]&&(o.left=a[0]),0>s.top&&(o.top=0),s.left>a[2]&&(o.left=a[2]),s.top>a[3]&&(o.top=a[3]),this.$el.css(o),this.trigger("fixElContainment"),this.setSize()},initDraggable:function(){this.$el.draggable({iframeFix:!0,handle:".vc_panel-heading",start:this.fixElContainment,stop:this.fixElContainment}),this.draggable=!0},setSize:function(){this.trigger("setSize")},setTabs:function(){this.$tabs.length&&(this.$tabs.find(".vc_panel-tabs-control").removeClass("vc_active").eq(this.options.startTab).addClass("vc_active"),this.$tabs.find(".vc_panel-tab").removeClass("vc_active").eq(this.options.startTab).addClass("vc_active"),window.setTimeout(this.setTabsSize,100))},setTabsSize:function(){this.$tabs&&this.$tabs.parents(".vc_with-tabs.vc_panel-body").css("margin-top",this.$tabs.find(".vc_panel-tabs-menu").outerHeight())},changeTab:function(t){if(t&&t.preventDefault&&t.preventDefault(),t.target&&this.$tabs){var n=e(t.target);this.$tabs.find(".vc_active").removeClass("vc_active"),n.parent().addClass("vc_active"),this.$el.find(n.data("target")).addClass("vc_active"),window.setTimeout(this.setTabsSize,100)}},showMessage:function(t,n){if(this.showMessageDisabled)return!1;this.message_box_timeout&&this.$el.find(".vc_panel-message").remove()&&window.clearTimeout(this.message_box_timeout),this.message_box_timeout=!1;var i=e('<div class="vc_panel-message type-'+n+'"></div>').appendTo(this.$el.find(".vc_ui-panel-content-container"));i.text(t).fadeIn(),this.message_box_timeout=window.setTimeout(function(){i.remove()},6e3)},isVisible:function(){return this.$el.is(":visible")},resetMinimize:function(){this.$el.removeClass("vc_panel-opacity")}}),vc.EditElementPanelView=vc.PanelView.extend({panelName:"edit_element",el:"#vc_properties-panel",contentSelector:".vc_ui-panel-content.vc_properties-list",minimizeButtonSelector:'[data-vc-ui-element="button-minimize"]',closeButtonSelector:'[data-vc-ui-element="button-close"]',settingsMenuSelector:'[data-vc-ui-element="settings-dropdown-list"]',settingsButtonSelector:'[data-vc-ui-element="settings-dropdown-button"]',settingsDropdownSelector:'[data-vc-ui-element="settings-dropdown"]',settingsPresetId:null,tabsInit:!1,doCheckTabs:!0,$tabsMenu:!1,dependent_elements:{},mapped_params:{},draggable:!1,panelInit:!1,$spinner:!1,active_tab_index:0,ajax:!1,buttonMessageTimeout:!1,notRequestTemplate:!1,requiredParamsInitialized:!1,currentModelParams:!1,events:{"click [data-save=true]":"save","click [data-dismiss=panel]":"hide","mouseover [data-transparent=panel]":"addOpacity","click [data-transparent=panel]":"toggleOpacity","mouseout [data-transparent=panel]":"removeOpacity"},initialize:function(){_.bindAll(this,"setSize","setTabsSize","fixElContainment","hookDependent"),this.on("setSize",this.setResize,this),this.on("render",this.resetMinimize,this),this.on("render",this.setTitle,this),this.on("render",this.prepareContentBlock,this)},render:function(t,n){var i;return this.$el.is(":hidden")&&vc.closeActivePanel(),n&&(this.notRequestTemplate=!0),this.model=t,this.currentModelParams=this.model.get("params"),vc.active_panel=this,this.resetMinimize(),this.clicked=!1,this.$el.css("height","auto"),this.$el.css("maxHeight","75vh"),i=this.model.setting("params")||[],this.$el.attr("data-vc-shortcode",this.model.get("shortcode")),this.tabsInit=!1,this.panelInit=!1,this.active_tab_index=0,this.requiredParamsInitialized=!1,this.mapped_params={},this.dependent_elements={},_.each(i,function(e){this.mapped_params[e.param_name]=e},this),this.trigger("render"),this.$el.find('[data-vc-ui-element="settings-dropdown"]').hide(),this.show(),this.ajax=e.ajax({type:"POST",url:window.ajaxurl,data:this.ajaxData(),context:this}).done(this.buildParamsContent),this},prepareContentBlock:function(){this.$content=this.notRequestTemplate?this.$el:this.$el.find(this.contentSelector).removeClass("vc_with-tabs"),this.$content.empty(),this.$spinner=e('<span class="vc_ui-wp-spinner vc_ui-wp-spinner-lg"></span>'),this.$content.prepend(this.$spinner)},buildParamsContent:function(t){var n,i,a;n=e(t),i=n.find('[data-vc-ui-element="panel-tabs-controls"]'),i.find(".vc_edit-form-tab-control:first-child").addClass("vc_active"),a=this.$el.find('[data-vc-ui-element="panel-header-content"]'),i.prependTo(a),this.$content.html(n),window.vc_presets_show&&this.$el.find('[data-vc-ui-element="settings-dropdown"]').show(),this.$content.removeAttr("data-vc-param-initialized"),this.active_tab_index=0,this.tabsInit=!1,this.panelInit=!1,this.dependent_elements={},this.requiredParamsInitialized=!1,this.$content.find("[data-vc-param-initialized]").removeAttr("data-vc-param-initialized"),this.init(),this.$content.parent().scrollTop(1).scrollTop(0),this.$content.removeClass("vc_properties-list-init"),this.$el.trigger("vcPanel.shown"),this.trigger("afterRender"),this.untaintSettingsPresetData()},resetMinimize:function(){this.$el.removeClass("vc_panel-opacity")},saveSettingsAjaxData:function(e,t,n,i){return{action:"vc_action_save_settings_preset",shortcode_name:e,is_default:n?1:0,vc_inline:!0,title:t,data:i,_vcnonce:window.vcAdminNonce}},saveSettings:function(t,n){var i=this.model.get("shortcode"),a=JSON.stringify(this.getParamsForSettingsPreset()),s=!1;"undefined"!=typeof t&&t.length&&("undefined"==typeof n&&(n=!1),e.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.saveSettingsAjaxData(i,t,n,a),context:this}).done(function(e){var t=this.$el.find(this.settingsButtonSelector);e.success&&(s=!0,this.setSettingsMenuContent(e.html),this.settingsPresetId=e.id,n&&(window.vc_settings_presets[i]=this.getParamsForSettingsPreset()),this.untaintSettingsPresetData(),t.addClass("vc_done"),setTimeout(function(){t.removeClass("vc_done")},2e3))}).always(function(){s||vcConsoleLog("Could not save settings preset")}))},fetchSaveSettingsDialogAjaxData:function(){return{action:"vc_action_render_settings_preset_title_prompt",vc_inline:!0,_vcnonce:window.vcAdminNonce}},fetchSaveSettingsDialog:function(t){var n=this.$el.find(this.settingsDropdownSelector),i=!1;return n.find(".vc_ui-prompt").length?void("undefined"!=typeof t&&t(!1)):void e.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.fetchSaveSettingsDialogAjaxData()}).done(function(e){e.success&&(i=!0,n.append(e.html),"undefined"!=typeof t&&t(!0))}).always(function(){i||vcConsoleLog("Could not fetch html")})},showSaveSettingsDialog:function(e){var t=this;this.isSettingsPresetDefault=!!e,this.fetchSaveSettingsDialog(function(e){var n=t.$el.find(t.settingsDropdownSelector),i=t.$el.find(t.settingsButtonSelector),a=n.find(".vc_ui-prompt"),s=a.find(".textfield");a.addClass("vc_visible"),i.prop("disabled",!0),s.focus(),e&&(a.on("submit",function(){var e=s.val(),n=t.$el.find(t.settingsButtonSelector);return e.length?(t.saveSettings(e,t.isSettingsPresetDefault),s.val(""),a.removeClass("vc_visible"),n.removeProp("disabled").click(),!1):!1}),a.on("click",".vc_ui-prompt-close",function(){return i.removeProp("disabled"),a.removeClass("vc_visible"),!1}))})},loadSettingsAjaxData:function(e){return{action:"vc_action_get_settings_preset",vc_inline:!0,id:e,_vcnonce:window.vcAdminNonce}},loadSettings:function(t){var n=!1;this.panelInit=!1,e.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.loadSettingsAjaxData(t),context:this}).done(function(e){e.success&&(n=!0,this.settingsPresetId=t,this.renderSettingsPreset(e.data))}).always(function(){n||vcConsoleLog("Could not get settings preset")})},deleteSettingsAjaxData:function(e,t){return{action:"vc_action_delete_settings_preset",
shortcode_name:e,vc_inline:!0,id:t,_vcnonce:window.vcAdminNonce}},deleteSettings:function(t){var n=this.model.get("shortcode"),i=!1;confirm(window.i18nLocale.delete_preset_confirmation)&&e.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.deleteSettingsAjaxData(n,t),context:this}).done(function(e){e&&e.success&&(i=!0,this.setSettingsMenuContent(e.html),t===this.settingsPresetId&&(this.settingsPresetId=null),e["default"]&&(delete window.vc_settings_presets[n],"undefined"!==window.vc_vendor_settings_presets[n]&&(window.vc_settings_presets[n]=window.vc_vendor_settings_presets[n])))}).always(function(){i||vcConsoleLog("Could not delete settings preset")})},saveAsDefaultSettingsAjaxData:function(e){return{action:"vc_action_set_as_default_settings_preset",shortcode_name:e,id:this.settingsPresetId,vc_inline:!0,_vcnonce:window.vcAdminNonce}},saveAsDefaultSettings:function(){var t=this.model.get("shortcode"),n=!1;!this.settingsPresetId||this.isSettingsPresetDataTainted()?this.showSaveSettingsDialog(!0):e.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.saveAsDefaultSettingsAjaxData(t),context:this}).done(function(e){e.success&&(n=!0,this.setSettingsMenuContent(e.html),this.untaintSettingsPresetData(),window.vc_settings_presets[t]=this.getParamsForSettingsPreset())}).always(function(){n||vcConsoleLog("Could not save default settings preset")})},restoreDefaultSettingsAjaxData:function(e){return{action:"vc_action_restore_default_settings_preset",shortcode_name:e,vc_inline:!0,_vcnonce:window.vcAdminNonce}},restoreDefaultSettings:function(){var t=this.model.get("shortcode"),n=!1;e.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.restoreDefaultSettingsAjaxData(t),context:this}).done(function(e){e.success&&(n=!0,this.setSettingsMenuContent(e.html),delete window.vc_settings_presets[t],"undefined"!==window.vc_vendor_settings_presets[t]&&(window.vc_settings_presets[t]=window.vc_vendor_settings_presets[t]))}).always(function(){n||vcConsoleLog("Could not save default settings preset")})},setSettingsMenuContent:function(t){var n=this.$el.find(this.settingsButtonSelector),i=this.$el.find(this.settingsMenuSelector),a=this.model.get("shortcode"),s=this;n.data("vcShortcodeName",a),i.html(t),i.find("[data-vc-load-settings-preset]").on("click",function(){s.loadSettings(e(this).data("vcLoadSettingsPreset")),s.closeSettings()}),i.find("[data-vc-delete-settings-preset]").on("click",function(){s.deleteSettings(e(this).data("vcDeleteSettingsPreset"))}),i.find("[data-vc-save-settings-preset]").on("click",function(){s.showSaveSettingsDialog(),s.closeSettings()}),i.find("[data-vc-save-default-settings-preset]").on("click",function(){s.saveAsDefaultSettings(),s.closeSettings()}),i.find("[data-vc-restore-default-settings-preset]").on("click",function(){s.restoreDefaultSettings(),s.closeSettings()})},reloadSettingsMenuContentAjaxData:function(e){return{action:"vc_action_render_settings_preset_popup",shortcode_name:e,vc_inline:!0,_vcnonce:window.vcAdminNonce}},reloadSettingsMenuContent:function(){var t=this.model.get("shortcode"),n=this.$el.find(this.settingsButtonSelector),i=!1;n.addClass("vc_loading"),this.setSettingsMenuContent(""),e.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.reloadSettingsMenuContentAjaxData(t),context:this}).done(function(e){e.success&&(i=!0,this.setSettingsMenuContent(e.html),n.data("vcSettingsMenuLoaded",!0).removeClass("vc_loading"))}).always(function(){i||(this.closeSettings(),vcConsoleLog("Could not fetch html"))})},closeSettings:function(e){"undefined"==typeof e&&(e=!1);var t=this.$el.find(this.settingsMenuSelector),n=this.$el.find(this.settingsButtonSelector);e&&(button.data("vcSettingsMenuLoaded",!1),t.html("")),n.vcAccordion("hide")},isSettingsPresetDataTainted:function(){var e=JSON.stringify(this.getParamsForSettingsPreset());return e=e.replace(/vc_custom_\d+/,""),this.$el.data("vcSettingsPresetHash")!==vc_globalHashCode(e)},untaintSettingsPresetData:function(){var e=JSON.stringify(this.getParamsForSettingsPreset());e=e.replace(/vc_custom_\d+/,""),this.$el.data("vcSettingsPresetHash",vc_globalHashCode(e))},renderSettingsPresetAjaxData:function(t){var n;return n=this.model.get("parent_id"),{action:"vc_edit_form",tag:this.model.get("shortcode"),parent_tag:n?this.model.collection.get(n).get("shortcode"):null,post_id:e("#post_ID").val(),params:t,_vcnonce:window.vcAdminNonce}},renderSettingsPreset:function(t){return this.currentModelParams=t,"vc_tta_section"===this.model.get("shortcode")&&"undefined"!=typeof t.tab_id&&(t.tab_id=vc_guid()+"-cl"),this._killEditor(),this.clearButtonMessage(),this.trigger("render"),this.show(),this.ajax=e.ajax({type:"POST",url:window.ajaxurl,data:this.renderSettingsPresetAjaxData(t),context:this}).done(this.buildParamsContent),this},ajaxData:function(){var t,n,i,a;return n=this.model.get("parent_id"),t=n?this.model.collection.get(n).get("shortcode"):null,i=this.model.get("params"),a=vc.getMergedParams(this.model.get("shortcode"),_.extend({},vc.getDefaults(this.model.get("shortcode")),i)),_.isUndefined(i.content)||(a.content=i.content),{action:"vc_edit_form",tag:this.model.get("shortcode"),parent_tag:t,post_id:e("#post_ID").val(),params:a,_vcnonce:window.vcAdminNonce}},init:function(){vc.EditElementPanelView.__super__.init.call(this),this.initParams(),this.initDependency();var t=this;e(".wpb_edit_form_elements .textarea_html").each(function(){window.init_textarea_html(e(this))}),e(document).off("beforeMinimize.vc.paramWindow",this.minimizeButtonSelector).on("beforeMinimize.vc.paramWindow",this.minimizeButtonSelector,function(){var e=self.$el.find(self.settingsDropdownSelector),t=e.find(".vc_ui-prompt");t.find(".vc_ui-prompt-close").trigger("click")}),e(document).off("close.vc.paramWindow",this.closeButtonSelector).on("beforeClose.vc.paramWindow",this.closeButtonSelector,function(){var e=self.$el.find(self.settingsDropdownSelector),t=e.find(".vc_ui-prompt");t.find(".vc_ui-prompt-close").trigger("click")}),e(document).off("show.vc.accordion",this.settingsButtonSelector).on("show.vc.accordion",this.settingsButtonSelector,function(){var n=e(this),i=t.model.get("shortcode");n.data("vcSettingsMenuLoaded")&&i===n.data("vcShortcodeName")||t.reloadSettingsMenuContent()}),this.panelInit=!0},initParams:function(){var t=this,n=this.content().find('#vc_edit-form-tabs [data-vc-ui-element="panel-edit-element-tab"]:eq('+this.active_tab_index+")");n.length||(n=this.content()),n.attr("data-vc-param-initialized")||(e('[data-vc-ui-element="panel-shortcode-param"]',n).each(function(){var n,i;n=e(this),n.data("vcInitParam")||(i=n.data("param_settings"),vc.atts.init.call(t,i,n),n.data("vcInitParam",!0))}),n.attr("data-vc-param-initialized",!0)),this.requiredParamsInitialized||_.isUndefined(vc.required_params_to_init)||(e('[data-vc-ui-element="panel-shortcode-param"]',this.content()).each(function(){var n,i;n=e(this),!n.data("vcInitParam")&&_.indexOf(vc.required_params_to_init,n.data("param_type"))>-1&&(i=n.data("param_settings"),vc.atts.init.call(t,i,n),n.data("vcInitParam",!0))}),this.requiredParamsInitialized=!0)},initDependency:function(){var t={};_.each(this.mapped_params,function(n){if(_.isObject(n)&&_.isObject(n.dependency)){var i=n.dependency;if(_.isString(n.dependency.element)){var a,s;a=e("[name="+n.dependency.element+"].wpb_vc_param_value",this.$content),s=e("[name= "+n.param_name+"].wpb_vc_param_value",this.$content),_.each(a,function(n){var i,a;i=e(n),a=i.attr("name"),_.isArray(this.dependent_elements[i.attr("name")])||(this.dependent_elements[i.attr("name")]=[]),this.dependent_elements[i.attr("name")].push(s),!i.data("dependentSet")&&i.attr("data-dependent-set","true")&&i.bind("keyup change",this.hookDependent),t[a]||(t[a]=i)},this)}_.isString(i.callback)&&window[i.callback].call(this)}},this),this.doCheckTabs=!1,_.each(t,function(e){this.hookDependent({currentTarget:e})},this),this.doCheckTabs=!0,this.checkTabs(),t=null},hookDependent:function(t){var n,i,a,s,o,c;return n=e(t.currentTarget),i=n.closest(".vc_column"),s=this.dependent_elements[n.attr("name")],o=n.is(":checkbox")?_.map(this.$content.find("[name="+e(t.currentTarget).attr("name")+"].wpb_vc_param_value:checked"),function(t){return e(t).val()}):n.val(),c=this.doCheckTabs,this.doCheckTabs=!1,a=n.is(":checkbox")?!this.$content.find("[name="+n.attr("name")+"].wpb_vc_param_value:checked").length:!o.length,i.hasClass("vc_dependent-hidden")?_.each(s,function(e){var t=jQuery.Event("change");t.extra_type="vcHookDepended",e.closest(".vc_column").addClass("vc_dependent-hidden"),e.trigger(t)}):_.each(s,function(e){var t=e.attr("name"),n=_.isObject(this.mapped_params[t])&&_.isObject(this.mapped_params[t].dependency)?this.mapped_params[t].dependency:{},i=e.closest(".vc_column");_.isBoolean(n.not_empty)&&!0===n.not_empty&&!a?i.removeClass("vc_dependent-hidden"):_.isBoolean(n.is_empty)&&!0===n.is_empty&&a?i.removeClass("vc_dependent-hidden"):n.value&&_.intersection(_.isArray(n.value)?n.value:[n.value],_.isArray(o)?o:[o]).length?i.removeClass("vc_dependent-hidden"):n.value_not_equal_to&&!_.intersection(_.isArray(n.value_not_equal_to)?n.value_not_equal_to:[n.value_not_equal_to],_.isArray(o)?o:[o]).length?i.removeClass("vc_dependent-hidden"):i.addClass("vc_dependent-hidden");var s=jQuery.Event("change");s.extra_type="vcHookDepended",e.trigger(s)},this),c&&(this.checkTabs(),this.doCheckTabs=!0),this},checkTabs:function(){var t=this;!1===this.tabsInit&&(this.tabsInit=!0,this.$content.hasClass("vc_with-tabs")&&(this.$tabsMenu=this.$content.find(".vc_edit-form-tabs-menu"))),this.$tabsMenu&&(this.$content.find('[data-vc-ui-element="panel-edit-element-tab"]').each(function(n){var i=t.$tabsMenu.find('> [data-tab-index="'+n+'"]');e(this).find('[data-vc-ui-element="panel-shortcode-param"]:not(".vc_dependent-hidden")').length?i.hasClass("vc_dependent-hidden")&&(i.removeClass("vc_dependent-hidden").removeClass("vc_tab-color-animated").addClass("vc_tab-color-animated"),window.setTimeout(function(){i.removeClass("vc_tab-color-animated")},200)):i.addClass("vc_dependent-hidden")}),window.setTimeout(this.setTabsSize,100))},setTabsSize:function(){this.$tabsMenu.parents(".vc_with-tabs.vc_panel-body").css("margin-top",this.$tabsMenu.outerHeight())},setActive:function(){this.$el.prev().addClass("active")},window:function(){return window},getParams:function(){var e;return e=this.mapped_params,this.params=_.extend({},this.model.get("params")),_.each(e,function(e){var t;t=vc.atts.parseFrame.call(this,e),this.params[e.param_name]=t},this),_.each(vc.edit_form_callbacks,function(e){e.call(this)},this),this.params},getParamsForSettingsPreset:function(){var e=this.model.get("shortcode"),t=this.getParams();return("vc_column"===e||"vc_column_inner"===e)&&(delete t.width,delete t.offset),t},content:function(){return this.$content},save:function(){if(this.panelInit){var e=this.model.get("shortcode"),t=this.getParams(),n=_.extend({},vc.getDefaults(e),vc.getMergedParams(e,t));_.isUndefined(t.content)||(n.content=t.content),this.model.save({params:n}),this.showMessage(window.sprintf(window.i18nLocale.inline_element_saved,vc.getMapped(e).name),"success"),!vc.frame_window&&this.hide(),this.trigger("save")}},show:function(){this.$el.hasClass("vc_active")||(this.$el.addClass("vc_active"),this.draggable||this.initDraggable(),this.fixElContainment(),this.trigger("show"))},hide:function(e){e&&e.preventDefault(),this.ajax&&this.ajax.abort(),this.ajax=!1,this.model&&(this.model=null),vc.active_panel=!1,this.currentModelParams=!1,this._killEditor(),this.$el.removeClass("vc_active"),this.$el.find(".vc_properties-list").removeClass("vc_with-tabs").css("margin-top","auto"),this.$content.empty(),this.trigger("hide")},setTitle:function(){return this.$el.find(".vc_panel-title").text(vc.getMapped(this.model.get("shortcode")).name+" "+window.i18nLocale.settings),this},_killEditor:function(){_.isUndefined(window.tinyMCE)||e("textarea.textarea_html",this.$el).each(function(){var t=e(this).attr("id");"4"===tinymce.majorVersion?window.tinyMCE.execCommand("mceRemoveEditor",!0,t):window.tinyMCE.execCommand("mceRemoveControl",!0,t)}),jQuery("body").off("click.wpcolorpicker")}}),vc.PostSettingsPanelView=vc.PanelView.extend({events:{"click [data-save=true]":"save","click [data-dismiss=panel]":"hide","click [data-transparent=panel]":"toggleOpacity","mouseover [data-transparent=panel]":"addOpacity","mouseout [data-transparent=panel]":"removeOpacity"},saved_css_data:"",saved_title:"",$title:!1,editor:!1,post_settings_editor:!1,initialize:function(){vc.$custom_css=e("#vc_post-custom-css"),this.saved_css_data=vc.$custom_css.val(),this.saved_title=vc.title,this.initEditor(),this.$body=e("body"),_.bindAll(this,"setSize","fixElContainment"),this.on("show",this.setSize,this),this.on("setSize",this.setResize,this),this.on("render",this.resetMinimize,this)},initEditor:function(){this.editor=new Vc_postSettingsEditor},render:function(){return this.trigger("render"),this.$title=this.$el.find("#vc_page-title-field"),this.$title.val(vc.title),this.setEditor(),this.trigger("afterRender"),this},setEditor:function(){this.editor.setEditor(vc.$custom_css.val())},setSize:function(){this.editor.setSize(),this.trigger("setSize")},save:function(){if(this.$title){var e=this.$title.val();e!=vc.title&&vc.frame.setTitle(e)}this.setAlertOnDataChange(),vc.$custom_css.val(this.editor.getValue()),vc.frame_window&&vc.frame_window.vc_iframe.loadCustomCss(vc.$custom_css.val()),vc.updateSettingsBadge(),this.showMessage(window.i18nLocale.css_updated,"success"),this.trigger("save")},setAlertOnDataChange:function(){this.saved_css_data!==this.editor.getValue()?vc.setDataChanged():this.$title&&this.saved_title!==this.$title.val()&&vc.setDataChanged()}}),vc.PostSettingsPanelViewBackendEditor=vc.PostSettingsPanelView.extend({render:function(){return this.trigger("render"),this.setEditor(),this.trigger("afterRender"),this},setAlertOnDataChange:function(){vc.saved_custom_css!==this.editor.getValue()&&window.tinymce&&(window.switchEditors.go("content","tmce"),window.setTimeout(function(){window.tinymce.get("content").isNotDirty=!1},1e3))},save:function(){vc.PostSettingsPanelViewBackendEditor.__super__.save.call(this),this.hide()}}),vc.TemplatesEditorPanelView=vc.PanelView.extend({events:{"click [data-dismiss=panel]":"hide","click [data-transparent=panel]":"toggleOpacity","mouseover [data-transparent=panel]":"addOpacity","mouseout [data-transparent=panel]":"removeOpacity","click .wpb_remove_template":"removeTemplate","click [data-template_id]":"loadTemplate","click [data-template_name]":"loadDefaultTemplate","click #vc_template-save":"saveTemplate"},render:function(){this.trigger("render"),this.$name=e("#vc_template-name"),this.$list=e("#vc_template-list");var t=e("#vc_tabs-templates");return t.find(".vc_edit-form-tab-control").removeClass("vc_active").eq(0).addClass("vc_active"),t.find('[data-vc-ui-element="panel-edit-element-tab"]').removeClass("vc_active").eq(0).addClass("vc_active"),t.find(".vc_edit-form-link").click(function(n){n.preventDefault();var i=e(this);t.find(".vc_active").removeClass("vc_active"),i.parent().addClass("vc_active"),e(i.attr("href")).addClass("vc_active")}),this.trigger("afterRender"),this},removeTemplate:function(t){t&&t.preventDefault();var n=e(t.currentTarget),i=n.closest('[data-vc-ui-element="template-title"]').text(),a=confirm(window.i18nLocale.confirm_deleting_template.replace("{template_name}",i));a&&(n.closest('[data-vc-ui-element="template"]').remove(),this.$list.html(window.i18nLocale.loading),e.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_delete_template",template_id:n.attr("rel"),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done(function(e){this.$list.html(e)}))},loadTemplate:function(t){t&&t.preventDefault();var n=e(t.currentTarget);e.ajax({type:"POST",url:vc.frame_window.location.href,data:{action:"vc_frontend_template",template_id:n.data("template_id"),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done(function(t){var n,i;_.each(e(t),function(e){if("vc_template-data"===e.id)try{i=JSON.parse(e.innerHTML)}catch(t){vcConsoleLog(t,"catching template data error")}"vc_template-html"===e.id&&(n=e.innerHTML)}),n&&i&&vc.builder.buildFromTemplate(n,i),this.showMessage(window.i18nLocale.template_added,"success"),vc.closeActivePanel()})},ajaxData:function(e){return{action:"vc_frontend_default_template",template_name:e.data("template_name"),vc_inline:!0,_vcnonce:window.vcAdminNonce}},loadDefaultTemplate:function(t){t&&t.preventDefault();var n=e(t.currentTarget);e.ajax({type:"POST",url:vc.frame_window.location.href,data:this.ajaxData(n),context:this}).done(function(t){var n,i;_.each(e(t),function(e){if("vc_template-data"===e.id)try{i=JSON.parse(e.innerHTML)}catch(t){vcConsoleLog(t,"catching template data error")}"vc_template-html"===e.id&&(n=e.innerHTML)}),n&&i&&vc.builder.buildFromTemplate(n,i),this.showMessage(window.i18nLocale.template_added,"success")})},saveTemplate:function(e){e.preventDefault();var t,n,i=this.$name.val();if(_.isString(i)&&i.length){if(n=this.getPostContent(),!n.trim().length)return this.showMessage(window.i18nLocale.template_is_empty,"error"),!1;t={action:"wpb_save_template",template:n,template_name:i,frontend:!0,vc_inline:!0,_vcnonce:window.vcAdminNonce},this.$name.val(""),this.showMessage(window.i18nLocale.template_save,"success"),this.reloadTemplateList(t)}else this.showMessage(window.i18nLocale.please_enter_templates_name,"error")},reloadTemplateList:function(e){this.$list.html(window.i18nLocale.loading).load(window.ajaxurl,e)},getPostContent:function(){return vc.builder.getContent()}}),vc.TemplatesEditorPanelViewBackendEditor=vc.TemplatesEditorPanelView.extend({ajaxData:function(e){return{action:"vc_backend_template",template_id:e.attr("data-template_id"),vc_inline:!0,_vcnonce:window.vcAdminNonce}},loadTemplate:function(t){t.preventDefault();var n=e(t.currentTarget);e.ajax({type:"POST",url:window.ajaxurl,data:this.ajaxData(n),context:this}).done(function(e){_.each(vc.filters.templates,function(t){e=t(e)}),vc.storage.append(e),vc.shortcodes.fetch({reset:!0}),vc.closeActivePanel()})},loadDefaultTemplate:function(t){t.preventDefault();var n=e(t.currentTarget);e.ajax({type:"POST",url:window.ajaxurl,data:{action:"vc_backend_default_template",template_name:n.attr("data-template_name"),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done(function(e){_.each(vc.filters.templates,function(t){e=t(e)}),vc.storage.append(e),vc.shortcodes.fetch({reset:!0})})},getPostContent:function(){return vc.storage.getContent()}}),vc.TemplatesPanelViewBackend=vc.PanelView.extend({$name:!1,$list:!1,template_load_action:"vc_backend_load_template",templateLoadPreviewAction:"vc_load_template_preview",save_template_action:"vc_save_template",delete_template_action:"vc_delete_template",appendedTemplateType:"my_templates",appendedTemplateCategory:"my_templates",appendedCategory:"my_templates",appendedClass:"my_templates",loadUrl:window.ajaxurl,events:e.extend(vc.PanelView.prototype.events,{"click .vc_template-save-btn":"saveTemplate","click [data-template_unique_id] [data-template-handler]":"loadTemplate","click .vc_template-delete-icon":"removeTemplate"}),initialize:function(){_.bindAll(this,"checkInput","saveTemplate"),vc.TemplatesPanelViewBackend.__super__.initialize.call(this)},render:function(){return this.$el.css("left",(e(window).width()-this.$el.width())/2),this.$name=this.$el.find('[data-js-element="vc-templates-input"]'),this.$name.off("keypress").on("keypress",this.checkInput),this.$list=this.$el.find(".vc_templates-list-my_templates"),vc.TemplatesPanelViewBackend.__super__.render.call(this)},saveTemplate:function(e){e&&e.preventDefault&&e.preventDefault();var t,n,i=this.$name.val(),a=this;return _.isString(i)&&i.length?(n=this.getPostContent(),n.trim().length?(t={action:this.save_template_action,template:n,template_name:i,vc_inline:!0,_vcnonce:window.vcAdminNonce},void this.setButtonMessage(void 0,void 0,!0).reloadTemplateList(t,function(){a.$name.val("").change()},function(){a.showMessage(window.i18nLocale.template_save_error,"error"),a.clearButtonMessage()})):(this.showMessage(window.i18nLocale.template_is_empty,"error"),!1)):(this.showMessage(window.i18nLocale.please_enter_templates_name,"error"),!1)},checkInput:function(e){return 13===e.which?(this.saveTemplate(),!1):void 0},removeTemplate:function(t){t&&t.preventDefault(),t.stopPropagation();var n=e(t.target),i=n.closest("[data-template_id]"),a=i.find('[data-vc-ui-element="template-title"]').text(),s=confirm(window.i18nLocale.confirm_deleting_template.replace("{template_name}",a));if(s){var o=i.data("template_unique_id");i.remove(),e.ajax({type:"POST",url:window.ajaxurl,data:{action:this.delete_template_action,template_id:o,vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done(function(){this.showMessage(window.i18nLocale.template_removed,"success")})}},reloadTemplateList:function(t,n,i){var a=this;e.ajax({type:"POST",url:window.ajaxurl,data:t,context:this}).done(function(t){a.filter=!1,a.$list.prepend(e(t)),"function"==typeof n&&n(t)}).error("function"==typeof i?i:function(){})},getPostContent:function(){return vc.shortcodes.stringify("template")},loadTemplate:function(t){t.preventDefault(),t.stopPropagation();var n=e(t.target).closest("[data-template_unique_id][data-template_type]");e.ajax({type:"POST",url:this.loadUrl,data:{action:this.template_load_action,template_unique_id:n.data("template_unique_id"),template_type:n.data("template_type"),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done(this.renderTemplate)},renderTemplate:function(e){var t;_.each(vc.filters.templates,function(t){e=t(e)}),t=vc.storage.parseContent({},e),_.each(t,function(e){vc.shortcodes.create(e)}),vc.closeActivePanel()},buildTemplatePreview:function(t){t&&t.preventDefault&&t.preventDefault();try{var n,i=e(t.currentTarget),a=i.closest("[data-template_unique_id]");if(a.hasClass("vc_active")||a.hasClass("vc_loading"))i.vcAccordion("collapseTemplate");else{var s=a.find("[data-js-content]"),o=s.children().length>0;if(this.$content=s,this.$content.find("iframe").length)return i.vcAccordion("collapseTemplate"),!0;var c=a.data("template_unique_id"),r=a.data("template_type");if(c&&!o){n=window.ajaxurl+"?"+e.param({action:this.templateLoadPreviewAction,template_unique_id:c,template_type:r,vc_inline:!0,post_id:e("#post_ID").val(),_vcnonce:window.vcAdminNonce}),i.find("i").addClass("vc_ui-wp-spinner"),this.$content.html('<iframe style="width: 100%;" data-vc-template-preview-frame="'+c+'"></iframe>');var l=this.$content.find("[data-vc-template-preview-frame]");l.attr("src",n),a.addClass("vc_loading"),l.load(function(){a.removeClass("vc_loading"),i.find("i").removeClass("vc_ui-wp-spinner"),i.vcAccordion("collapseTemplate")})}}}catch(t){window.console&&window.console.error&&window.console.error(t),this.showMessage("Failed to build preview","error")}},setTemplatePreviewSize:function(e){var t=this.$content.find("iframe");t.length>0&&(t=t[0],void 0===e&&(t.height=t.contentWindow.document.body.offsetHeight,e=t.contentWindow.document.body.scrollHeight),t.height=e+"px")}}),vc.TemplatesPanelViewFrontend=vc.TemplatesPanelViewBackend.extend({template_load_action:"vc_frontend_load_template",loadUrl:!1,initialize:function(){this.loadUrl=vc.$frame.attr("src"),vc.TemplatesPanelViewFrontend.__super__.initialize.call(this)},render:function(){return vc.TemplatesPanelViewFrontend.__super__.render.call(this)},renderTemplate:function(t){var n,i;_.each(e(t),function(e){if("vc_template-data"===e.id)try{i=JSON.parse(e.innerHTML)}catch(t){vcConsoleLog(t)}"vc_template-html"===e.id&&(n=e.innerHTML)}),n&&i&&vc.builder.buildFromTemplate(n,i)?this.showMessage(window.i18nLocale.template_added_with_id,"error"):this.showMessage(window.i18nLocale.template_added,"success"),vc.closeActivePanel()}}),vc.RowLayoutEditorPanelView=vc.PanelView.extend({events:{"click [data-dismiss=panel]":"hide","click [data-transparent=panel]":"toggleOpacity","mouseover [data-transparent=panel]":"addOpacity","mouseout [data-transparent=panel]":"removeOpacity","click .vc_layout-btn":"setLayout","click #vc_row-layout-update":"updateFromInput"},_builder:!1,render:function(t){return this.$input=e("#vc_row-layout"),t&&(this.model=t),this.addCurrentLayout(),this.resetMinimize(),vc.column_trig_changes=!0,this},builder:function(){return this._builder||(this._builder=new vc.ShortcodesBuilder),this._builder},addCurrentLayout:function(){vc.shortcodes.sort();var e=_.map(vc.shortcodes.where({parent_id:this.model.get("id")}),function(e){var t=e.getParam("width");return t?t:"1/1"},"",this).join(" + ");this.$input.val(e)},isBuildComplete:function(){return this.builder().isBuildComplete()},setLayout:function(t){if(t&&t.preventDefault(),!this.isBuildComplete())return!1;var n=e(t.currentTarget),i=n.attr("data-cells"),a=this.model.view.convertRowColumns(i,this.builder());this.$input.val(a.join(" + "))},updateFromInput:function(e){if(e&&e.preventDefault(),!this.isBuildComplete())return!1;var t,n=this.$input.val();!1!==(t=this.validateCellsList(n))?this.model.view.convertRowColumns(t,this.builder()):window.alert(window.i18nLocale.wrong_cells_layout)},validateCellsList:function(e){var t,n,i,a=[],s=e.replace(/\s/g,"").split("+"),o=_.reduce(_.map(s,function(e){if(e.match(/^[vc\_]{0,1}span\d{1,2}$/)){var s=vc_convert_column_span_size(e);return!1===s?1e3:(t=s.split(/\//),a.push(t[0]+""+t[1]),12*parseInt(t[0],10)/parseInt(t[1],10))}return e.match(/^[1-9]|1[0-2]\/[1-9]|1[0-2]$/)?(t=e.split(/\//),n=parseInt(t[0],10),i=parseInt(t[1],10),0!==12%i||n>i?1e3:(a.push(n+""+t[1]),12*n/i)):1e3}),function(e,t){return t+=e},0);return o>=1e3?!1:a.join("_")}}),vc.RowLayoutEditorPanelViewBackend=vc.RowLayoutEditorPanelView.extend({builder:function(){return this.builder||(this.builder=vc.storage),this.builder},isBuildComplete:function(){return!0},setLayout:function(t){t&&t.preventDefault();var n=e(t.currentTarget),i=n.attr("data-cells"),a=this.model.view.convertRowColumns(i);this.$input.val(a.join(" + "))}}),e(window).on("orientationchange",function(){vc.active_panel&&vc.active_panel.$el.css({top:"",left:"auto",height:"auto",width:"auto"})}),e(window).bind("resize.fixElContainment",function(){vc.active_panel&&vc.active_panel.fixElContainment&&vc.active_panel.fixElContainment()}),e("body").on("keyup change input","[data-vc-disable-empty]",function(){var t=e(this),n=e(t.data("vcDisableEmpty"));t.val().length?n.removeProp("disabled"):n.prop("disabled",!0)})}(window.jQuery),+function(e){"use strict";var t,n,i;t=function(t,n){var i=this;this.options=n,this.$element=e(t),this.$dropdownContainer=this.$element.find(this.options.dropdownContainerSelector),this.$dropdown=this.$dropdownContainer.find(this.options.dropdownSelector),this.options.delayInit?(i.$element.addClass(this.options.initializingClass),setTimeout(function(){i.options.autoRefresh||i.refresh(),i.moveTabs(),i.$element.removeClass(i.options.initializingClass)},i.options.delayInitTime)):(this.options.autoRefresh||this.refresh(),this.moveTabs()),e(window).on("resize",e.proxy(this.moveTabs,this)),this.$dropdownContainer.on("click.vc.tabsLine",e.proxy(this.checkDropdownContainerActive,this))},t.DEFAULTS={initializingClass:"vc_initializing",delayInit:!1,delayInitTime:1e3,activeClass:"vc_active",visibleClass:"vc_visible",dropdownContainerSelector:'[data-vc-ui-element="panel-tabs-line-toggle"]',dropdownSelector:'[data-vc-ui-element="panel-tabs-line-dropdown"]',tabSelector:'>li:not([data-vc-ui-element="panel-tabs-line-toggle"])',dropdownTabSelector:"li",freeSpaceOffset:5,autoRefresh:!1,showDevInfo:!1},t.prototype.refresh=function(){var t,n=this;return n.tabs=[],n.dropdownTabs=[],n.$element.find(n.options.tabSelector).each(function(){n.tabs.push({$tab:e(this),width:e(this).outerWidth()})}),n.$dropdown.find(n.options.dropdownTabSelector).each(function(){var t=e(this).clone().css({visibility:"hidden",position:"fixed"});t.appendTo(n.$element),n.dropdownTabs.push({$tab:e(this),width:t.outerWidth()}),t.remove(),e(this).on("click",n.options.onTabClick)}),"function"==typeof this.options.onTabClick&&(t=function(t){"undefined"==typeof t.$tab.data("tabClickSet")&&(t.$tab.on("click",e.proxy(n.options.onTabClick,t.$tab)),t.$tab.data("tabClickSet",!0))},n.tabs.map(t),n.dropdownTabs.map(t)),this},t.prototype.moveLastToDropdown=function(){var e;return this.tabs.length&&(e=this.tabs.pop(),e.$tab.prependTo(this.$dropdown),this.dropdownTabs.unshift(e)),this.checkDropdownContainer(),this},t.prototype.moveFirstToContainer=function(){var e;return this.dropdownTabs.length&&(e=this.dropdownTabs.shift(),e.$tab.appendTo(this.$element),this.tabs.push(e)),this.checkDropdownContainer(),this},t.prototype.getTabsWidth=function(){var e=0;return this.tabs.forEach(function(t){e+=t.width}),e},t.prototype.isDropdownContainerVisible=function(){return this.$dropdownContainer.hasClass(this.options.visibleClass)},t.prototype.getFreeSpace=function(){var e=this.$element.width()-this.getTabsWidth()-this.options.freeSpaceOffset;return this.isDropdownContainerVisible()&&(e-=this.$dropdownContainer.outerWidth(),1===this.dropdownTabs.length&&0<=e-this.dropdownTabs[0].width+this.$dropdownContainer.outerWidth()&&(e+=this.$dropdownContainer.outerWidth())),e},t.prototype.moveTabsToDropdown=function(){for(var e=this.tabs.length,t=e-1;t>=0;t--){if(!(0>this.getFreeSpace()))return this;this.moveLastToDropdown()}return this},t.prototype.moveDropdownToTabs=function(){for(var e=this.dropdownTabs.length,t=0;e>t;t++){if(!(0<=this.getFreeSpace()-this.dropdownTabs[0].width))return this;this.moveFirstToContainer()}return this},t.prototype.showDropdownContainer=function(){return this.$dropdownContainer.addClass(this.options.visibleClass),this},t.prototype.hideDropdownContainer=function(){return this.$dropdownContainer.removeClass(this.options.visibleClass),this},t.prototype.activateDropdownContainer=function(){return this.$dropdownContainer.addClass(this.options.activeClass),this},t.prototype.deactivateDropdownContainer=function(){return this.$dropdownContainer.removeClass(this.options.activeClass),this},t.prototype.checkDropdownContainerActive=function(){return this.$dropdown.find("."+this.options.activeClass+":first").length?this.activateDropdownContainer():this.deactivateDropdownContainer(),this},t.prototype.checkDropdownContainer=function(){return this.dropdownTabs.length?this.showDropdownContainer():this.hideDropdownContainer(),this.checkDropdownContainerActive(),this},t.prototype.moveTabs=function(){return this.options.autoRefresh&&this.refresh(),this.checkDropdownContainer(),this.moveTabsToDropdown(),this.moveDropdownToTabs(),this.options.showDevInfo&&this.showDevInfo(),this},t.prototype.showDevInfo=function(){var t=e("#vc-ui-tabs-line-dev-info");t.length&&(this.$devBlock=t),"undefined"==typeof this.$devBlock&&(this.$devBlock=e('<div id="vc-ui-tabs-line-dev-info" />').css({position:"fixed",right:"40px",top:"40px",padding:"7px 12px",border:"1px solid rgba(0, 0, 0, .2)",background:"rgba(0, 0, 0, .7)",color:"#0a0","border-radius":"5px","font-family":"tahoma","font-size":"12px","z-index":1100}),this.$devBlock.appendTo("body")),"undefined"==typeof this.$devInfo&&(this.$devInfo=e("<div />").css({"margin-bottom":"7px","padding-bottom":"7px","border-bottom":"1px dashed rgba(0, 200, 0, .35)"}),this.$devInfo.appendTo(this.$devBlock)),this.$devInfo.empty(),this.$devInfo.append(e("<div />").text("Tabs count: "+this.tabs.length)),this.$devInfo.append(e("<div />").text("Dropdown count: "+this.dropdownTabs.length)),this.$devInfo.append(e("<div />").text("El width: "+this.$element.width())),this.$devInfo.append(e("<div />").text("Tabs width: "+this.getTabsWidth())),this.$devInfo.append(e("<div />").text("Tabs width with dots: "+(this.getTabsWidth()+this.$dropdownContainer.outerWidth()))),this.$devInfo.append(e("<div />").text("Free space: "+this.getFreeSpace())),this.tabs.length&&this.$devInfo.append(e("<div />").text("Last tab width: "+this.tabs[this.tabs.length-1].width)),this.dropdownTabs.length&&this.$devInfo.append(e("<div />").text("First dropdown tab width: "+this.dropdownTabs[0].width));
},n=function(n){return this.each(function(){var i=e(this),a=i.data("vcUiTabsLine"),s=i.data("vc.tabsLine"),o=e.extend(!0,{},t.DEFAULTS,i.data(),a,"object"==typeof n&&n),c="string"==typeof n?n:o.action;s||i.data("vc.tabsLine",s=new t(this,o)),c&&s[c]()})},i=e.fn.vcTabsLine,e.fn.vcTabsLine=n,e.fn.vcTabsLine.Constructor=t,e.fn.vcTabsLine.noConflict=function(){return e.fn.vcTabsLine=i,this},e(window).on("load",function(){e("[data-vc-ui-tabs-line]").each(function(){var t=e(this);n.call(t,t.data())})})}(window.jQuery),function(e){"use strict";vc.HelperPanelViewDraggable={draggable:!0,draggableOptions:{iframeFix:!0,handle:'[data-vc-ui-element="panel-heading"]'},uiEvents:{show:"initDraggable"},initDraggable:function(){this.$el.draggable(_.extend({},this.draggableOptions,{start:this.fixElContainment,stop:this.fixElContainment}))}}}(window.jQuery),function(e){"use strict";vc.HelperPanelViewResizable={sizeInitialized:!1,uiEvents:{show:"setSavedSize initResize",tabChange:"setDefaultHeightSettings",afterMinimize:"setupOnMinimize",afterUnminimize:"initResize",fixElContainment:"saveUIPanelSizes"},setDefaultHeightSettings:function(){this.$el.css("height","auto"),this.$el.css("maxHeight","75vh")},initResize:function(){var t=this;this.$el.data("uiResizable")&&this.$el.resizable("destroy"),this.$el.resizable({minHeight:240,minWidth:380,resize:function(){t.trigger("resize")},handles:"n, e, s, w, ne, se, sw, nw",start:function(n,i){t.trigger("beforeResizeStart"),t.$el.css("maxHeight","none"),t.$el.css("height",i.size.height),e("iframe").css("pointerEvents","none"),t.trigger("afterResizeStart")},stop:function(){t.trigger("beforeResizeStop"),e("iframe").css("pointerEvents",""),t.saveUIPanelSizes(),t.trigger("afterResizeStop")}}),this.content().addClass("vc_properties-list-init"),this.trigger("resize")},setSavedSize:function(){if(this.setDefaultHeightSettings(),vc.is_mobile)return!1;var e={width:getUserSetting(this.panelName+"_vcUIPanelWidth"),left:getUserSetting(this.panelName+"_vcUIPanelLeft").replace("minus","-"),top:getUserSetting(this.panelName+"_vcUIPanelTop").replace("minus","-")};_.isEmpty(e.width)||this.$el.width(e.width),_.isEmpty(e.left)||this.$el.css("left",e.left),_.isEmpty(e.top)||this.$el.css("top",e.top),this.sizeInitialized=!0},saveUIPanelSizes:function(){if(!1===this.sizeInitialized)return!1;var e={width:this.$el.width(),left:parseInt(this.$el.css("left"),10),top:parseInt(this.$el.css("top"),10)};setUserSetting(this.panelName+"_vcUIPanelWidth",e.width),setUserSetting(this.panelName+"_vcUIPanelLeft",e.left.toString().replace("-","minus")+"px"),setUserSetting(this.panelName+"_vcUIPanelTop",e.top.toString().replace("-","minus")+"px")},setupOnMinimize:function(){this.$el.data("uiResizable")&&this.$el.resizable("destroy"),this.$el.resizable({minWidth:380,handles:"w, e",start:function(t){e("iframe").css("pointerEvents","none")},stop:function(){e("iframe").css("pointerEvents","")}})}}}(window.jQuery),function(e){"use strict";vc.HelperTemplatesPanelViewSearch={searchSelector:"[data-vc-templates-name-filter]",events:{"keyup [data-vc-templates-name-filter]":"searchTemplate","search [data-vc-templates-name-filter]":"searchTemplate"},uiEvents:{show:"focusToSearch"},focusToSearch:function(){vc.is_mobile||e(this.searchSelector,this.$el).focus()},searchTemplate:function(t){var n=e(t.currentTarget);n.val().length?this.searchByName(n.val()):this.clearSearch()},clearSearch:function(){this.$el.find("[data-vc-templates-name-filter]").val(""),this.$el.find("[data-template_name]").css("display","block"),this.$el.removeAttr("data-vc-template-search"),this.$el.find(".vc-search-result-empty").removeClass("vc-search-result-empty");var e=new jQuery.Event("click");e.isClearSearch=!0,this.$el.find('.vc_panel-tabs-control:first [data-vc-ui-element="panel-tab-control"]').trigger(e)},searchByName:function(t){this.$el.find(".vc_panel-tabs-control.vc_active").removeClass("vc_active"),this.$el.attr("data-vc-template-search","true"),this.$el.find("[data-template_name]").css("display","none"),this.$el.find('[data-template_name*="'+vc_slugify(t)+'"]').css("display","block"),this.$el.find('[data-vc-ui-element="panel-edit-element-tab"]').each(function(){var t=e(this);t.removeClass("vc-search-result-empty"),t.find("[data-template_name]:visible").length||t.addClass("vc-search-result-empty")})}}}(window.jQuery),function(e){"use strict";vc.HelperPanelViewHeaderFooter={buttonMessageTimeout:!1,events:{'click [data-vc-ui-element="button-save"]':"save",'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity"},uiEvents:{save:"setButtonMessage",render:"clearButtonMessage"},resetMinimize:function(){this.$el.removeClass("vc_panel-opacity"),this.$el.removeClass("vc_minimized")},toggleOpacity:function(t){t.preventDefault();var n="vc_animating",i="vc_minimized",a=this,s=this.$el,o=s.find(s.data("vcPanel")),c=o.closest(o.data("vcPanelContainer")),r=400,l=e(t.currentTarget);"undefined"==typeof s.data("vcHasHeight")&&s.data("vcHasHeight",function(t,n){var i=t.attr("style"),a=!1;return i&&i.split(";").forEach(function(t){var i=t.split(":");e.trim(i[0])===n&&(a=!0)}),a}(s,"height")),s.hasClass(i)?("undefined"==typeof s.data("vcMinimizeHeight")&&s.data("vcMinimizeHeight",e(window).height()-.2*e(window).height()),s.animate({height:s.data("vcMinimizeHeight")},{duration:r,start:function(){l.prop("disabled",!0),s.addClass(n),a.tabsMenu&&a.tabsMenu()&&a.tabsMenu().vcTabsLine("moveTabs")},complete:function(){s.removeClass(i),s.removeClass(n),s.data("vcHasHeight")||s.css({height:""}),a.trigger("afterUnminimize"),l.prop("disabled",!1)}})):(s.data("vcMinimizeHeight",s.height()),s.animate({height:o.outerHeight()+c.outerHeight()-c.height()},{duration:r,start:function(){l.prop("disabled",!0),s.addClass(n)},complete:function(){s.addClass(i),s.removeClass(n),s.css({height:""}),a.trigger("afterMinimize"),l.prop("disabled",!1)}}))},setButtonMessage:function(e,t,n){var i,a;return"undefined"==typeof n&&(n=!1),this.clearButtonMessage=_.bind(this.clearButtonMessage,this),!n&&!vc.frame_window||this.buttonMessageTimeout?this:("undefined"==typeof e&&(e=window.i18nLocale.ui_saved),"undefined"==typeof t&&(t="success"),a=this.$el.find('[data-vc-ui-element="button-save"]'),i=a.html(),a.addClass("vc_ui-button-"+t+" vc_ui-button-undisabled").removeClass("vc_ui-button-action").data("vcCurrentTextHtml",i).data("vcCurrentTextType",t).html(e),_.delay(this.clearButtonMessage,5e3),this.buttonMessageTimeout=!0,this)},clearButtonMessage:function(){var e,t,n;this.buttonMessageTimeout&&(window.clearTimeout(this.buttonMessageTimeout),n=this.$el.find('[data-vc-ui-element="button-save"]'),t=n.data("vcCurrentTextHtml")||"Save",e=n.data("vcCurrentTextType"),n.html(t).removeClass("vc_ui-button-"+e+" vc_ui-button-undisabled").addClass("vc_ui-button-action"),this.buttonMessageTimeout=!1)}}}(window.jQuery),function(e){"use strict";vc.element_start_index=0,vc.AddElementUIPanelBackendEditor=vc.PanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).extend({el:"#vc_ui-panel-add-element",searchSelector:"#vc_elements_name_filter",prepend:!1,builder:"",events:{'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="panel-tab-control"]':"filterElements","click .vc_shortcode-link":"createElement","keyup #vc_elements_name_filter":"filterElements","search #vc_elements_name_filter":"filterElements"},initialize:function(){vc.AddElementUIPanelBackendEditor.__super__.initialize.call(this),vc.events.on("shortcodes:add",this.addCustomCssStyleTag.bind(this))},render:function(t,n){return _.isUndefined(vc.ShortcodesBuilder)||(this.builder=new vc.ShortcodesBuilder),this.$el.is(":hidden")&&vc.closeActivePanel(),vc.active_panel=this,this.prepend=_.isBoolean(n)?n:!1,this.place_after_id=_.isString(n)?n:!1,this.model=_.isObject(t)?t:!1,this.$content=this.$el.find('[data-vc-ui-element="panel-add-element-list"]'),this.$buttons=e('[data-vc-ui-element="add-element-button"]',this.$content),this.buildFiltering(),this.$el.find('[data-vc-ui-element="panel-tab-control"]').eq(0).click(),this.show(),this.$el.find('[data-vc-ui-element="panel-tabs-controls"]').vcTabsLine("moveTabs"),vc.is_mobile||e(this.searchSelector).focus(),vc.AddElementUIPanelBackendEditor.__super__.render.call(this)},buildFiltering:function(){var t,n,i,a,s;t='[data-vc-ui-element="add-element-button"]',n=this.model?this.model.get("shortcode"):"vc_column",i=this._getNotIn(n),e(this.searchSelector).val(""),this.$content.addClass("vc_filter-all"),this.$content.attr("data-vc-ui-filter","*"),a=n&&!_.isUndefined(vc.getMapped(n).as_parent)?vc.getMapped(n).as_parent:!1,_.isObject(a)?(s=[],_.isString(a.only)&&s.push(_.reduce(a.only.replace(/\s/,"").split(","),function(e,t){return e+(_.isEmpty(e)?"":",")+'[data-element="'+t.trim()+'"]'},"")),_.isString(a.except)&&s.push(_.reduce(a.except.replace(/\s/,"").split(","),function(e,t){return e+':not([data-element="'+t.trim()+'"])'},"")),t+=s.join(",")):i&&(t=i),!1===n||_.isUndefined(vc.getMapped(n).allowed_container_element)||(!1===vc.getMapped(n).allowed_container_element?t+=":not([data-is-container=true])":_.isString(vc.getMapped(n).allowed_container_element)&&(t+=":not([data-is-container=true]), [data-element="+vc.getMapped(n).allowed_container_element+"]")),this.$buttons.removeClass("vc_visible").addClass("vc_inappropriate"),e(t,this.$content).removeClass("vc_inappropriate").addClass("vc_visible"),this.hideEmptyFilters()},hideEmptyFilters:function(){var t=this;this.$el.find('[data-vc-ui-element="panel-add-element-tab"].vc_active').removeClass("vc_active"),this.$el.find('[data-vc-ui-element="panel-add-element-tab"]:first').addClass("vc_active"),this.$el.find("[data-filter]").each(function(){e(e(this).data("filter")+".vc_visible:not(.vc_inappropriate)",t.$content).length?e(this).parent().show():e(this).parent().hide()})},_getNotIn:_.memoize(function(e){var t;return t=_.reduce(vc.map,function(t,n){var i;return i=_.isEmpty(t)?"":",",_.isObject(n.as_child)?(_.isString(n.as_child.only)&&(_.contains(n.as_child.only.replace(/\s/,"").split(","),e)||(t+=i+"[data-element="+n.base+"]")),_.isString(n.as_child.except)&&_.contains(n.as_child.except.replace(/\s/,"").split(","),e)&&(t+=i+"[data-element="+n.base+"]")):!1===n.as_child&&(t+=i+"[data-element="+n.base+"]"),t},""),'[data-vc-ui-element="add-element-button"]:not('+t+")"}),filterElements:function(t){_.isObject(t)?t.preventDefault()&&t.stopPropagation():t=window.event;var n,i,a=e(t.currentTarget),s='[data-vc-ui-element="add-element-button"]',o=e(this.searchSelector).val();this.$content.removeClass("vc_filter-all"),e('[data-vc-ui-element="panel-add-element-tab"].vc_active').removeClass("vc_active"),a.is("[data-filter]")?(a.parent().addClass("vc_active"),n=a.data("filter"),s+=n,"*"===n?this.$content.addClass("vc_filter-all"):this.$content.removeClass("vc_filter-all"),this.$content.attr("data-vc-ui-filter",n.replace(".js-category-","")),e(this.searchSelector).val("")):o.length?(s+=":containsi('"+o+"'):not('.vc_element-deprecated')",this.$content.attr("data-vc-ui-filter","name:"+o)):o.length||(e('[data-vc-ui-element="panel-tab-control"][data-filter="*"]').parent().addClass("vc_active"),this.$content.attr("data-vc-ui-filter","*").addClass("vc_filter-all")),e(".vc_visible",this.$content).removeClass("vc_visible"),e(s,this.$content).addClass("vc_visible"),o.length&&13===(t.keyCode||t.which)&&(i=e(".vc_visible:not(.vc_inappropriate)",this.$content),1===i.length&&i.find("[data-vc-clickable]").click())},createElement:function(t){_.isObject(t)&&t.preventDefault();var n,i,a,s,o,c,r,l=e(t.currentTarget).data("tag");c={},"undefined"!=typeof window.vc_settings_presets.vc_row&&(c=_.extend(c,window.vc_settings_presets.vc_row)),r={width:"1/1"},"undefined"!=typeof window.vc_settings_presets.vc_column&&(r=_.extend(r,window.vc_settings_presets.vc_column)),!1===this.model?(vc.storage.lock(),a=vc.shortcodes.create({shortcode:"vc_row",params:c}),i=vc.shortcodes.create({shortcode:"vc_column",params:r,parent_id:a.id,root_id:a.id}),n="vc_row"!==l?vc.shortcodes.create({shortcode:l,parent_id:i.id,root_id:a.id}):a):"vc_row"===l?(c={},"undefined"!=typeof window.vc_settings_presets.vc_row_inner&&(c=_.extend(c,window.vc_settings_presets.vc_row_inner)),r={width:"1/1"},"undefined"!=typeof window.vc_settings_presets.vc_column_inner&&(r=_.extend(r,window.vc_settings_presets.vc_column_inner)),vc.storage.lock(),a=vc.shortcodes.create({shortcode:"vc_row_inner",params:c,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder()}),n=vc.shortcodes.create({shortcode:"vc_column_inner",params:r,parent_id:a.id,root_id:a.id})):n=vc.shortcodes.create({shortcode:l,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder(),root_id:this.model.get("root_id")}),this.model=n,s=!(_.isBoolean(vc.getMapped(l).show_settings_on_create)&&!1===vc.getMapped(l).show_settings_on_create),o=this.model.get("shortcode"),"undefined"!=typeof window.vc_settings_presets[o]&&this.model.save({params:_.extend({},this.model.attributes.params,window.vc_settings_presets[o])}),this.hide(),s&&this.showEditForm()},getFirstPositionIndex:function(){return vc.element_start_index-=1,vc.element_start_index},show:function(){this.$el.addClass("vc_active"),this.trigger("show")},hide:function(){this.$el.removeClass("vc_active"),vc.active_panel=!1,this.trigger("hide")},showEditForm:function(){vc.edit_element_block_view.render(this.model)},addCustomCssStyleTag:function(e){if(e&&e.getParam){var t;t=e.getParam("css"),t&&vc.frame_window&&vc.frame_window.vc_iframe.setCustomShortcodeCss(t)}}}),vc.AddElementUIPanelFrontendEditor=vc.AddElementUIPanelBackendEditor.vcExtendUI(vc.HelperPanelViewHeaderFooter).extend({events:{'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="panel-tab-control"]':"filterElements","click .vc_shortcode-link":"createElement","keyup #vc_elements_name_filter":"filterElements"},createElement:function(t){_.isObject(t)&&t.preventDefault();var n,i,a,s,o,c,r,l,d,h=e(t.currentTarget),p=h.data("tag");for(d={},"undefined"!=typeof window.vc_settings_presets.vc_row_inner&&(d=_.extend(d,window.vc_settings_presets.vc_row_inner)),l={},"undefined"!=typeof window.vc_settings_presets.vc_row&&(l=_.extend(l,window.vc_settings_presets.vc_row)),!1===this.model&&"vc_row"!==p?(r={width:"1/1"},"undefined"!=typeof window.vc_settings_presets.vc_column&&(r=_.extend(r,window.vc_settings_presets.vc_column)),this.builder.create({shortcode:"vc_row",params:l}).create({shortcode:"vc_column",parent_id:this.builder.lastID(),params:r}),this.model=this.builder.last()):!1!==this.model&&"vc_row"===p&&(p+="_inner"),i={shortcode:p,parent_id:this.model?this.model.get("id"):!1},"vc_row"===p?i.params=l:"vc_row_inner"===p&&(i.params=d),this.prepend?(i.order=0,a=vc.shortcodes.findWhere({parent_id:this.model.get("id")}),a&&(i.order=a.get("order")-1),vc.activity="prepend"):this.place_after_id&&(i.place_after_id=this.place_after_id),this.builder.create(i),o=this.builder.models.length-1;o>=0;o--)c=this.builder.models[o].get("shortcode"),"undefined"!=typeof window.vc_settings_presets[c]&&(this.builder.models[o].attributes.params=_.extend(this.builder.models[o].attributes.params,window.vc_settings_presets[c]));"vc_row"===p?(r={width:"1/1"},"undefined"!=typeof window.vc_settings_presets.vc_column&&(r=_.extend(r,window.vc_settings_presets.vc_column)),this.builder.create({shortcode:"vc_column",parent_id:this.builder.lastID(),params:r})):"vc_row_inner"===p&&(r={width:"1/1"},"undefined"!=typeof window.vc_settings_presets.vc_column_inner&&(r=_.extend(r,window.vc_settings_presets.vc_column_inner)),this.builder.create({shortcode:"vc_column_inner",parent_id:this.builder.lastID(),params:r})),_.isString(vc.getMapped(p).default_content)&&vc.getMapped(p).default_content.length&&(s=this.builder.parse({},vc.getMapped(p).default_content,this.builder.last().toJSON()),_.each(s,function(e){e.default_content=!0,this.builder.create(e)},this)),this.model=this.builder.last(),n=!(_.isBoolean(vc.getMapped(p).show_settings_on_create)&&!1===vc.getMapped(p).show_settings_on_create),this.hide(),n&&this.showEditForm(),this.builder.render()}})}(window.jQuery),function(e){"use strict";vc.EditElementUIPanel=vc.EditElementPanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).extend({el:"#vc_ui-panel-edit-element",events:{'click [data-vc-ui-element="button-save"]':"save",'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity",'click [data-vc-ui-element="panel-tab-control"]':"changeTab"},initialize:function(){vc.EditElementUIPanel.__super__.initialize.call(this),this.on("afterResizeStart",function(){this.$el.css("maxHeight","none")})},show:function(){vc.EditElementUIPanel.__super__.show.call(this),e('[data-vc-ui-element="panel-tabs-controls"]',this.$el).remove(),this.$el.css("maxHeight","75vh")},setTitle:function(){return this.$el.find('[data-vc-ui-element="panel-title"]').text(vc.getMapped(this.model.get("shortcode")).name+" "+i18nLocale.settings),this},tabsMenu:function(){if(!1===this.tabsInit){this.tabsInit=!0;var e=this.$el.find('[data-vc-ui-element="panel-tabs-controls"]');e.length&&(this.$tabsMenu=e)}return this.$tabsMenu},buildTabs:function(){var e=this.content().find('[data-vc-ui-element="panel-tabs-controls"]');e.prependTo('[data-vc-ui-element="panel-header-content"]')},changeTab:function(t){t.preventDefault();var n=e(t.currentTarget);n.parent().hasClass("vc_active")||(this.$el.find('[data-vc-ui-element="panel-tabs-controls"] .vc_active:not([data-vc-ui-element="panel-tabs-line-dropdown"])').removeClass("vc_active"),n.parent().addClass("vc_active"),this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_active').removeClass("vc_active"),this.active_tab_index=this.$el.find(n.data("vcUiElementTarget")).addClass("vc_active").index(),this.initParams(),this.$tabsMenu&&this.$tabsMenu.vcTabsLine("checkDropdownContainerActive"),this.$content.parent().scrollTop(1).scrollTop(0),this.trigger("tabChange"))},checkTabs:function(){var t=this;!1===this.tabsInit&&(this.tabsInit=!0,this.$tabsMenu=this.$el.find('[data-vc-ui-element="panel-tabs-controls"]')),this.tabsMenu()&&(this.content().find('[data-vc-ui-element="panel-edit-element-tab"]').each(function(n){var i=t.$tabsMenu.find('> [data-tab-index="'+n+'"]');e(this).find('[data-vc-ui-element="panel-shortcode-param"]:not(".vc_dependent-hidden")').length?i.hasClass("vc_dependent-hidden")&&(i.removeClass("vc_dependent-hidden"),window.setTimeout(function(){i.removeClass("vc_tab-color-animated")},200)):i.addClass("vc_dependent-hidden")}),this.$tabsMenu.vcTabsLine("refresh"),this.$tabsMenu.vcTabsLine("moveTabs"))}})}(window.jQuery),function(e){"use strict";vc.PostSettingsUIPanelFrontendEditor=vc.PostSettingsPanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).vcExtendUI({panelName:"post_settings",uiEvents:{setSize:"setEditorSize",show:"setEditorSize"},setSize:function(){this.trigger("setSize")},setDefaultHeightSettings:function(){this.$el.css("height","75vh")},setEditorSize:function(){this.editor.setSizeResizable()}}),vc.PostSettingsUIPanelBackendEditor=vc.PostSettingsPanelViewBackendEditor.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).vcExtendUI({uiEvents:{setSize:"setEditorSize",show:"setEditorSize",render:"removeChangeTitleField"},setSize:function(){this.trigger("setSize")},setEditorSize:function(){this.editor.setSizeResizable()},setDefaultHeightSettings:function(){this.$el.css("height","75vh")},removeChangeTitleField:function(){e("#vc_settings-title-container").remove()}})}(window.jQuery),function(e){"use strict";var t={'click [data-vc-ui-element="button-save"]':"save",'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity",'click [data-vc-ui-element="button-layout"]':"setLayout",'click [data-vc-ui-element="button-update-layout"]':"updateFromInput"};vc.RowLayoutUIPanelFrontendEditor=vc.RowLayoutEditorPanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewDraggable).extend({panelName:"rowLayouts",events:t}),vc.RowLayoutUIPanelBackendEditor=vc.RowLayoutEditorPanelViewBackend.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewDraggable).extend({panelName:"rowLayouts",events:t})}(window.jQuery),function(e){"use strict";vc.TemplateWindowUIPanelBackendEditor=vc.TemplatesPanelViewBackend.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperTemplatesPanelViewSearch).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).extend({panelName:"template_window",showMessageDisabled:!1,initialize:function(){vc.TemplateWindowUIPanelBackendEditor.__super__.initialize.call(this),this.trigger("show",this.initTemplatesTabs,this)},show:function(){this.clearSearch(),vc.TemplateWindowUIPanelBackendEditor.__super__.show.call(this)},initTemplatesTabs:function(){this.$el.find('[data-vc-ui-element="panel-tabs-controls"]').vcTabsLine("moveTabs")},showMessage:function(t,n){var i;if(this.showMessageDisabled)return!1;i="vc_col-xs-12 wpb_element_wrapper",this.message_box_timeout&&this.$el.find("[data-vc-panel-message]").remove()&&window.clearTimeout(this.message_box_timeout),this.message_box_timeout=!1;var a,s=vc.template('<div class="vc_message_box vc_message_box-standard vc_message_box-rounded vc_color-<%- color %>"><div class="vc_message_box-icon"><i class="fa fa fa-<%- icon %>"></i></div><p><%- text %></p></div>');switch(n){case"error":a=e('<div class="'+i+'" data-vc-panel-message>').html(s({color:"danger",icon:"times",text:t}));break;case"warning":a=e('<div class="'+i+'" data-vc-panel-message>').html(s({color:"warning",icon:"exclamation-triangle",text:t}));break;case"success":a=e('<div class="'+i+'" data-vc-panel-message>').html(s({color:"success",icon:"check",text:t}))}a.prependTo(this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_row.vc_active')),a.fadeIn(),this.message_box_timeout=window.setTimeout(function(){a.remove()},6e3)},changeTab:function(t){t.preventDefault(),t&&!t.isClearSearch&&this.clearSearch();var n=e(t.currentTarget);n.parent().hasClass("vc_active")||(this.$el.find('[data-vc-ui-element="panel-tabs-controls"] .vc_active:not([data-vc-ui-element="panel-tabs-line-dropdown"])').removeClass("vc_active"),n.parent().addClass("vc_active"),this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_active').removeClass("vc_active"),this.$el.find(n.data("vcUiElementTarget")).addClass("vc_active"),this.$tabsMenu&&this.$tabsMenu.vcTabsLine("checkDropdownContainerActive"))},setPreviewFrameHeight:function(t,n){e('data-vc-template-preview-frame="'+t+'"').height(n)}}),vc.TemplateWindowUIPanelBackendEditor.prototype.events=e.extend(!0,vc.TemplateWindowUIPanelBackendEditor.prototype.events,{'click [data-vc-ui-element="button-save"]':"save",'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity","keyup [data-vc-templates-name-filter]":"searchTemplate","search [data-vc-templates-name-filter]":"searchTemplate","click .vc_template-save-btn":"saveTemplate","click [data-template_unique_id] [data-template-handler]":"loadTemplate",'click [data-vc-container=".vc_ui-list-bar"][data-vc-preview-handler]':"buildTemplatePreview","click [data-vc-ui-delete=template-title]":"removeTemplate",'click [data-vc-ui-element="panel-tab-control"]':"changeTab"}),vc.TemplateWindowUIPanelFrontendEditor=vc.TemplatesPanelViewFrontend.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperTemplatesPanelViewSearch).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).extend({panelName:"template_window",showMessageDisabled:!1,show:function(){this.clearSearch(),vc.TemplateWindowUIPanelFrontendEditor.__super__.show.call(this)},showMessage:function(t,n){if(this.showMessageDisabled)return!1;this.message_box_timeout&&this.$el.find("[data-vc-panel-message]").remove()&&window.clearTimeout(this.message_box_timeout),this.message_box_timeout=!1;var i,a,s=vc.template('<div class="vc_message_box vc_message_box-standard vc_message_box-rounded vc_color-<%- color %>"><div class="vc_message_box-icon"><i class="fa fa fa-<%- icon %>"></i></div><p><%- text %></p></div>');switch(a="vc_col-xs-12 wpb_element_wrapper",n){case"error":i=e('<div class="'+a+'" data-vc-panel-message>').html(s({color:"danger",icon:"times",text:t}));break;case"warning":i=e('<div class="'+a+'" data-vc-panel-message>').html(s({color:"warning",icon:"exclamation-triangle",text:t}));break;case"success":i=e('<div class="'+a+'" data-vc-panel-message>').html(s({color:"success",icon:"check",text:t}))}i.prependTo(this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_row.vc_active')),i.fadeIn(),this.message_box_timeout=window.setTimeout(function(){i.remove()},6e3)},changeTab:function(t){t.preventDefault(),t&&!t.isClearSearch&&this.clearSearch();var n=e(t.currentTarget);n.parent().hasClass("vc_active")||(this.$el.find('[data-vc-ui-element="panel-tabs-controls"] .vc_active:not([data-vc-ui-element="panel-tabs-line-dropdown"])').removeClass("vc_active"),n.parent().addClass("vc_active"),this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_active').removeClass("vc_active"),this.$el.find(n.data("vcUiElementTarget")).addClass("vc_active"),this.$tabsMenu&&this.$tabsMenu.vcTabsLine("checkDropdownContainerActive"))}}),e.fn.vcAccordion.Constructor.prototype.collapseTemplate=function(){var t,n,i,a;i=this.$element;var s;if(s=0,t=this.getContainer().find("[data-vc-preview-handler]").each(function(){var t,n;n=e(this),t=n.data("vc.accordion"),"undefined"==typeof t&&(n.vcAccordion(),t=n.data("vc.accordion")),t&&t.setIndex&&t.setIndex(s++)}),n=t.filter(function(){var t,n;return t=e(this),n=t.data("vc.accordion"),n.getTarget().hasClass(n.activeClass)}),a=n.filter(function(){return i[0]!==this}),a.length&&e.fn.vcAccordion.call(a,"hide"),this.isActive())e.fn.vcAccordion.call(i,"hide");else{e.fn.vcAccordion.call(i,"show");var o=i.closest(".vc_ui-list-bar-item"),c=i.closest("[data-template_unique_id]"),r=c.closest("[data-vc-ui-element=panel-content]").parent();setTimeout(function(){if(Math.round(c.offset().top-r.offset().top)<0){var e=Math.round(c.offset().top-r.offset().top+r.scrollTop()-o.height());r.animate({scrollTop:e},400)}},400)}}}(window.jQuery),_.isUndefined(window.vc)&&(window.vc={}),"undefined"==typeof window.setCookie&&(window.setCookie=function(e,t,n){var i=new Date;i.setDate(i.getDate()+n);var a=encodeURIComponent(t)+(null===n?"":"; expires="+i.toUTCString());document.cookie=e+"="+a}),"undefined"==typeof window.getCookie&&(window.getCookie=function(e){var t,n,i,a=document.cookie.split(";");for(t=0;t<a.length;t++)if(n=a[t].substr(0,a[t].indexOf("=")),i=a[t].substr(a[t].indexOf("=")+1),n=n.replace(/^\s+|\s+$/g,""),n==e)return decodeURIComponent(i)}),function(e){e.expr[":"].containsi=function(e,t,n){return 0<=jQuery(e).text().toUpperCase().indexOf(n[3].toUpperCase())}}(window.jQuery);var vc_regexp_shortcode=_.memoize(function(){return RegExp("\\[(\\[?)(\\w+\\b)(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)")});if(vc.memoizeWrapper=function(e,t){var n={};return function(){var i=t?t.apply(this,arguments):arguments[0];return _.hasOwnProperty.call(n,i)||(n[i]=e.apply(this,arguments)),_.isObject(n[i])?jQuery.fn.extend(!0,{},n[i]):n[i]}},vc.events.on("shortcodes:vc_row:add:param:name:parallax shortcodes:vc_row:update:param:name:parallax",function(e,t){if(t){var n=e.get("params");n&&n.css&&(n.css=n.css.replace(/(background(\-position)?\s*\:\s*[\S]+(\s*[^\!\s]+)?)[\s*\!important]*/g,"$1"),e.set("params",n,{silent:!0}))}}),vc.events.on("shortcodes:vc_single_image:sync shortcodes:vc_single_image:add",function(e){var t=e.get("params");t.link&&!t.onclick&&(t.onclick="custom_link",e.save({params:t}))}),window.vcConsoleLog=function(){vcConsoleLog.history=vcConsoleLog.history||[],vcConsoleLog.history.push(arguments),this.console&&console.log(Array.prototype.slice.call(arguments))},_.isUndefined(window.vc))var vc={};window.vc.filters={templates:[]},window.vc.addTemplateFilter=function(e){_.isFunction(e)&&this.filters.templates.push(e)},function(e){function t(t,n){this.el=t,this.$el=e(this.el),this.$el_wrap="",this.$block="",this.suggester="",this.selected_items=[],this.options=_.isObject(n)?n:{},_.defaults(this.options,{css_class:"vc_suggester",limit:!1,source:{},predefined:[],locked:!1,select_callback:function(e,t){},remove_callback:function(e,t){},update_callback:function(e,t){},check_locked_callback:function(e,t){return!1}}),this.init()}function n(t,n){this.el=t,this.$el=e(this.el),this.$data_field=this.$el.find(".wpb_vc_param_value"),this.$toolbar=this.$el.find(".vc_sorted-list-toolbar"),this.$current_control=this.$el.find(".vc_sorted-list-container"),_.defaults(this.options,{}),this.init()}var i;window.init_textarea_html=function(t){var n,a,s,o;n=e("#wp-link"),n.parent().hasClass("wp-dialog")&&n.wpdialog("destroy"),a=t.attr("id"),s=t.closest(".edit_form_line"),o=s.find(".vc_textarea_html_content");try{_.isUndefined(tinyMCEPreInit.qtInit[a])&&(window.tinyMCEPreInit.qtInit[a]=_.extend({},window.tinyMCEPreInit.qtInit[window.wpActiveEditor],{id:a})),window.tinyMCEPreInit&&window.tinyMCEPreInit.mceInit[window.wpActiveEditor]&&(window.tinyMCEPreInit.mceInit[a]=_.extend({},window.tinyMCEPreInit.mceInit[window.wpActiveEditor],{resize:"vertical",height:200,id:a,setup:function(e){"undefined"!=typeof e.on?e.on("init",function(e){e.target.focus(),window.wpActiveEditor=a}):e.onInit.add(function(e){e.focus(),window.wpActiveEditor=a})}}),window.tinyMCEPreInit.mceInit[a].plugins=window.tinyMCEPreInit.mceInit[a].plugins.replace(/,?wpfullscreen/,""),window.tinyMCEPreInit.mceInit[a].wp_autoresize_on=!1),vc.edit_element_block_view&&vc.edit_element_block_view.currentModelParams?t.val(vc_wpautop(vc.edit_element_block_view.currentModelParams[o.attr("name")]||"")):t.val(o.val()),quicktags(window.tinyMCEPreInit.qtInit[a]),QTags._buttonsInit(),window.tinymce&&(window.switchEditors&&window.switchEditors.go(a,"tmce"),"4"===tinymce.majorVersion&&tinymce.execCommand("mceAddEditor",!0,a)),i=a,window.wpActiveEditor=a}catch(c){t.data("vcTinyMceDisabled",!0).appendTo(s),e("#wp-"+a+"-wrap").remove(),console&&console.error&&(console.error("VC: Tinymce error! Compatibility problem with other plugins."),console.error(c))}},Color.prototype.toString=function(){if(1>this._alpha)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var e=parseInt(this._color,10).toString(16);if(this.error)return"";if(6>e.length)for(var t=6-e.length-1;t>=0;t--)e="0"+e;return"#"+e},vc.loop_partial=function(t,n,i,a){var s=_.isObject(i)&&!_.isUndefined(i[n])?i[n]:"",o=vc.template(e("#_vcl-"+t).html(),vc.templateOptions.custom);return o({name:n,data:s,settings:a})},vc.loop_field_not_hidden=function(e,t){return!(_.isObject(t[e])&&_.isBoolean(t[e].hidden)&&!0===t[e].hidden)},vc.is_locked=function(e){return _.isObject(e)&&_.isBoolean(e.locked)&&!0===e.locked},t.prototype={constructor:t,init:function(){_.bindAll(this,"buildSource","itemSelected","labelClick","setFocus","resize"),this.$el.wrap('<ul class="'+this.options.css_class+'"><li class="input"/></ul>'),this.$el_wrap=this.$el.parent(),this.$block=this.$el_wrap.closest("ul").append(e('<li class="clear"/>')),this.$el.focus(this.resize).blur(function(){e(this).parent().width(170),e(this).val("")}),this.$block.click(this.setFocus),this.suggester=this.$el.data("suggest"),this.$el.autocomplete({source:this.buildSource,select:this.itemSelected,minLength:2,focus:function(e,t){return!1}}).data("ui-autocomplete")._renderItem=function(t,n){return e('<li data-value="'+n.value+'">').append("<a>"+n.name+"</a>").appendTo(t)},this.$el.autocomplete("widget").addClass("vc_ui-front"),
_.isArray(this.options.predefined)&&_.each(this.options.predefined,function(e){this.create(e)},this)},resize:function(){var e=this.$el_wrap.position(),t=this.$block.position();this.$el_wrap.width(parseFloat(this.$block.width())-(parseFloat(e.left)-parseFloat(t.left)+4))},setFocus:function(t){t.preventDefault();var n=e(t.target);n.hasClass(this.options.css_class)&&this.$el.trigger("focus")},itemSelected:function(e,t){return this.$el.blur(),this.create(t.item),this.$el.focus(),!1},create:function(t){var n,i,a=this.selected_items.push(t)-1,s=!0===this.options.check_locked_callback(this.$el,t)?"":' <a class="remove">&times;</a>';_.isUndefined(this.selected_items[a].action)&&(this.selected_items[a].action="+"),i="-"===this.selected_items[a].action?" exclude":" include",n=e('<li class="vc_suggest-label'+i+'" data-index="'+a+'" data-value="'+t.value+'"><span class="label">'+t.name+"</span>"+s+"</li>"),n.insertBefore(this.$el_wrap),_.isEmpty(s)||n.click(this.labelClick),this.options.select_callback(n,this.selected_items)},labelClick:function(t){t.preventDefault();var n=e(t.currentTarget),i=parseInt(n.data("index"),10),a=e(t.target);return a.is(".remove")?(delete this.selected_items[i],this.options.remove_callback(n,this.selected_items),n.remove(),!1):(this.selected_items[i].action="+"===this.selected_items[i].action?"-":"+","+"===this.selected_items[i].action?n.removeClass("exclude").addClass("include"):n.removeClass("include").addClass("exclude"),void this.options.update_callback(n,this.selected_items))},buildSource:function(t,n){this.ajax&&(this.ajax.abort(),n([]),this.ajax=!1);var i=_.filter(_.map(this.selected_items,function(e){return e?e.value:void 0})).join(",");this.ajax=e.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:{action:"wpb_get_loop_suggestion",field:this.suggester,exclude:i,query:t.term,_vcnonce:window.vcAdminNonce}}).done(function(e){n(e)})}},e.fn.suggester=function(n){return this.each(function(){var i=e(this),a=i.data("suggester");a||i.data("suggester",a=new t(this,n)),"string"==typeof n&&a[n]()})};var a=Backbone.View.extend({className:"loop_params_holder",events:{"click input, select":"save","change input, select":"save","change :checkbox[data-input]":"updateCheckbox"},query_options:{},return_array:{},controller:"",initialize:function(){_.bindAll(this,"save","updateSuggestion","suggestionLocked")},render:function(t){var n=vc.template(e("#vcl-loop-frame").html(),_.extend({},vc.templateOptions.custom,{variable:"loop"}));return this.controller=t,this.$el.html(n(this.model)),this.controller.$el.append(this.$el),_.each(e("[data-suggest]"),function(t){var n=e(t),i=window.decodeURIComponent(e("[data-suggest-prefill="+n.data("suggest")+"]").val());n.suggester({predefined:e.parseJSON(i),select_callback:this.updateSuggestion,update_callback:this.updateSuggestion,remove_callback:this.updateSuggestion,check_locked_callback:this.suggestionLocked})},this),this},show:function(){this.$el.slideDown()},save:function(e){this.return_array={},_.each(this.model,function(e,t){var e=this.getValue(t,e);_.isString(e)&&!_.isEmpty(e)&&(this.return_array[t]=e)},this),this.controller.setInputValue(this.return_array)},getValue:function(t){var n=e("[name="+t+"]",this.$el).val();return n},hide:function(){this.$el.slideUp()},toggle:function(){this.$el.is(":animated")||this.$el.slideToggle()},updateCheckbox:function(t){var n=e(t.currentTarget),i=n.data("input"),a=e("[data-name="+i+"]",this.$el),s=[];e("[data-input="+i+"]:checked").each(function(){s.push(e(this).val())}),a.val(s),this.save()},updateSuggestion:function(e,t){var n,i=e.closest("[data-block=suggestion]");n=_.reduce(t,function(e,t){return _.isEmpty(t)?"":e+(_.isEmpty(e)?"":",")+("-"===t.action?"-":"")+t.value},"").trim(),i.find("[data-suggest-value]").val(n).trigger("change")},suggestionLocked:function(e,t){var n=t.value,i=e.closest("[data-block=suggestion]").find("[data-suggest-value]").data("suggest-value");return this.controller.settings[i]&&_.isBoolean(this.controller.settings[i].locked)&&1==this.controller.settings[i].locked&&_.isString(this.controller.settings[i].value)&&0<=_.indexOf(this.controller.settings[i].value.replace("-","").split(/\,/),""+n)}}),s=Backbone.View.extend({events:{"click .vc_loop-build":"showEditor"},initialize:function(){_.bindAll(this,"createEditor"),this.$input=e(".wpb_vc_param_value",this.$el),this.$button=this.$el.find(".vc_loop-build"),this.data=this.$input.val(),this.settings=e.parseJSON(window.decodeURIComponent(this.$button.data("settings")))},render:function(){return this},showEditor:function(t){return t.preventDefault(),_.isObject(this.loop_editor_view)?(this.loop_editor_view.toggle(),!1):void e.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:{action:"wpb_get_loop_settings",value:this.data,settings:this.settings,post_id:vc.post_id,_vcnonce:window.vcAdminNonce}}).done(this.createEditor)},createEditor:function(e){this.loop_editor_view=new a({model:_.isEmpty(e)?{}:e}),this.loop_editor_view.render(this).show()},setInputValue:function(e){this.$input.val(_.map(e,function(e,t){return t+":"+e}).join("|"))}}),o=Backbone.View.extend({events:{"click .vc_options-edit":"showEditor","click .vc_close-button":"showEditor","click input, select":"save","change input, select":"save","keyup input":"save"},data:{},fields:{},initialize:function(){this.$button=this.$el.find(".vc_options-edit"),this.$form=this.$el.find(".vc_options-fields"),this.$input=this.$el.find(".wpb_vc_param_value"),this.settings=this.$form.data("settings"),this.parseData(),this.render()},render:function(){var t="";return _.each(this.settings,function(n){_.isUndefined(this.data[n.name])?_.isUndefined(n.value)||(n.value=n.value.toString().split(","),this.data[n.name]=n.value):n.value=this.data[n.name],this.fields[n.name]=n;var i=e("#vcl-options-field-"+n.type);if(i.is("script")){var a=vc.template(i.html(),vc.templateOptions.custom);t+=a(_.extend({},{name:"",label:"",value:[],options:"",description:""},n))}},this),this.$form.html(t+this.$form.html()),this},parseData:function(){_.each(this.$input.val().split("|"),function(e){if(e.match(/\:/)){var t=e.split(":"),n=t[0],i=t[1];this.data[n]=_.map(i.split(","),function(e){return window.decodeURIComponent(e)})}},this)},saveData:function(){var e=_.map(this.data,function(e,t){return t+":"+_.map(e,function(e){return window.encodeURIComponent(e)}).join(",")}).join("|");this.$input.val(e)},showEditor:function(){this.$form.slideToggle()},save:function(t){var n=e(t.currentTarget);if(n.is(":checkbox")){var i=[];this.$el.find("input[name="+n.attr("name")+"]").each(function(){this.checked&&i.push(e(this).val())}),this.data[n.attr("name")]=i}else this.data[n.attr("name")]=[n.val()];this.saveData()}});n.prototype={constructor:n,init:function(){_.bindAll(this,"controlEvent","save"),this.$toolbar.on("change","input",this.controlEvent);var e=this.$data_field.val().split(",");for(var t in e){var n=e[t].split("|"),i=n.length?this.$toolbar.find("[data-element="+decodeURIComponent(n[0])+"]"):!1;!1!==i&&i.is("input")&&(i.prop("checked",!0),this.createControl({value:i.val(),label:i.parent().text(),sub:i.data("subcontrol"),sub_value:_.map(n.slice(1),function(e){return window.decodeURIComponent(e)})}))}this.$current_control.sortable({stop:this.save}).on("change","select",this.save)},createControl:function(e){var t="",n=_.isUndefined(e.sub_value)?[]:e.sub_value;_.isArray(e.sub)&&_.each(e.sub,function(e,i){t+=" <select>",_.each(e,function(e){t+='<option value="'+e[0]+'"'+(_.isString(n[i])&&n[i]===e[0]?' selected="true"':"")+">"+e[1]+"</option>"}),t+="</select>"},this),this.$current_control.append('<li class="vc_control-'+e.value+'" data-name="'+e.value+'">'+e.label+t+"</li>")},controlEvent:function(t){var n=e(t.currentTarget);n[0].checked?this.createControl({value:n.val(),label:n.parent().text(),sub:n.data("subcontrol")}):this.$current_control.find(".vc_control-"+n.val()).remove(),this.save()},save:function(){var t=_.map(this.$current_control.find("[data-name]"),function(t){var n=encodeURIComponent(e(t).data("name"));return e(t).find("select").each(function(){var t=e(this);t.is("select")&&""!==t.val()&&(n+="|"+encodeURIComponent(t.val()))}),n}).join(",");this.$data_field.val(t)}},e.fn.VcSortedList=function(t){return this.each(function(){var i=e(this),a=i.data("vc_sorted_list");_.isObject(t)?t:{},a||i.data("vc_sorted_list",a=new n(this,t)),"string"==typeof t&&a[t]()})};var c=Backbone.View.extend({preview_el:".vc_google_fonts_form_field-preview-container > span",font_family_dropdown_el:".vc_google_fonts_form_field-font_family-container > select",font_style_dropdown_el:".vc_google_fonts_form_field-font_style-container > select",font_style_dropdown_el_container:".vc_google_fonts_form_field-font_style-container",status_el:".vc_google_fonts_form_field-status-container > span",events:{"change .vc_google_fonts_form_field-font_family-container > select":"fontFamilyDropdownChange","change .vc_google_fonts_form_field-font_style-container > select":"fontStyleDropdownChange"},initialize:function(t){_.bindAll(this,"previewElementInactive","previewElementActive","previewElementLoading"),this.$preview_el=e(this.preview_el,this.$el),this.$font_family_dropdown_el=e(this.font_family_dropdown_el,this.$el),this.$font_style_dropdown_el=e(this.font_style_dropdown_el,this.$el),this.$font_style_dropdown_el_container=e(this.font_style_dropdown_el_container,this.$el),this.$status_el=e(this.status_el,this.$el),this.fontFamilyDropdownRender()},render:function(){return this},previewElementRender:function(){return this.$preview_el.css({"font-family":this.font_family,"font-style":this.font_style,"font-weight":this.font_weight}),this},previewElementInactive:function(){this.$status_el.text(window.i18nLocale.gfonts_loading_google_font_failed||"Loading google font failed.").css("color","#FF0000")},previewElementActive:function(){this.$preview_el.text("Grumpy wizards make toxic brew for the evil Queen and Jack.").css("color","inherit"),this.fontStyleDropdownRender()},previewElementLoading:function(){this.$preview_el.text(window.i18nLocale.gfonts_loading_google_font||"Loading Font...")},fontFamilyDropdownRender:function(){return this.fontFamilyDropdownChange(),this},fontFamilyDropdownChange:function(){var e=this.$font_family_dropdown_el.find(":selected");return this.font_family_url=e.val(),this.font_family=e.attr("data[font_family]"),this.font_types=e.attr("data[font_types]"),this.$font_style_dropdown_el_container.parent().hide(),this.font_family_url&&0<this.font_family_url.length&&WebFont.load({google:{families:[this.font_family_url]},inactive:this.previewElementInactive,active:this.previewElementActive,loading:this.previewElementLoading}),this},fontStyleDropdownRender:function(){var e=this.font_types,t=e.split(","),n="",i=this.$font_family_dropdown_el.attr("default[font_style]");for(var a in t){var s=t[a].split(":"),o="";_.isString(i)&&0<i.length&&t[a]==i&&(o="selected"),n=n+"<option "+o+' value="'+t[a]+'" data[font_weight]="'+s[1]+'" data[font_style]="'+s[2]+'" class="'+s[2]+"_"+s[1]+'" >'+s[0]+"</option>"}return this.$font_style_dropdown_el.html(n),this.$font_style_dropdown_el_container.parent().show(),this.fontStyleDropdownChange(),this},fontStyleDropdownChange:function(){var e=this.$font_style_dropdown_el.find(":selected");return this.font_weight=e.attr("data[font_weight]"),this.font_style=e.attr("data[font_style]"),this.previewElementRender(),this}}),r=Backbone.View.extend({min_length:2,delay:500,auto_focus:!0,ajax_url:window.ajaxurl,source_data:function(){return{}},replace_values_on_select:!1,initialize:function(t){_.bindAll(this,"sortableChange","resize","labelRemoveHook","updateItems","sortableCreate","sortableUpdate","source","select","labelRemoveClick","createBox","focus","response","change","close","open","create","search","_renderItem","_renderMenu","_renderItemData","_resizeMenu"),t=e.extend({min_length:this.min_length,delay:this.delay,auto_focus:this.auto_focus,replace_values_on_select:this.replace_values_on_select},t),this.options=t,this.param_name=this.options.param_name,this.$el=this.options.$el,this.$el_wrap=this.$el.parent(),this.$sortable_wrapper=this.$el_wrap.parent(),this.$input_param=this.options.$param_input,this.selected_items=[],this.isMultiple=!1,this.render()},resize:function(){var e=this.$el_wrap.position(),t=this.$block.position(),n=this.$el.autocomplete("widget");n.width(parseFloat(this.$block.width())-(parseFloat(e.left)-parseFloat(t.left)+4)+11)},enableMultiple:function(){this.isMultiple=!0,this.$el.show(),this.$el.focus()},enableSortable:function(){this.sortable=this.$sortable_wrapper.sortable({items:".vc_data",axis:"y",change:this.sortableChange,create:this.sortableCreate,update:this.sortableUpdate})},updateItems:function(){this.selected_items.length?this.$input_param.val(this.getSelectedItems().join(", ")):this.$input_param.val("")},sortableChange:function(e,t){},itemsCreate:function(){var e=[];this.$block.find(".vc_data").each(function(t,n){e.push({label:n.dataset.label,value:n.dataset.value})}),this.selected_items=e},sortableCreate:function(e,t){},sortableUpdate:function(t,n){var i=this.$sortable_wrapper.sortable("toArray",{attribute:"data-index"}),a=[];_.each(i,function(e){a.push(this.selected_items[e])},this);var s=0;e("li.vc_data",this.$sortable_wrapper).each(function(){e(this).attr("data-index",s++)}),this.selected_items=a,this.updateItems()},getWidget:function(){return this.$el.autocomplete("widget")},render:function(){if(this.$el.focus(this.resize),this.data=this.$el.autocomplete({source:this.source,minLength:this.options.min_length,delay:this.options.delay,autoFocus:this.options.auto_focus,select:this.select,focus:this.focus,response:this.response,change:this.change,close:this.close,open:this.open,create:this.create,search:this.search}),this.data.data("ui-autocomplete")._renderItem=this._renderItem,this.data.data("ui-autocomplete")._renderMenu=this._renderMenu,this.data.data("ui-autocomplete")._resizeMenu=this._resizeMenu,0<this.$input_param.val().length){this.isMultiple?this.$el.focus():this.$el.hide();var t=this;e(".vc_autocomplete-label.vc_data",this.$sortable_wrapper).each(function(){t.labelRemoveHook(e(this))})}return this.getWidget().addClass("vc_ui-front").addClass("vc_ui-auotocomplete"),this.$block=this.$el_wrap.closest("ul").append(e('<li class="clear"/>')),this.itemsCreate(),this},close:function(e,t){this.selected&&this.options.no_hide&&(this.getWidget().show(),this.selected++,2<this.selected&&(this.selected=void 0))},open:function(e,t){var n=this.getWidget().menu(),i=n.position();n.css("left",i.left-6),n.css("top",i.top+2)},focus:function(e,t){return this.options.replace_values_on_select?void 0:(e.preventDefault(),!1)},create:function(e,t){},change:function(e,t){},response:function(e,t){},search:function(e,t){},select:function(t,n){if(this.selected=1,n.item){if(this.options.unique_values){var i=this.getWidget().data("uiMenu").active;if(this.options.groups){var a=i.prev(),s=i.next();a.hasClass("vc_autocomplete-group")&&!s.hasClass("vc_autocomplete-item")&&a.remove()}i.remove();var o=this;e("li.ui-menu-item",this.getWidget()).length||(o.selected=void 0)}this.createBox(n.item),this.isMultiple?this.$el.focus():this.$el.hide()}return!1},createBox:function(t){var n,i=this.selected_items.push(t)-1,a='<a class="vc_autocomplete-remove">&times;</a>';this.updateItems(),n=e('<li class="vc_autocomplete-label vc_data" data-index="'+i+'" data-value="'+t.value+'" data-label="'+t.label+'"><span class="vc_autocomplete-label"><a>'+t.label+"</a></span>"+a+"</li>"),n.insertBefore(this.$el_wrap),this.labelRemoveHook(n)},labelRemoveHook:function(e){this.$el.blur(),this.$el.val(""),e.click(this.labelRemoveClick)},labelRemoveClick:function(t,n){t.preventDefault();var i=e(t.currentTarget),a=parseInt(i.data("index"),10),s=e(t.target);return s.is(".vc_autocomplete-remove")?(delete this.selected_items[a],i.remove(),this.updateItems(),this.$el.show(),!1):void 0},getSelectedItems:function(){if(this.selected_items.length){var e=[];return _.each(this.selected_items,function(t){e.push(t.value)}),e}return!1},_renderMenu:function(t,n){var i=this,a=null;this.options.groups&&n.sort(function(e,t){return e.group>t.group}),e.each(n,function(e,n){i.options.groups&&n.group!=a&&(a=n.group,t.append("<li class='ui-autocomplete-group vc_autocomplete-group' aria-label='"+a+"'>"+a+"</li>")),i._renderItemData(t,n)})},_renderItem:function(t,n){return e('<li data-value="'+n.value+'" class="vc_autocomplete-item">').append("<a>"+n.label+"</a>").appendTo(t)},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_resizeMenu:function(){},clearValue:function(){this.selected_items=[],this.updateItems(),e(".vc_autocomplete-label.vc_data",this.$sortable_wrapper).remove()},source:function(t,n){var i=this;this.options.values&&0<this.options.values.length?n(this.options.unique_values?e.ui.autocomplete.filter(_.difference(this.options.values,this.selected_items),t.term):e.ui.autocomplete.filter(this.options.values,t.term)):e.ajax({type:"POST",dataType:"json",url:this.ajax_url,data:e.extend({action:"vc_get_autocomplete_suggestion",shortcode:vc.active_panel.model.get("shortcode"),param:this.param_name,query:t.term,_vcnonce:window.vcAdminNonce},this.source_data(t,n))}).done(function(e){n(i.options.unique_values?_.filter(e,function(e){return!_.findWhere(i.selected_items,e)}):e)})}}),l=Backbone.View.extend({$content:{},initialize:function(){_.bindAll(this,"content"),this.$content=this.$el,this.model=vc.active_panel.model},setContent:function(e){this.$content=e},content:function(){return this.$content},render:function(){var t;return t=this,e('[data-vc-ui-element="panel-shortcode-param"]',this.content()).each(function(){var n=e(this),i=n.data("param_settings");vc.atts.init.call(t,i,n)}),this}}),d=Backbone.View.extend({options:{max_items:0,sortable:!0,deletable:!0,collapsible:!0},items:0,$ul:!1,initializer:{},mappedParams:{},adminLabelParams:[],groupParamName:"",events:{"click > .edit_form_line > .vc_param_group-list > .vc_param_group-add_content":"addNew"},initialize:function(t){var n,i,a;this.$ul=this.$el.find("> .edit_form_line > .vc_param_group-list"),n=e("> .wpb_vc_row",this.$ul),this.initializer=new l({el:this.$el}),this.model=vc.active_panel.model,i=this.$ul.data("settings"),this.mappedParams={},this.adminLabelParams=[],this.options=_.defaults({},_.isObject(t.settings)?t.settings:{},i,this.options),this.groupParamName=this.options.param.param_name,_.isObject(this.options.param)&&_.isArray(this.options.param.params)&&_.each(this.options.param.params,function(e){var t;t=this.groupParamName+"_"+e.param_name,this.mappedParams[t]=e,_.isObject(e)&&!0===e.admin_label&&this.adminLabelParams.push(t)},this),this.items=0,a=this,n.length&&n.each(function(){n.data("vc-param-group-param",new h({el:e(this),parent:a})),a.items++,a.afterAdd(e(this),"init")}),this.options.sortable&&this.$ul.sortable({handle:".vc_control.column_move",items:"> .wpb_vc_row:not(vc_param_group-add_content-wrapper)",placeholder:"vc_placeholder"})},addNew:function(t){if(t.preventDefault(),this.addAllowed()){var n,i;if("undefined"!=typeof this.options.param.callbacks&&"undefined"!=typeof this.options.param.callbacks.before_add&&(i=window[this.options.param.callbacks.before_add],"function"==typeof i&&!i()))return;n=e(JSON.parse(this.$ul.next(".vc_param_group-template").html())),n.removeClass("vc_param_group-add_content-wrapper"),n.insertBefore(t.currentTarget),n.show(),this.initializer.setContent(n.find("> .wpb_element_wrapper")),this.initializer.render(),this.items++,n.data("vc-param-group-param",new h({el:n,parent:this})),this.afterAdd(n,"new"),vc.events.trigger("vc-param-group-add-new",t,n,this)}},addAllowed:function(){return 0<this.options.max_items&&this.items+1<=this.options.max_items||0>=this.options.max_items},afterAdd:function(e,t){var n;this.addAllowed()||(this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_clone").hide(),this.$ul.find("> .vc_param_group-add_content").hide()),this.options.sortable||this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_control.column_move").hide(),this.options.deletable||this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_delete").hide(),this.options.collapsible||this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_toggle").hide(),"undefined"!=typeof this.options.param.callbacks&&"undefined"!=typeof this.options.param.callbacks.after_add&&(n=window[this.options.param.callbacks.after_add],"function"==typeof n&&n(e,t))},afterDelete:function(){var e;this.addAllowed()&&(this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_clone").show(),this.$ul.find("> .vc_param_group-add_content").show()),"undefined"!=typeof this.options.param.callbacks&&"undefined"!=typeof this.options.param.callbacks.after_delete&&(e=window[this.options.param.callbacks.after_delete],"function"==typeof e&&e())}}),h=Backbone.View.extend({dependentElements:!1,mappedParams:!1,groupParamName:"",adminLabelParams:[],events:{"click > .vc_controls > .vc_row_edit_clone_delete > .vc_control.column_toggle":"toggle","click > .vc_controls > .vc_row_edit_clone_delete > .vc_control.column_delete":"deleteParam","click > .vc_controls > .vc_row_edit_clone_delete > .vc_control.column_clone":"clone"},initialize:function(e){this.options=e,this.$content=this.options.parent.$ul,this.model=vc.active_panel.model,this.mappedParams=this.options.parent.mappedParams,this.groupParamName=this.options.parent.groupParamName,this.adminLabelParams=this.options.parent.adminLabelParams,this.dependentElements={},_.bindAll(this,"hookDependent"),this.initializeDependency(),_.bindAll(this,"hookAdminLabel"),this.initializeAdminLabels()},initializeAdminLabels:function(){var t,n,i;for(i=this.hookAdminLabel,t=0;t<this.adminLabelParams.length;t++)n=e("[name="+this.adminLabelParams[t]+"].wpb_vc_param_value",this.$el),n.each(function(){var t=e(this);t.data("vc_admin_labels")||(t.data("vc_admin_labels",!0),t.bind("keyup change",i),i({currentTarget:this}))})},hookAdminLabel:function(t){var n,i,a,s,o,c,r,l,d;for(o="",c="",r=[],l=e(t.currentTarget),d=l.closest(".vc_param_group-wrapper"),i=l.closest(".vc_param").find(".vc_param-group-admin-labels"),n=0;n<this.adminLabelParams.length;n++){var h;a=this.adminLabelParams[n],l=d.find("[name="+a+"]"),h=l.closest('[data-vc-ui-element="panel-shortcode-param"]'),"undefined"!=typeof this.mappedParams[a]&&(o=this.mappedParams[a].heading),c=l.is("select")?l.find("option:selected").text():l.is("input:checkbox")?l[0].checked?l.val():"":l.val(),s={type:h.data("param_type"),param_name:h.data("param_name")},_.isObject(vc.atts[s.type])&&_.isFunction(vc.atts[s.type].render)&&(c=vc.atts[s.type].render.call(this,s,c)),""!==c&&r.push("<label>"+o+"</label>: "+c)}i.html(r.join(", ")).toggleClass("vc_hidden-label",!r.length)},initializeDependency:function(){var t;t={},_.each(this.mappedParams,function(n,i){if(_.isObject(n)&&_.isObject(n.dependency)&&_.isString(n.dependency.element)){var a,s;a=e("[name="+this.groupParamName+"_"+n.dependency.element+"].wpb_vc_param_value",this.$el),s=e("[name="+i+"].wpb_vc_param_value",this.$el),s.length&&_.each(a,function(i){var a;a=e(i);var o,c;o=a.attr("name"),c=n.dependency,_.isArray(this.dependentElements[o])||(this.dependentElements[o]=[]),this.dependentElements[o].push(s),a.data("dependentSet")||(a.attr("data-dependent-set","true"),a.bind("keyup change",this.hookDependent)),t[o]||(t[o]=a),_.isString(c.callback)&&window[c.callback].call(this)},this)}},this),_.each(t,function(e){this.hookDependent({currentTarget:e})},this)},hookDependent:function(t){var n,i,a,s,o;return n=e(t.currentTarget),i=n.closest(".vc_column"),s=this.dependentElements[n.attr("name")],o=n.is(":checkbox")?_.map(this.$el.find("[name="+n.attr("name")+"].wpb_vc_param_value:checked"),function(t){return e(t).val()}):n.val(),a=n.is(":checkbox")?!this.$el.find("[name="+n.attr("name")+"].wpb_vc_param_value:checked").length:!o.length,i.hasClass("vc_dependent-hidden")?_.each(s,function(t){var n=e.Event("change");n.extra_type="vcHookDependedParamGroup",t.closest(".vc_column").addClass("vc_dependent-hidden"),t.trigger(n)}):_.each(s,function(t){var n,i,s,c;i=t.attr("name"),s=_.isObject(this.mappedParams[i])&&_.isObject(this.mappedParams[i].dependency)?this.mappedParams[i].dependency:{},c=t.closest(".vc_column"),_.isBoolean(s.not_empty)&&!0===s.not_empty&&!a?c.removeClass("vc_dependent-hidden"):_.isBoolean(s.is_empty)&&!0===s.is_empty&&a?c.removeClass("vc_dependent-hidden"):s.value&&_.intersection(_.isArray(s.value)?s.value:[s.value],_.isArray(o)?o:[o]).length?c.removeClass("vc_dependent-hidden"):s.value_not_equal_to&&!_.intersection(_.isArray(s.value_not_equal_to)?s.value_not_equal_to:[s.value_not_equal_to],_.isArray(o)?o:[o]).length?c.removeClass("vc_dependent-hidden"):c.addClass("vc_dependent-hidden"),n=e.Event("change"),n.extra_type="vcHookDependedParamGroup",t.trigger(n)},this),this},deleteParam:function(e){_.isObject(e)&&e.preventDefault&&e.preventDefault();var t=confirm(window.i18nLocale.press_ok_to_delete_section);!0===t&&(this.options.parent.items--,this.options.parent.afterDelete(),this.$el.remove(),this.unbind(),this.remove())},content:function(){return this.$content},clone:function(t){if(t.preventDefault(),this.options.parent.addAllowed()){var n=this.options.parent.$ul.data("settings"),i=this.$content;this.$content=this.$el;var a=vc.atts.param_group.parseOne.call(this,n);e.ajax({type:"POST",url:window.ajaxurl,data:{action:"vc_param_group_clone",param:encodeURIComponent(JSON.stringify(n)),shortcode:vc.active_panel.model.get("shortcode"),value:a,vc_inline:!0,_vcnonce:window.vcAdminNonce},dataType:"html",context:this}).done(function(t){var n;n=e(t),n.insertAfter(this.$el),this.$content=i,this.options.parent.initializer.$content=e("> .wpb_element_wrapper",n),this.options.parent.initializer.render(),n.data("vc-param-group-param",new h({el:n,parent:this.options.parent})),this.options.parent.items++,this.options.parent.afterAdd(n,"clone")})}},toggle:function(e){e.preventDefault();var t=this.$el,n=t.find("> .wpb_element_wrapper");n.slideToggle(),t.toggleClass("vc_param_group-collapsed").siblings(":not(.vc_param_group-collapsed)").addClass("vc_param_group-collapsed").find("> .wpb_element_wrapper").slideUp()}});window.i18nLocale,vc.edit_form_callbacks=[],vc.atts={parse:function(e){var t,n,i,a;if(a=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]"),i=a.closest('[data-vc-ui-element="panel-shortcode-param"]'),_.isUndefined(vc.atts[e.type])||_.isUndefined(vc.atts[e.type].parse)?t=a.length?a.val():null:i.data("vcInitParam")?t=vc.atts[e.type].parse.call(this,e):(n=this.model.get("params"),t=_.isUndefined(n[e.param_name])?a.length?a.val():null:n[e.param_name]),"undefined"!=typeof a.data("js-function")&&"undefined"!=typeof window[a.data("js-function")]){var s=window[a.data("js-function")];s(this.$el,this,e)}return t},parseFrame:function(e){return vc.atts.parse.call(this,e)},init:function(e,t){_.isUndefined(vc.atts[e.type])||_.isUndefined(vc.atts[e.type].init)||vc.atts[e.type].init.call(this,e,t)}},vc.atts.textarea_html={parse:function(e){var t=this.window(),n=this.content().find(".textarea_html."+e.param_name);try{t.tinyMCE&&_.isArray(t.tinyMCE.editors)&&_.each(t.tinyMCE.editors,function(e){"wpb_tinymce_content"===e.id&&e.save()})}catch(i){console&&console.error&&console.error(i)}return n.val()},render:function(e,t){return _.isUndefined(t)?t:vc_wpautop(t)}},vc.atts.textarea_safe={parse:function(e){var t=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]"),n=t.val();return n.match(/"|(http)/)?"#E-8_"+base64_encode(rawurlencode(n)):n},render:function(t,n){return n&&n.match(/^#E\-8_/)?e("<div/>").text(rawurldecode(base64_decode(n.replace(/^#E\-8_/,"")))).html():n}},vc.atts.checkbox={parse:function(t){var n,i;return n=[],i="",e("input[name="+t.param_name+"]",this.content()).each(function(){var t;t=e(this),this.checked&&n.push(t.attr("value"))}),0<n.length&&(i=n.join(",")),i},defaults:function(e){return""}},vc.atts.el_id={clone:function(e,t,n){var i;i=e.get("params"),_.isUndefined(n)||_.isUndefined(n.settings)||_.isUndefined(n.settings.auto_generate)||!0!==n.settings.auto_generate?i[n.param_name]="":i[n.param_name]=Date.now()+"-"+vc_guid(),e.set({params:i},{silent:!0})},create:function(e,t,n){if(e.get("cloned"))return vc.atts.el_id.clone(e,t,n);if(_.isEmpty(t)&&!_.isUndefined(n)&&!_.isUndefined(n.settings)&&!_.isUndefined(n.settings.auto_generate)&&1==n.settings.auto_generate){var i;i=e.get("params"),i[n.param_name]=Date.now()+"-"+vc_guid(),e.set({params:i},{silent:!0})}}},vc.events.on("shortcodes:add:param:type:el_id",vc.atts.el_id.create),vc.atts.posttypes={parse:function(t){var n=[],i="";return e("input[name="+t.param_name+"]",this.content()).each(function(){var t=e(this);this.checked&&n.push(t.attr("value"))}),0<n.length&&(i=n.join(",")),i}},vc.atts.taxonomies={parse:function(t){var n=[],i="";return e("input[name="+t.param_name+"]",this.content()).each(function(){var t=e(this);this.checked&&n.push(t.attr("value"))}),0<n.length&&(i=n.join(",")),i}},vc.atts.exploded_textarea={parse:function(e){var t=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]");return t.val().replace(/\n/g,",")}},vc.atts.exploded_textarea_safe={parse:function(e){var t,n;return t=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]"),n=t.val(),n=n.replace(/\n/g,","),n.match(/"|(http)/)?"#E-8_"+base64_encode(rawurlencode(n)):n},render:function(t,n){return n&&n.match(/^#E\-8_/)?e("<div/>").text(rawurldecode(base64_decode(n.replace(/^#E\-8_/,"")))).html():n}},vc.atts.textarea_raw_html={parse:function(e){var t=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]"),n=t.val();return base64_encode(rawurlencode(n))},render:function(t,n){return n?e("<div/>").text(rawurldecode(base64_decode(n.trim()))).html():""}},vc.atts.dropdown={render:function(e,t){return t},init:function(t,n){e(".wpb_vc_param_value.dropdown",n).change(function(){var t=e(this),n=t.find(":selected"),i=t.data("option"),a=n.length?n.attr("class").replace(/\s/g,"_"):"";a=a.replace("#","hash-"),"undefined"!=typeof i&&t.removeClass(i),"undefined"!=typeof a&&t.data("option",a)&&t.addClass(a)})},defaults:function(e){var t;return _.isArray(e.value)||_.isString(e.value)?_.isArray(e.value)?(t=e.value[0],_.isArray(t)&&t.length?t[0]:t):"":(t=_.values(e.value)[0],t.label?t.value:t)}},vc.atts.attach_images={parse:function(t){var n=this.content().find(".wpb_vc_param_value[name="+t.param_name+"]"),i="";return n.parent().find("li.added").each(function(){i+='<li><img src="'+e(this).find("img").attr("src")+'" alt=""></li>'}),e("[data-model-id="+this.model.id+"]").data("field-"+t.param_name+"-attach-images",i),n.length?n.val():null},render:function(t,n){var i=this.$el.find(".attachment-thumbnails[data-name="+t.param_name+"]");return"external_link"===this.model.getParam("source")&&(n=this.model.getParam("custom_srcs")),_.isEmpty(n)?(this.$el.removeData("field-"+t.param_name+"-attach-images"),vc.atts.attach_images.updateImages(i,"")):e.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_gallery_html",content:n,_vcnonce:window.vcAdminNonce},dataType:"html",context:this}).done(function(e){vc.atts.attach_images.updateImages(i,e)}),n},updateImages:function(e,t){e.html(t),t.length?e.removeClass("image-exists").next().addClass("image-exists"):e.addClass("image-exists").next().removeClass("image-exists")}},vc.atts.href={parse:function(e){var t=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]"),n="";return t.length&&"http://"!==t.val()&&(n=t.val()),n}},vc.atts.attach_image={parse:function(t){var n=this.content().find(".wpb_vc_param_value[name="+t.param_name+"]"),i="";return n.parent().find("li.added").length&&(i=n.parent().find("li.added img").attr("src")),e("[data-model-id="+this.model.id+"]").data("field-"+t.param_name+"-attach-image",i),
n.length?n.val():null},render:function(t,n){var i=e("[data-model-id="+this.model.id+"]"),a=i.data("field-"+t.param_name+"-attach-image"),s=this.$el.find(".attachment-thumbnail[data-name="+t.param_name+"]"),o=e("#post_ID"),c=o.length?o.val():0;if("image"===t.param_name)switch(this.model.getParam("source")){case"external_link":vc.atts.attach_image.updateImage(s,this.model.getParam("custom_src"));break;default:_.isEmpty(n)&&"featured_image"!==this.model.getParam("source")?_.isUndefined(a)||(i.removeData("field-"+t.param_name+"-attach-image"),vc.atts.attach_image.updateImage(s,a)):e.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_single_image_src",content:n,params:this.model.get("params"),post_id:c,_vcnonce:window.vcAdminNonce},dataType:"html",context:this}).done(function(e){var t=e.length||"featured_image"===this.model.getParam("source");vc.atts.attach_image.updateImage(s,e,t)})}return n},updateImage:function(e,t,n){e.length&&("undefined"==typeof n&&(n=!1),n||!_.isEmpty(t)?(e.attr("src",t),_.isEmpty(t)?(e.hide(),e.next().removeClass("image-exists").next().addClass("image-exists")):(e.show(),e.next().addClass("image-exists").next().addClass("image-exists"))):e.attr("src","").hide().next().removeClass("image-exists").next().removeClass("image-exists"))}},vc.atts.google_fonts={parse:function(t){var n,i,a=this.content().find(".wpb_vc_param_value[name="+t.param_name+"]"),s=a.parent(),o={};return o.font_family=s.find(".vc_google_fonts_form_field-font_family-select > option:selected").val(),o.font_style=s.find(".vc_google_fonts_form_field-font_style-select > option:selected").val(),n=_.map(o,function(e,t){return _.isString(e)&&0<e.length?t+":"+encodeURIComponent(e):void 0}),i=e.grep(n,function(e){return _.isString(e)&&0<e.length}).join("|")},init:function(e,t){var n=t;n.length&&("undefined"!=typeof WebFont?t.data("vc-param-object",new c({el:n})):n.find("> .edit_form_line").html(window.i18nLocale.gfonts_unable_to_load_google_fonts||"Unable to load Google Fonts"))}},vc.atts.font_container={parse:function(t){var n,i,a=this.content().find(".wpb_vc_param_value[name="+t.param_name+"]"),s=a.parent(),o={};return o.tag=s.find(".vc_font_container_form_field-tag-select > option:selected").val(),o.font_size=s.find(".vc_font_container_form_field-font_size-input").val(),o.text_align=s.find(".vc_font_container_form_field-text_align-select > option:selected").val(),o.font_family=s.find(".vc_font_container_form_field-font_family-select > option:selected").val(),o.color=s.find(".vc_font_container_form_field-color-input").val(),o.line_height=s.find(".vc_font_container_form_field-line_height-input").val(),o.font_style_italic=s.find(".vc_font_container_form_field-font_style-checkbox.italic").prop("checked")?"1":"",o.font_style_bold=s.find(".vc_font_container_form_field-font_style-checkbox.bold").prop("checked")?"1":"",n=_.map(o,function(e,t){return _.isString(e)&&0<e.length?t+":"+encodeURIComponent(e):void 0}),i=e.grep(n,function(e){return _.isString(e)&&0<e.length}).join("|")},init:function(e,t){vc.atts.colorpicker.init.call(this,e,t)}},vc.atts.param_group={parse:function(t){var n,i,a,s;return i=this.content(),a=i.find('.wpb_el_type_param_group[data-vc-ui-element="panel-shortcode-param"][data-vc-shortcode-param-name="'+t.param_name+'"]'),s=a.find("> .edit_form_line > .vc_param_group-list"),n=vc.atts.param_group.extractValues.call(this,t,e('>.wpb_vc_row:not(".vc_param_group-add_content-wrapper")',s)),this.$content=i,encodeURIComponent(JSON.stringify(n))},extractValues:function(t,n){var i,a;return i=[],a=this,n.each(function(){var n;n={},a.$content=e(this),_.each(t.params,function(i){var s,o,c;s=e.extend({},i),o=s.param_name,s.param_name=t.param_name+"_"+o,c=vc.atts.parse.call(a,s),(c.length||s.save_always)&&(n[o]=c)}),i.push(n)}),i},parseOne:function(e){var t,n;return t=this.content(),n=vc.atts.param_group.extractValues.call(this,e,t),this.$content=t,encodeURIComponent(JSON.stringify(n))},init:function(e,t){t.data("vc-param-object",new d({el:t,settings:{param:e}}))}},vc.atts.colorpicker={init:function(t,n){var i=n;e(".vc_color-control",i).each(function(){var t,n,i,a=e(this),s=a.val().replace(/\s+/g,""),o=100;s.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)&&(o=100*parseFloat(s.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)[1])),a.wpColorPicker({clear:function(e,i){t.val(100),n.val("100%")},change:_.debounce(function(){e(this).trigger("change")},500)}),i=a.closest(".wp-picker-container"),e('<div class="vc_alpha-container"><label>Alpha: <output class="rangevalue">'+o+'%</output></label><input type="range" min="1" max="100" value="'+o+'" name="alpha" class="vc_alpha-field"></div>').appendTo(i.addClass("vc_color-picker").find(".iris-picker")),t=i.find(".vc_alpha-field"),n=i.find(".vc_alpha-container output"),t.bind("change keyup",function(){var e=parseFloat(t.val()),i=a.data("a8c-iris"),s=a.data("wp-wpColorPicker");n.val(t.val()+"%"),i._color._alpha=e/100,a.val(i._color.toString()),s.toggler.css({backgroundColor:a.val()})}).val(o).trigger("change")})}},vc.atts.autocomplete={init:function(t,n){var i=n;i.length&&i.each(function(){var t,n,i=e(".wpb_vc_param_value",this),a=i.attr("name"),s=e(".vc_auto_complete_param",this);t=e.extend({$param_input:i,param_name:a,$el:s},i.data("settings")),n=new r(t),t.multiple&&n.enableMultiple(),t.sortable&&n.enableSortable(),i.data("vc-param-object",n)})}},vc.atts.loop={init:function(e,t){t.data("vc-param-object",new s({el:t}))}},vc.atts.vc_link={init:function(t,n){e(".vc_link-build",n).click(function(t){var n,i,a,s,o,c,r,l;t.preventDefault(),n=e(this).closest(".vc_link"),i=n.find(".wpb_vc_param_value"),a=n.find(".url-label"),s=n.find(".title-label"),o=i.data("json"),c=e("#wp-link-submit"),r=e('<input type="submit" name="vc_link-submit" id="vc_link-submit" class="button-primary" value="Set Link">'),c.hide(),e("#vc_link-submit").remove(),r.insertBefore(c),l=!window.wpLink&&e.fn.wpdialog&&e("#wp-link").length?{$link:!1,open:function(){this.$link=e("#wp-link").wpdialog({title:wpLinkL10n.title,width:480,height:"auto",modal:!0,dialogClass:"wp-dialog",zIndex:3e5})},close:function(){this.$link.wpdialog("close")}}:window.wpLink,l.open("content"),_.isString(o.url)&&(e("#wp-link-url").length?e("#wp-link-url").val(o.url):e("#url-field").val(o.url)),_.isString(o.title)&&(e("#wp-link-text").length?e("#wp-link-text").val(o.title):e("#link-title-field").val(o.title)),e("#wp-link-target").length?e("#wp-link-target").prop("checked",!_.isEmpty(o.target)):e("#link-target-checkbox").prop("checked",!_.isEmpty(o.target)),r.unbind("click.vcLink").bind("click.vcLink",function(t){t.preventDefault(),t.stopImmediatePropagation();var n,o={};o.url=e("#wp-link-url").length?e("#wp-link-url").val():e("#url-field").val(),o.title=e("#wp-link-text").length?e("#wp-link-text").val():e("#link-title-field").val();var d=e(e("#wp-link-target").length?"#wp-link-target":"#link-target-checkbox");return o.target=d[0].checked?" _blank":"",n=_.map(o,function(e,t){return _.isString(e)&&0<e.length?t+":"+encodeURIComponent(e):void 0}).join("|"),i.val(n),i.data("json",o),a.html(o.url+o.target),s.html(o.title),l.close(),c.show(),r.unbind("click.vcLink"),r.remove(),e("#wp-link-cancel").unbind("click.vcLink"),window.wpLink.textarea="",d.attr("checked",!1),!1}),e("#wp-link-cancel").unbind("click.vcLink").bind("click.vcLink",function(t){t.preventDefault(),l.close(),r.unbind("click.vcLink"),r.remove(),e("#wp-link-cancel").unbind("click.vcLink"),window.wpLink.textarea=""})})}},vc.atts.sorted_list={init:function(t,n){e(".vc_sorted-list",n).VcSortedList()}},vc.atts.options={init:function(e,t){t.data("vc-param-object",new o({el:t}))}},vc.atts.iconpicker={change:function(e,t){var n=t.find(".vc-iconpicker");n.val(this.value),n.data("vc-no-check",!0),n.find('[value="'+this.value+'"]').attr("selected","selected"),n.data("vcFontIconPicker").loadIcons()},parse:function(e){var t=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]"),n=t.parent(),i=n.find(".vc-iconpicker").val();return i},init:function(t,n){var i=n.find(".wpb_vc_param_value"),a=e.extend({iconsPerPage:100,iconDownClass:"fip-fa fa fa-arrow-down",iconUpClass:"fip-fa fa fa-arrow-up",iconLeftClass:"fip-fa fa fa-arrow-left",iconRightClass:"fip-fa fa fa-arrow-right",iconSearchClass:"fip-fa fa fa-search",iconCancelClass:"fip-fa fa fa-remove",iconBlockClass:"fip-fa"},i.data("settings"));n.find(".vc-iconpicker").vcFontIconPicker(a).on("change",function(t){var n=e(this);n.data("vc-no-check")||i.data("vc-no-check",!0).val(this.value).trigger("change"),n.data("vc-no-check",!1)}),i.on("change",function(e){i.data("vc-no-check")||vc.atts.iconpicker.change.call(this,t,n),i.data("vc-no-check",!1)})}},vc.atts.animation_style={init:function(t,n){function i(t,n){e(t).removeClass().addClass(n+" animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){e(this).removeClass().addClass("vc_param-animation-style-preview")})}var a=n,s=e(".wpb_vc_param_value[name="+t.param_name+"]",a);e('option[value="'+s.val()+'"]',a).attr("selected",!0),e(".vc_param-animation-style-trigger",a).click(function(t){t.preventDefault();var n=e(".vc_param-animation-style",a).val();"none"!==n&&i(this.parentNode,"vc_param-animation-style-preview "+n)}),e(".vc_param-animation-style",a).change(function(){var t=e(this).val();if(s.val(t),"none"!==t){var n=e(".vc_param-animation-style-preview",a);i(n,"vc_param-animation-style-preview "+t)}})}},vc.atts.vc_grid_id={parse:function(){var e="vc_gid:"+(Date.now()+"-"+this.model.get("id")+"-"+Math.floor(11*Math.random()));return e}},vc.atts.addShortcodeIdParam=function(e){var t,n,i=!1;t=e.get("params"),n=vc.map[e.get("shortcode")],_.isArray(n.params)&&_.each(n.params,function(n){n&&!_.isUndefined(n.type)&&("tab_id"===n.type&&_.isEmpty(t[n.param_name])?(i=!0,t[n.param_name]=vc_guid()+"-"+Math.floor(11*Math.random())):"vc_grid_id"===n.type&&(i=!0,t[n.param_name]=vc.atts.vc_grid_id.parse.call({model:e})))}),i&&e.save("params",t,{silent:!0})},vc.getMapped=vc.memoizeWrapper(function(e){return vc.map[e]||{}})}(window.jQuery),function(e){vc.debug=!1,vc.map=_.isUndefined(window.vc_mapper)?{}:window.vc_mapper,vc.roles=_.isUndefined(window.vc_roles)?{}:window.vc_roles,vc.Storage=function(){this.data={}},vc.Storage.prototype={url:window.ajaxurl,checksum:!1,locked:!1,create:function(e){return e.id||(e.id=e.attributes.id=vc_guid()),this.data[e.id]=e.toJSON(),this.setModelRoot(e.id),this.save(),e},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},setModelRoot:function(e){var t=this.data[e];_.isString(t.parent_id)&&_.isObject(this.data[t.parent_id])&&(t.root_id=this.data[t.parent_id].root_id),_.isObject(this.data[t.root_id])&&(this.data[t.root_id].html=!1)},update:function(e){return this.data[e.id]=e.toJSON(),this.setModelRoot(e.id),this.save(),e},destroy:function(e){return _.isUndefined(this.data[e.id])||_.isUndefined(this.data[e.id].root_id)||!_.isObject(this.data[this.data[e.id].root_id])||(this.data[this.data[e.id].root_id].html=!1),_.isUndefined(this.data[e.id])||delete this.data[e.id],this.save(),e},find:function(e){return this.data[e]},findAll:function(){return this.fetch(),_.values(this.data)},findAllRootSorted:function(){var e=_.filter(_.values(this.data),function(e){return!1===e.parent_id});return _.sortBy(e,function(e){return e.order})},escapeParam:function(t){return"array"!==e.type(t)?_.isUndefined(t)||_.isNull(t)||!t.toString?"":t.toString().replace(/"/g,"``").replace(/\[/g,"`{`").replace(/\]/g,"`}`"):t},unescapeParam:function(e){return e.replace("`{`","[").replace("`}`","]").replace(/(\`{2})/g,'"')},storageCreateShortcodeString:function(e){var t,n,i,a,s,o,c,r;return i=e.get("shortcode"),a=_.extend({},e.get("params")),o={},c=vc.getMergedParams(i,a),_.each(c,function(e,t){o[t]=this.escapeParam(e)},this),t=vc.getMapped(i),r=_.isObject(t)&&(_.isBoolean(t.is_container)&&!0===t.is_container||!_.isEmpty(t.as_parent)),s=this._storageGetShortcodeContent(e),n={tag:i,attrs:o,content:s,type:_.isUndefined(vc.getParamSettings(i,"content"))&&!r?"single":""},e.trigger("stringify",e,n),wp.shortcode.string(n)},save:function(){if(this.locked)return this.locked=!1,!1;var e=_.reduce(this.findAllRootSorted(),function(e,t){var n=vc.shortcodes.get(t);return e+this.storageCreateShortcodeString(n)},"",this);return this.setContent(e),this.checksum=vc_globalHashCode(e),this},_storageGetShortcodeContent:function(e){var t,n;return t=_.sortBy(_.filter(this.data,function(t){return t.parent_id===e.get("id")}),function(e){return e.order}),t.length?_.reduce(t,function(e,t){var n=vc.shortcodes.get(t);return e+this.storageCreateShortcodeString(n)},"",this):(n=_.extend({},e.get("params")),_.isUndefined(n.content)?"":n.content)},getContent:function(){return _.isObject(window.tinymce)&&tinymce.editors.content&&tinymce.editors.content.save(),window.vc_wpnop(e("#content").val())},setContent:function(t){var n=_.isObject(window.tinymce)&&tinymce.editors.content&&!_.isUndefined(window.switchEditors),i=n&&window.tinyMCE.get("content")&&window.tinyMCE.get("content").isHidden();n&&window.switchEditors.go("content","html"),e("#content").val(t),n&&!i&&window.switchEditors.go("content","tmce")},parseContent:function(e,t,n){var i=_.keys(vc.map).join("|"),a=window.wp.shortcode.regexp(i),s=t.trim().match(a);return _.isNull(s)?e:(_.each(s,function(t){var a,s,o=t.match(this.regexp(i)),c=o[5],r=new RegExp("^[\\s]*\\[\\[?("+_.keys(vc.map).join("|")+")(?![\\w-])"),l=window.vc_guid(),d=window.wp.shortcode.attrs(o[3]),h={};_.each(d.named,function(e,t){h[t]=this.unescapeParam(e)},this),a={id:l,shortcode:o[2],order:this.order,params:_.extend({},h),parent_id:_.isObject(n)?n.id:!1,root_id:_.isObject(n)?n.root_id:l},s=vc.map[a.shortcode],this.order+=1,e[l]=a,l==a.root_id&&(e[l].html=t),_.isString(c)&&c.match(r)&&(_.isBoolean(s.is_container)&&!0===s.is_container||!_.isEmpty(s.as_parent)&&!1!==s.as_parent)?e=this.parseContent(e,c,e[l]):_.isString(c)&&c.length&&"vc_row"===o[2]?e=this.parseContent(e,'[vc_column width="1/1"][vc_column_text]'+c+"[/vc_column_text][/vc_column]",e[l]):_.isString(c)&&c.length&&"vc_column"===o[2]?e=this.parseContent(e,"[vc_column_text]"+c+"[/vc_column_text]",e[l]):_.isString(c)&&(e[l].params.content=c)},this),e)},isContentChanged:function(){return!1===this.checksum||this.checksum!==vc_globalHashCode(this.getContent())},wrapData:function(e){var t=_.keys(vc.map).join("|"),n=this.regexp_split("vc_row"),i=new RegExp("^\\[(\\[?)("+t+")","g"),a=_.filter(e.trim().split(n),function(e){return _.isEmpty(e)?void 0:e});return e=_.reduce(a,function(e,t){t.trim().match(i)||(t="[vc_row][vc_column][vc_column_text]"+t+"[/vc_column_text][/vc_column][/vc_row]");var n=t.match(vc_regexp_shortcode());return!_.isArray(n)||_.isUndefined(n[2])||_.isUndefined(vc.map[n[2]])||!_.isUndefined(vc.map[n[2]].is_container)&&vc.map[n[2]].is_container||!_.isEmpty(vc.map[n[2]].as_parent)||(t="[vc_row][vc_column]"+t+"[/vc_column][/vc_row]"),e+t},"")},fetch:function(){if(!this.isContentChanged())return this;this.order=0;var e=this.getContent();this.checksum=vc_globalHashCode(e),e=this.wrapData(e),this.data=this.parseContent({},e)},append:function(e){this.data={},this.order=0;try{var t=this.getContent();this.setContent(t+""+e)}catch(n){window.console&&window.console.error&&window.console.error(n)}},regexp_split:_.memoize(function(e){return new RegExp("(\\[(\\[?)["+e+"]+(?![\\w-])[^\\]\\/]*[\\/(?!\\])[^\\]\\/]*]?(?:\\/]\\]|\\](?:[^\\[]*(?:\\[(?!\\/"+e+"\\])[^\\[]*)*\\[\\/"+e+"\\])?)\\]?)","g")}),regexp:_.memoize(function(e){return new RegExp("\\[(\\[?)("+e+")(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)")})},vc.storage=new vc.Storage}(window.jQuery),function(e){var t=vc.storage;vc.shortcode=Backbone.Model.extend({settings:!1,defaults:function(){var e=window.vc_guid();return{id:e,shortcode:"vc_text_block",order:vc.shortcodes.getNextOrder(),params:{},parent_id:!1,root_id:e,cloned:!1,html:!1,view:!1}},initialize:function(){this.bind("remove",this.removeChildren,this),this.bind("remove",this.removeEvents,this)},removeEvents:function(e){vc.events.triggerShortcodeEvents("destroy",e)},sync:function(e,n,i){if(i&&i.silent)return i.success(n);var a;switch(e){case"read":a=n.id?t.find(n):t.findAll();break;case"create":a=t.create(n);break;case"update":a=t.update(n);break;case"delete":a=t.destroy(n)}a?i.success(a):i.error("Record not found")},getParam:function(e){return _.isObject(this.get("params"))&&!_.isUndefined(this.get("params")[e])?this.get("params")[e]:""},removeChildren:function(e){var t=vc.shortcodes.where({parent_id:e.id});_.each(t,function(e){vc.storage.lock(),e.destroy(),this.removeChildren(e)},this),t.length&&vc.storage.save()},setting:function(e){return!1===this.settings&&(this.settings=vc.getMapped(this.get("shortcode"))||{}),this.settings[e]}}),vc.shortcodes_collection=Backbone.Collection.extend({model:vc.shortcode,last_index:0,getNextOrder:function(){return this.last_index++},comparator:function(e){return e.get("order")},initialize:function(){},createFromString:function(e,t){var n;n=vc.storage.parseContent({},e,_.isObject(t)?t.toJSON():!1),_.each(_.values(n),function(e){vc.shortcodes.create(e)},this)},sync:function(e,n,i){var a;switch(e){case"read":a=n.id?t.find(n):t.findAll();break;case"create":a=t.create(n);break;case"update":a=t.update(n);break;case"delete":a=t.destroy(n)}a?i.success(a):i.error("Record not found")},stringify:function(e){var t=_.sortBy(vc.shortcodes.where({parent_id:!1}),function(e){return e.get("order")});return this.modelsToString(t,e)},createShortcodeString:function(e,t){var n,i,a,s,o,c,r,l;return a=e.get("shortcode"),s=_.extend({},e.get("params")),c={},r=vc.getMergedParams(a,s),_.each(r,function(e,t){c[t]=vc.storage.escapeParam(e)},this),n=vc.getMapped(a),l=_.isObject(n)&&(_.isBoolean(n.is_container)&&!0===n.is_container||!_.isEmpty(n.as_parent)),o=this._getShortcodeContent(e,t),i={tag:a,attrs:c,content:o,type:_.isUndefined(vc.getParamSettings(a,"content"))&&!l?"single":""},_.isUndefined(t)?e.trigger("stringify",e,i):e.trigger("stringify:"+t,e,i),wp.shortcode.string(i)},modelsToString:function(e,t){var n=_.reduce(e,function(e,n){return e+this.createShortcodeString(n,t)},"",this);return n},_getShortcodeContent:function(e,t){var n,i;return n=_.sortBy(vc.shortcodes.where({parent_id:e.get("id")}),function(e){return e.get("order")}),n.length?_.reduce(n,function(e,n){return e+this.createShortcodeString(n,t)},"",this):(i=_.extend({},e.get("params")),_.isUndefined(i.content)?"":i.content)}}),vc.shortcodes=new vc.shortcodes_collection,vc.getDefaults=vc.memoizeWrapper(function(e){var t,n;return t={},n=_.isObject(vc.map[e])&&_.isArray(vc.map[e].params)?vc.map[e].params:[],_.each(n,function(e){_.isObject(e)&&(_.isUndefined(e.std)?_.isUndefined(e.value)||(vc.atts[e.type]&&vc.atts[e.type].defaults?t[e.param_name]=vc.atts[e.type].defaults(e):_.isObject(e.value)?t[e.param_name]=_.values(e.value)[0]:_.isArray(e.value)?t[e.param_name]=e.value[0]:t[e.param_name]=e.value):t[e.param_name]=e.std)}),t}),vc.getDefaultsAndDependencyMap=vc.memoizeWrapper(function(e){var t,n,i;return n={},t={},i=_.isObject(vc.map[e])&&_.isArray(vc.map[e].params)?vc.map[e].params:[],_.each(i,function(e){_.isObject(e)&&"content"!==e.param_name&&(_.isUndefined(e.std)?_.isUndefined(e.value)||(vc.atts[e.type]&&vc.atts[e.type].defaults?t[e.param_name]=vc.atts[e.type].defaults(e):_.isObject(e.value)?t[e.param_name]=_.values(e.value)[0]:_.isArray(e.value)?t[e.param_name]=e.value[0]:t[e.param_name]=e.value):t[e.param_name]=e.std,_.isUndefined(e.dependency)||_.isUndefined(e.dependency.element)||(n[e.param_name]=e.dependency))}),{defaults:t,dependencyMap:n}}),vc.getMergedParams=function(e,t){var n,i,a;return n=vc.getDefaultsAndDependencyMap(e),i={},t=_.extend({},n.defaults,t),a=_.extend({},n.dependencyMap),_.each(t,function(s,o){if("content"!==o){var c;if(!_.isUndefined(a[o])){if(!_.isUndefined(a[a[o].element])&&_.isBoolean(a[a[o].element].failed)&&!0===a[a[o].element].failed)return void(a[o].failed=!0);var r,l,d,h;if(d=a[o].element,h=t[d],l=_.isEmpty(h),r=_.omit(a[o],"element"),_.isBoolean(r.not_empty)&&!0===r.not_empty&&l||_.isBoolean(r.is_empty)&&!0===r.is_empty&&!l||r.value&&!_.intersection(_.isArray(r.value)?r.value:[r.value],_.isArray(h)?h:[h]).length||r.value_not_equal_to&&_.intersection(_.isArray(r.value_not_equal_to)?r.value_not_equal_to:[r.value_not_equal_to],_.isArray(h)?h:[h]).length)return void(a[o].failed=!0)}c=vc.getParamSettings(e,o),_.isUndefined(c)?i[o]=s:(!_.isUndefined(n.defaults[o])&&n.defaults[o]!==s||_.isUndefined(n.defaults[o])&&""!==s||!_.isUndefined(c.save_always)&&!0===c.save_always)&&(i[o]=s)}}),i},vc.getParamSettings=vc.memoizeWrapper(function(e,t){var n,i;return n=_.isObject(vc.map[e])&&_.isArray(vc.map[e].params)?vc.map[e].params:[],i=_.find(n,function(e){return _.isObject(e)&&e.param_name===t},this)},function(){return arguments[0]+","+arguments[1]}),vc.getParamSettingsByType=vc.memoizeWrapper(function(e,t){var n,i;return n=_.isObject(vc.map[e])&&_.isArray(vc.map[e].params)?vc.map[e].params:[],i=_.find(n,function(e){return _.isObject(e)&&e.type===t},this)},function(){return arguments[0]+","+arguments[1]}),vc.shortcodeHasIdParam=vc.memoizeWrapper(function(e){return vc.getParamSettingsByType(e,"el_id")})}(window.jQuery),function(e){vc.clone_index=1,vc.shortcode_view=Backbone.View.extend({tagName:"div",$content:"",use_default_content:!1,params:{},events:{"click .column_delete,.vc_control-btn-delete":"deleteShortcode","click .column_add,.vc_control-btn-prepend":"addElement","click .column_edit,.vc_control-btn-edit, .column_edit_trigger":"editElement","click .column_clone,.vc_control-btn-clone":"clone",mousemove:"checkControlsPosition"},removeView:function(){vc.closeActivePanel(this.model),this.remove()},checkControlsPosition:function(){if(this.$controls_buttons){var t,n,i,a=this.$el.height(),s=e(window).height();a>s&&(t=e(window).scrollTop(),n=this.$el.offset().top,i=t-n+e(window).height()/2,i>40&&a>i?this.$controls_buttons.css("top",i):i>a?this.$controls_buttons.css("top",a-40):this.$controls_buttons.css("top",40))}},initialize:function(){this.model.bind("destroy",this.removeView,this),this.model.bind("change:params",this.changeShortcodeParams,this),this.model.bind("change_parent_id",this.changeShortcodeParent,this),this.createParams()},hasUserAccess:function(){var e;return e=this.model.get("shortcode"),-1<_.indexOf(["vc_row","vc_column","vc_row_inner","vc_column_inner"],e)?!0:_.every(vc.roles.current_user,function(t){return!(!_.isUndefined(vc.roles[t])&&!_.isUndefined(vc.roles[t].shortcodes)&&_.isUndefined(vc.roles[t].shortcodes[e]))})?!0:!1},canCurrentUser:function(e){var t,n=!1;return t=this.model.get("shortcode"),n=void 0===e||"all"===e?vc_user_access().shortcodeAll(t):vc_user_access().shortcodeEdit(t)},createParams:function(){var e,t,n;e=this.model.get("shortcode"),t=_.isObject(vc.map[e])&&_.isArray(vc.map[e].params)?vc.map[e].params:[],n=this.model.get("params"),this.params={},_.each(t,function(e){this.params[e.param_name]=e},this)},setContent:function(){this.$content=this.$el.find("> .wpb_element_wrapper > .vc_container_for_children, > .vc_element-wrapper > .vc_container_for_children")},setEmpty:function(){},unsetEmpty:function(){},checkIsEmpty:function(){this.model.get("parent_id")&&vc.app.views[this.model.get("parent_id")].checkIsEmpty()},html2element:function(t){var n,i={},a=vc.template(t);n=e(a(this.model.toJSON()).trim()),_.each(n.get(0).attributes,function(e){i[e.name]=e.value}),this.$el.attr(i).html(n.html()),this.setContent(),this.renderContent()},render:function(){var t=e("#vc_shortcode-template-"+this.model.get("shortcode"));if(t.is("script"))this.html2element(t.html());else{var n=this.model.get("params");e.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_get_element_backend_html",data_element:this.model.get("shortcode"),data_width:_.isUndefined(n.width)?"1/1":n.width,_vcnonce:window.vcAdminNonce},dataType:"html",context:this}).done(function(e){this.html2element(e)})}return this.model.view=this,this.$controls_buttons=this.$el.find(".vc_controls > :first"),this},renderContent:function(){return this.$el.attr("data-model-id",this.model.get("id")),this.$el.data("model",this.model),this},changedContent:function(e){},_loadDefaults:function(){var e,t;e=this.model.get("shortcode"),t=!!vc.shortcodes.where({parent_id:this.model.get("id")}).length,!t&&!0===this.use_default_content&&_.isObject(vc.map[e])&&_.isString(vc.map[e].default_content)&&vc.map[e].default_content.length&&(this.use_default_content=!1,vc.shortcodes.createFromString(vc.map[e].default_content,this.model))},_callJsCallback:function(){var e=this.model.get("shortcode");if(_.isObject(vc.map[e])&&_.isObject(vc.map[e].js_callback)&&!_.isUndefined(vc.map[e].js_callback.init)){var t=vc.map[e].js_callback.init;window[t](this.$el)}},ready:function(e){return this._loadDefaults(),this._callJsCallback(),this.model.get("parent_id")&&_.isObject(vc.app.views[this.model.get("parent_id")])&&vc.app.views[this.model.get("parent_id")].changedContent(this),_.defer(_.bind(function(){vc.events.trigger("shortcodeView:ready",this),vc.events.trigger("shortcodeView:ready:"+this.model.get("shortcode"),this)},this)),this},addShortcode:function(e,t){var n;n=_.last(vc.shortcodes.filter(function(e){return e.get("parent_id")===this.get("parent_id")&&parseFloat(e.get("order"))<parseFloat(this.get("order"))},e.model)),n?e.render().$el.insertAfter("[data-model-id="+n.id+"]"):"append"===t?this.$content.append(e.render().el):this.$content.prepend(e.render().el)},changeShortcodeParams:function(t){var n,i,a,s;n=t.get("shortcode"),i=t.get("params"),a=vc.map[n],_.defer(function(){vc.events.trigger("backend.shortcodeViewChangeParams:"+n)}),_.isArray(a.params)&&_.each(a.params,function(t){var n,a,s,o,c;if(n=t.param_name,a=i[n],s=this.$el.find("> .wpb_element_wrapper, > .vc_element-wrapper"),o=a,c=s.children(".admin_label_"+n),_.isObject(vc.atts[t.type])&&_.isFunction(vc.atts[t.type].render)&&(a=vc.atts[t.type].render.call(this,t,a)),s.children("."+t.param_name).is("input,textarea,select"))s.children("[name="+t.param_name+"]").val(a);else if(s.children("."+t.param_name).is("iframe"))s.children("[name="+t.param_name+"]").attr("src",a);else if(s.children("."+t.param_name).is("img")){var r;r=s.children("[name="+t.param_name+"]"),a&&a.match(/^\d+$/)?e.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_single_image_src",content:a,size:"thumbnail",_vcnonce:window.vcAdminNonce},dataType:"html",context:this}).done(function(e){r.attr("src",e)}):a&&r.attr("src",a)}else s.children("[name="+t.param_name+"]").html(a?a:"");if(c.length){var l;""===a||_.isUndefined(a)?c.hide().addClass("hidden-label"):(_.isObject(t.value)&&!_.isArray(t.value)&&"checkbox"===t.type?(l=_.invert(t.value),o=_.map(a.split(/[\s]*\,[\s]*/),function(e){return _.isString(l[e])?l[e]:e}).join(", ")):_.isObject(t.value)&&!_.isArray(t.value)&&(l=_.invert(t.value),o=_.isString(l[a])?l[a]:a),c.html("<label>"+c.find("label").text()+"</label>: "+o),c.show().removeClass("hidden-label"))}},this),s=vc.app.views[t.get("parent_id")],!1!==t.get("parent_id")&&_.isObject(s)&&s.checkIsEmpty()},changeShortcodeParent:function(t){if(!1===this.model.get("parent_id"))return t;var n=e("[data-model-id="+this.model.get("parent_id")+"]"),i=vc.app.views[this.model.get("parent_id")];this.$el.appendTo(n.find("> .wpb_element_wrapper > .wpb_column_container, > .vc_element-wrapper > .wpb_column_container")),i.checkIsEmpty()},deleteShortcode:function(e){_.isObject(e)&&e.preventDefault();var t=confirm(window.i18nLocale.press_ok_to_delete_section);!0===t&&this.model.destroy()},addElement:function(t){_.isObject(t)&&t.preventDefault(),vc.add_element_block_view.render(this.model,!_.isObject(t)||!e(t.currentTarget).closest(".bottom-controls").hasClass("bottom-controls"))},editElement:function(e){_.isObject(e)&&e.preventDefault(),(!vc.active_panel||!vc.active_panel.model||!this.model||vc.active_panel.model&&this.model&&vc.active_panel.model.get("id")!=this.model.get("id"))&&(vc.closeActivePanel(),vc.edit_element_block_view.render(this.model))},clone:function(e){return _.isObject(e)&&e.preventDefault(),vc.clone_index/=10,this.cloneModel(this.model,this.model.get("parent_id"))},cloneModel:function(e,t,n){var i,a,s,o;return i=_.isBoolean(n)&&!0===n?e.get("order"):parseFloat(e.get("order"))+vc.clone_index,s=_.extend({},e.get("params")),o=e.get("shortcode"),a=vc.shortcodes.create({shortcode:o,id:window.vc_guid(),parent_id:t,order:i,cloned:!0,cloned_from:e.toJSON(),params:s}),_.each(vc.shortcodes.where({parent_id:e.id}),function(e){this.cloneModel(e,a.get("id"),!0)},this),a},remove:function(){this.$content&&this.$content.data("uiSortable")&&this.$content.sortable("destroy"),this.$content&&this.$content.data("uiDroppable")&&this.$content.droppable("destroy"),delete vc.app.views[this.model.id],window.vc.shortcode_view.__super__.remove.call(this)}}),vc.shortcodes.on("sync",function(e){_.isObject(e)&&!_.isEmpty(e.models)&&_.each(e.models,function(e){vc.events.triggerShortcodeEvents("sync",e)})}),vc.shortcodes.on("add",function(e){_.isObject(e)&&vc.events.triggerShortcodeEvents("add",e)})}(window.jQuery),function(e){vc.saved_custom_css=!1,vc.visualComposerView=Backbone.View.extend({el:e("#wpb_visual_composer"),views:{},disableFixedNav:!1,events:{"click #wpb-add-new-row":"createRow","click #vc_post-settings-button":"editSettings",'click #vc_add-new-element, [data-vc-element="add-element-action"]':"addElement","click #vc_fullscreen-button":"enterFullscreen","click #vc_windowed-button":"leaveFullscreen",'click [data-vc-element="add-text-block-action"]':"addTextBlock","click .wpb_switch-to-composer":"switchComposer","click #vc_templates-editor-button":"openTemplatesWindow","click #vc_templates-more-layouts":"openTemplatesWindow","click .vc_template[data-template_unique_id] > .wpb_wrapper":"loadDefaultTemplate","click #wpb-save-post":"save","click .vc_control-preview":"preview"},initializeAccessPolicy:function(){this.accessPolicy={be_editor:vc_user_access().editor("backend_editor"),fe_editor:vc_frontend_enabled&&vc_user_access().editor("frontend_editor"),classic_editor:!vc_user_access().check("backend_editor","disabled_ce_editor",void 0,!0)}},accessPolicyActions:function(){var t="",n="";if(this.accessPolicy.fe_editor&&(t='<span class="vc_spacer"></span><a class="wpb_switch-to-front-composer" href="'+e("#wpb-edit-inline").attr("href")+'">'+window.i18nLocale.main_button_title_frontend_editor+"</a>"),this.accessPolicy.classic_editor)this.accessPolicy.be_editor&&(n='<span class="vc_spacer"></span><a class="wpb_switch-to-composer" href="#">'+window.i18nLocale.main_button_title_backend_editor+"</a>");else if(e("#postdivrich").hide(),this.accessPolicy.be_editor){var i=this;_.defer(function(){i.show(),i.status="shown"})}(t||n)&&(this.$buttonsContainer=e('<div class="composer-switch"><span class="logo-icon"></span>'+n+t+"</div>").insertAfter("div#titlediv"),this.accessPolicy.classic_editor&&(this.$switchButton=this.$buttonsContainer.find(".wpb_switch-to-composer"),this.$switchButton.click(this.switchComposer)))},initialize:function(){var t=this;_.bindAll(this,"switchComposer","dropButton","processScroll","updateRowsSorting","updateElementsSorting"),this.accessPolicy=vc.accessPolicy,this.buildRelevance(),vc.events.on("shortcodes:add",vcAddShortcodeDefaultParams,this),vc.events.on("shortcodes:add",vc.atts.addShortcodeIdParam,this),vc.events.on("shortcodes:sync",vc.atts.addShortcodeIdParam,this),vc.events.on("shortcodes:add",this.addShortcode,this),vc.events.on("shortcodes:destroy",this.checkEmpty,this),vc.shortcodes.on("change:params",this.changeParamsEvents,this),vc.shortcodes.on("reset",this.addAll,this),e(document).on("wp-collapse-menu",function(e,n){"open"===n.state&&t.leaveFullscreen()}),this.render()},changeParamsEvents:function(e){vc.events.triggerShortcodeEvents("update",e)},render:function(){return this.$buttonsContainer=e(".composer-switch"),this.$switchButton=this.$buttonsContainer.find(".wpb_switch-to-composer"),
this.$vcStatus=e("#wpb_vc_js_status"),this.$metablock_content=e(".metabox-composer-content"),this.$content=e("#visual_composer_content"),this.$post=e("#postdivrich"),this.$loading_block=e("#vc_logo"),vc.add_element_block_view=new vc.AddElementUIPanelBackendEditor({el:"#vc_ui-panel-add-element"}),vc.edit_element_block_view=new vc.EditElementUIPanel({el:"#vc_ui-panel-edit-element"}),vc.templates_panel_view=new vc.TemplateWindowUIPanelBackendEditor({el:"#vc_ui-panel-templates"}),vc.post_settings_view=new vc.PostSettingsUIPanelBackendEditor({el:"#vc_ui-panel-post-settings"}),this.setSortable(),this.setDraggable(),vc.is_mobile=0<e("body.mobile").length,vc.saved_custom_css=e("#wpb_custom_post_css_field").val(),vc.updateSettingsBadge(),_.defer(function(){vc.events.trigger("app.render")}),this},addAll:function(){this.views={},this.$content.removeClass("loading").empty(),this.addChild(!1),this.checkEmpty(),this.$loading_block.removeClass("vc_ui-wp-spinner"),this.$metablock_content.removeClass("vc_loading-shortcodes"),_.defer(function(){vc.events.trigger("app.addAll")})},addChild:function(e){_.each(vc.shortcodes.where({parent_id:e}),function(e){this.appendShortcode(e),this.setSortable(),this.addChild(e.get("id"))},this)},getView:function(e){var t;return t=_.isObject(vc.map[e.get("shortcode")])&&_.isString(vc.map[e.get("shortcode")].js_view)&&vc.map[e.get("shortcode")].js_view.length&&!_.isUndefined(window[window.vc.map[e.get("shortcode")].js_view])?new(window[window.vc.map[e.get("shortcode")].js_view])({model:e}):new vc.shortcode_view({model:e}),e.set({view:t}),t},setDraggable:function(){e("#wpb-add-new-element, #wpb-add-new-row").draggable({helper:function(){return e('<div id="drag_placeholder"></div>').appendTo("body")},zIndex:99999,cursor:"move",revert:"invalid",start:function(t,n){e("#drag_placeholder").addClass("column_placeholder").html(window.i18nLocale.drag_drop_me_in_column)}}),this.$content.droppable({greedy:!0,accept:".dropable_el,.dropable_row",hoverClass:"wpb_ui-state-active",drop:this.dropButton})},dropButton:function(e,t){t.draggable.is("#wpb-add-new-element")?this.addElement():t.draggable.is("#wpb-add-new-row")&&this.createRow()},appendShortcode:function(e){var t,n,i;if(t=this.getView(e),i=_.extend(vc.getDefaults(e.get("shortcode")),e.get("params")),e.set("params",i,{silent:!0}),n=!1!==e.get("parent_id")?this.views[e.get("parent_id")]:!1,this.views[e.id]=t,e.get("parent_id")){var a;a=this.views[e.get("parent_id")],a.unsetEmpty()}n?n.addShortcode(t,"append"):this.$content.append(t.render().el),t.ready(),t.changeShortcodeParams(e),t.checkIsEmpty(),this.setNotEmpty()},addShortcode:function(e){var t,n,i;if(i=_.extend(vc.getDefaults(e.get("shortcode")),e.get("params")),e.set("params",i,{silent:!0}),t=this.getView(e),n=!1!==e.get("parent_id")?this.views[e.get("parent_id")]:!1,t.use_default_content=!0!==e.get("cloned"),this.views[e.id]=t,n){n.addShortcode(t),n.checkIsEmpty();var a;a=this,_.defer(function(){t.changeShortcodeParams&&t.changeShortcodeParams(e),t.ready(),a.setSortable(),a.setNotEmpty()})}else this.addRow(t),_.defer(function(){t.changeShortcodeParams&&t.changeShortcodeParams(e)})},addRow:function(e){var t;t=_.last(vc.shortcodes.filter(function(e){return!1===e.get("parent_id")&&parseFloat(e.get("order"))<parseFloat(this.get("order"))},e.model)),t?e.render().$el.insertAfter("[data-model-id="+t.id+"]"):this.$content.append(e.render().el)},addTextBlock:function(e){var t,n,i,a,s;return e.preventDefault(),a={},"undefined"!=typeof window.vc_settings_presets.vc_row&&(a=_.extend(a,window.vc_settings_presets.vc_row)),t=vc.shortcodes.create({shortcode:"vc_row",params:a}),s={width:"1/1"},"undefined"!=typeof window.vc_settings_presets.vc_column&&(s=_.extend(s,window.vc_settings_presets.vc_column)),n=vc.shortcodes.create({shortcode:"vc_column",params:s,parent_id:t.id,root_id:t.id}),i=vc.getDefaults("vc_column_text"),"undefined"!=typeof window.vc_settings_presets.vc_column_text&&(i=_.extend(i,window.vc_settings_presets.vc_column_text)),vc.shortcodes.create({shortcode:"vc_column_text",parent_id:n.id,root_id:t.id,params:i})},createRow:function(){var e,t,n;return t={},"undefined"!=typeof window.vc_settings_presets.vc_row&&(t=_.extend(t,window.vc_settings_presets.vc_row)),e=vc.shortcodes.create({shortcode:"vc_row",params:t}),n={width:"1/1"},"undefined"!=typeof window.vc_settings_presets.vc_column&&(n=_.extend(n,window.vc_settings_presets.vc_column)),vc.shortcodes.create({shortcode:"vc_column",params:n,parent_id:e.id,root_id:e.id}),e},addElement:function(e){_.isObject(e)&&e.preventDefault(),vc.add_element_block_view.render(!1)},openTemplatesWindow:function(t){t&&t.preventDefault(),e(t.currentTarget).is("#vc_templates-more-layouts")&&vc.templates_panel_view.once("show",function(){e('[data-vc-ui-element-target="[data-tab=default_templates]"]').click()}),vc.templates_panel_view.render().show()},loadDefaultTemplate:function(e){e&&e.preventDefault(),vc.templates_panel_view.loadTemplate(e)},editSettings:function(e){e&&e.preventDefault(),vc.post_settings_view.render().show()},enterFullscreen:function(){var t=e("body");t.hasClass("folded")?(t.data("vcKeepMenuFolded",!0),t.addClass("vc_fullscreen")):t.addClass("vc_fullscreen folded")},leaveFullscreen:function(){var t=e("body");t.hasClass("vc_fullscreen")&&(t.data("vcKeepMenuFolded")?(t.removeClass("vc_fullscreen"),t.removeData("vcKeepMenuFolded")):t.removeClass("vc_fullscreen folded"))},sortingStarted:function(t,n){e("#visual_composer_content").addClass("vc_sorting-started")},sortingStopped:function(t,n){e("#visual_composer_content").removeClass("vc_sorting-started")},updateElementsSorting:function(t,n){_.defer(function(t,n,i){var a=i.item.parent().closest("[data-model-id]"),s=a.data("model"),o=i.item.data("model"),c=t.views[s.id].$content.find("> [data-model-id]"),r=0;if(!_.isNull(i.sender)){var l=o.get("parent_id");vc.storage.lock(),o.save({parent_id:s.id}),t.views[l].checkIsEmpty(),t.views[s.id].checkIsEmpty()}c.each(function(){var t=e(this).data("model");vc.storage.lock(),t.save({order:r++})}),o.save()},this,t,n)},updateRowsSorting:function(){_.defer(function(t){var n=t.$content.find(t.rowSortableSelector);n.each(function(){var t=e(this).index();n.length-1>t&&vc.storage.lock(),e(this).data("model").save({order:t})})},this)},renderPlaceholder:function(t,n){var i=e(n).data("element_type"),a=_.isObject(vc.map[i])&&(_.isBoolean(vc.map[i].is_container)&&!0===vc.map[i].is_container||!_.isEmpty(vc.map[i].as_parent)),s=e('<div class="vc_helper vc_helper-'+i+'"><i class="vc_general vc_element-icon'+(vc.map[i].icon?" "+vc.map[i].icon:"")+'"'+(a?' data-is-container="true"':"")+"></i> "+vc.map[i].name+"</div>").prependTo("body");return s},rowSortableSelector:"> .wpb_vc_row",setSortable:function(){return e(".wpb_main_sortable").sortable({forcePlaceholderSize:!0,placeholder:"widgets-placeholder",cursor:"move",items:this.rowSortableSelector,handle:".column_move",cancel:".vc-non-draggable-row",distance:.5,start:this.sortingStarted,stop:this.sortingStopped,update:this.updateRowsSorting,over:function(e,t){t.placeholder.css({maxWidth:t.placeholder.parent().width()})}}),e(".wpb_column_container").sortable({forcePlaceholderSize:!0,forceHelperSize:!1,connectWith:".wpb_column_container",placeholder:"vc_placeholder",items:"> div.wpb_sortable,> div.vc-non-draggable",helper:this.renderPlaceholder,distance:3,cancel:".vc-non-draggable",scroll:!0,scrollSensitivity:70,cursor:"move",cursorAt:{top:20,left:16},tolerance:"intersect",start:function(){e("#visual_composer_content").addClass("vc_sorting-started"),e(".vc_not_inner_content").addClass("dragging_in")},stop:function(t,n){e("#visual_composer_content").removeClass("vc_sorting-started"),e(".dragging_in").removeClass("dragging_in");var i=n.item.data("element_type"),a=n.item.parent().closest("[data-element_type]").data("element_type"),s=_.isUndefined(vc.map[a].allowed_container_element)?!0:vc.map[a].allowed_container_element;vc.check_relevance(a,i)||e(this).sortable("cancel");var o=_.isObject(vc.map[i])&&(_.isBoolean(vc.map[i].is_container)&&!0===vc.map[i].is_container||!_.isEmpty(vc.map[i].as_parent));o&&!0!==s&&s!==n.item.data("element_type").replace(/_inner$/,"")&&e(this).sortable("cancel"),e(".vc_sorting-empty-container").removeClass("vc_sorting-empty-container")},update:this.updateElementsSorting,over:function(e,t){var n=t.item.data("element_type"),i=t.placeholder.closest("[data-element_type]").data("element_type"),a=_.isUndefined(vc.map[i].allowed_container_element)?!0:vc.map[i].allowed_container_element;if(!vc.check_relevance(i,n))return t.placeholder.addClass("vc_hidden-placeholder"),!1;var s=_.isObject(vc.map[n])&&(_.isBoolean(vc.map[n].is_container)&&!0===vc.map[n].is_container||!_.isEmpty(vc.map[n].as_parent));return s&&!0!==a&&a!==t.item.data("element_type").replace(/_inner$/,"")?(t.placeholder.addClass("vc_hidden-placeholder"),!1):(_.isNull(t.sender)||!t.sender.length||t.sender.find("[data-element_type]:visible").length||t.sender.addClass("vc_sorting-empty-container"),t.placeholder.removeClass("vc_hidden-placeholder"),void t.placeholder.css({maxWidth:t.placeholder.parent().width()}))}}).disableSelection(),this},setNotEmpty:function(){e("#vc_no-content-helper").addClass("vc_not-empty")},setIsEmpty:function(){vc.views={},e("#vc_no-content-helper").removeClass("vc_not-empty")},checkEmpty:function(e){if(_.isObject(e)&&!1!==e.get("parent_id")&&e.get("parent_id")!=e.id){var t=this.views[e.get("parent_id")];if(!t)return;t.checkIsEmpty()}0===vc.shortcodes.length?this.setIsEmpty():this.setNotEmpty()},switchComposer:function(e){_.isObject(e)&&e.preventDefault(),"shown"===this.status?(this.accessPolicy.can("classic_editor")&&(!_.isUndefined(this.$switchButton)&&this.$switchButton.text(window.i18nLocale.main_button_title_backend_editor),!_.isUndefined(this.$buttonsContainer)&&this.$buttonsContainer.removeClass("vc_backend-status")),this.close(),this.status="closed"):(this.accessPolicy.can("classic_editor")&&(!_.isUndefined(this.$switchButton)&&this.$switchButton.text(window.i18nLocale.main_button_title_revert),!_.isUndefined(this.$buttonsContainer)&&this.$buttonsContainer.addClass("vc_backend-status")),this.show(),this.status="shown")},show:function(){this.$el.show(),this.$post.hide(),this.$vcStatus.val("true"),this.navOnScroll(),vc.storage.isContentChanged()&&(vc.app.setLoading(),vc.app.views={},_.defer(function(){vc.shortcodes.fetch({reset:!0}),vc.events.trigger("backendEditor.show")}))},setLoading:function(){this.setNotEmpty(),this.$loading_block.addClass("vc_ui-wp-spinner"),this.$metablock_content.addClass("vc_loading-shortcodes")},close:function(){this.$vcStatus.val("false"),this.$el.hide(),_.isObject(window.editorExpand)&&_.defer(function(){window.editorExpand.on(),window.editorExpand.on()}),this.$post.show(),_.defer(function(){vc.events.trigger("backendEditor.close")})},checkVcStatus:function(){!vc.accessPolicy.can("be_editor")||vc.accessPolicy.can("classic_editor")&&"true"!==this.$vcStatus.val()||this.switchComposer()},setNavTop:function(){this.navTop=this.$nav.length&&this.$nav.offset().top-28},save:function(){e("#wpb-save-post").text(window.i18nLocale.loading),e("#publish").click()},preview:function(){e("#post-preview").click()},navOnScroll:function(){this.$nav=e("#vc_navbar"),this.setNavTop(),this.processScroll(),e(window).unbind("scroll.composer").on("scroll.composer",this.processScroll)},processScroll:function(t){return!0===this.disableFixedNav?void this.$nav.removeClass("vc_subnav-fixed"):((!this.navTop||0>this.navTop)&&this.setNavTop(),this.scrollTop=e(window).scrollTop()+80,void(0<this.navTop&&this.scrollTop>=this.navTop&&!this.isFixed?(this.isFixed=1,this.$nav.addClass("vc_subnav-fixed")):this.scrollTop<=this.navTop&&this.isFixed&&(this.isFixed=0,this.$nav.removeClass("vc_subnav-fixed"))))},buildRelevance:function(){vc.shortcode_relevance={},_.map(vc.map,function(e){_.isObject(e.as_parent)&&_.isString(e.as_parent.only)&&(vc.shortcode_relevance["parent_only_"+e.base]=e.as_parent.only.replace(/\s/,"").split(",")),_.isObject(e.as_parent)&&_.isString(e.as_parent.except)&&(vc.shortcode_relevance["parent_except_"+e.base]=e.as_parent.except.replace(/\s/,"").split(",")),_.isObject(e.as_child)&&_.isString(e.as_child.only)&&(vc.shortcode_relevance["child_only_"+e.base]=e.as_child.only.replace(/\s/,"").split(",")),_.isObject(e.as_child)&&_.isString(e.as_child.except)&&(vc.shortcode_relevance["child_except_"+e.base]=e.as_child.except.replace(/\s/,"").split(","))}),vc.check_relevance=function(e,t){return _.isArray(vc.shortcode_relevance["parent_only_"+e])&&!_.contains(vc.shortcode_relevance["parent_only_"+e],t)?!1:_.isArray(vc.shortcode_relevance["parent_except_"+e])&&_.contains(vc.shortcode_relevance["parent_except_"+e],t)?!1:_.isArray(vc.shortcode_relevance["child_only_"+t])&&!_.contains(vc.shortcode_relevance["child_only_"+t],e)?!1:_.isArray(vc.shortcode_relevance["child_except_"+t])&&_.contains(vc.shortcode_relevance["child_except"+t],e)?!1:!0}}}),e(function(){var t;t=e("#wpb_visual_composer"),t.is("div")&&(vc.app=new vc.visualComposerView({el:t}),vc.accessPolicy.can("be_editor")?vc.app.checkVcStatus():vc.app.$el.remove(),vc.events.on("vc:backend_editor:show",function(){vc.app.show(),vc.app.status="shown"}),vc.events.on("vc:backend_editor:switch",function(){vc.app.switchComposer()}))})}(window.jQuery),function(e){var t=vc.shortcodes;window.VcRowView=vc.shortcode_view.extend({change_columns_layout:!1,events:{'click > .vc_controls [data-vc-control="delete"]':"deleteShortcode","click > .vc_controls .set_columns":"setColumns",'click > .vc_controls [data-vc-control="add"]':"addElement",'click > .vc_controls [data-vc-control="edit"]':"editElement",'click > .vc_controls [data-vc-control="clone"]':"clone",'click > .vc_controls [data-vc-control="move"]':"moveElement",'click > .vc_controls [data-vc-control="toggle"]':"toggleElement","click > .wpb_element_wrapper .vc_controls":"openClosedRow"},convertRowColumns:function(e){var n=e.toString().split(/_/),i=t.where({parent_id:this.model.id}),a=[],s=[],o="";return _.each(n,function(e,n){var c,r,l=_.map(e.toString().split(""),function(e,t){return parseInt(e,10)});o=3<l.length?l[0]+""+l[1]+"/"+l[2]+l[3]:2<l.length?l[0]+"/"+l[1]+l[2]:l[0]+"/"+l[1],s.push(o),c=_.extend(_.isUndefined(i[n])?{}:i[n].get("params"),{width:o}),"undefined"!=typeof window.vc_settings_presets[this.getChildTag()]&&(c=_.extend(c,window.vc_settings_presets[this.getChildTag()])),vc.storage.lock(),r=t.create({shortcode:this.getChildTag(),params:c,parent_id:this.model.id}),_.isObject(i[n])&&_.each(t.where({parent_id:i[n].id}),function(e){vc.storage.lock(),e.save({parent_id:r.id}),vc.storage.lock(),e.trigger("change_parent_id")}),a.push(r)},this),n.length<i.length&&_.each(i.slice(n.length),function(e){_.each(t.where({parent_id:e.id}),function(e){vc.storage.lock(),e.save({parent_id:_.last(a).id}),vc.storage.lock(),e.trigger("change_parent_id")})}),_.each(i,function(e){vc.storage.lock(),e.destroy()},this),this.model.save(),this.setActiveLayoutButton(""+e),s},changeShortcodeParams:function(e){window.VcRowView.__super__.changeShortcodeParams.call(this,e),this.buildDesignHelpers()},designHelpersSelector:"> .vc_controls .column_toggle",buildDesignHelpers:function(){var t,n,i,a,s,o;t=this.model.getParam("css"),n=this.$el.find(this.designHelpersSelector),this.$el.find("> .vc_controls .vc_row_color").remove(),this.$el.find("> .vc_controls .vc_row_image").remove(),o=t.match(/background\-image:\s*url\(([^\)]+)\)/),o&&!_.isUndefined(o[1])&&(i=o[1]),o=t.match(/background\-color:\s*([^\s\;]+)\b/),o&&!_.isUndefined(o[1])&&(a=o[1]),o=t.match(/background:\s*([^\s]+)\b\s*url\(([^\)]+)\)/),o&&!_.isUndefined(o[1])&&(a=o[1],i=o[2]),s=this.model.getParam("el_id"),this.$el.find("> .vc_controls .vc_row-hash-id").remove(),_.isEmpty(s)||e('<span class="vc_row-hash-id"></span>').text("#"+s).insertAfter(n),i&&e('<span class="vc_row_image" style="background-image: url('+i+');" title="'+window.i18nLocale.row_background_image+'"></span>').insertAfter(n),a&&e('<span class="vc_row_color" style="background-color: '+a+'" title="'+window.i18nLocale.row_background_color+'"></span>').insertAfter(n)},addElement:function(e){e&&e.preventDefault(),t.create({shortcode:this.getChildTag(),params:{},parent_id:this.model.id}),this.setActiveLayoutButton(),this.$el.removeClass("vc_collapsed-row")},getChildTag:function(){return"vc_row_inner"===this.model.get("shortcode")?"vc_column_inner":"vc_column"},sortingSelector:"> [data-element_type=vc_column], > [data-element_type=vc_column_inner]",sortingSelectorCancel:".vc-non-draggable-column",setSorting:function(){var t=this;1<this.$content.find(this.sortingSelector).length?this.$content.removeClass("wpb-not-sortable").sortable({forcePlaceholderSize:!0,placeholder:"widgets-placeholder-column",tolerance:"pointer",cursor:"move",items:this.sortingSelector,cancel:this.sortingSelectorCancel,distance:.5,start:function(t,n){e("#visual_composer_content").addClass("vc_sorting-started"),n.placeholder.width(n.item.width())},stop:function(t,n){e("#visual_composer_content").removeClass("vc_sorting-started")},update:function(){var n=e(t.sortingSelector,t.$content);n.each(function(){var t=e(this).data("model"),i=e(this).index();t.set("order",i),n.length-1>i&&vc.storage.lock(),t.save()})},over:function(e,t){t.placeholder.css({maxWidth:t.placeholder.parent().width()}),t.placeholder.removeClass("vc_hidden-placeholder")},beforeStop:function(e,t){}}):(this.$content.hasClass("ui-sortable")&&this.$content.sortable("destroy"),this.$content.addClass("wpb-not-sortable"))},validateCellsList:function(e){var t,n=[],i=e.replace(/\s/g,"").split("+"),a=_.reduce(_.map(i,function(e){if(e.match(/^(vc_)?span\d?$/)){var i=vc_convert_column_span_size(e);return!1===i?1e3:(t=i.split(/\//),n.push(t[0]+""+t[1]),12*parseInt(t[0],10)/parseInt(t[1],10))}return e.match(/^[1-9]|1[0-2]\/[1-9]|1[0-2]$/)?(t=e.split(/\//),n.push(t[0]+""+t[1]),12*parseInt(t[0],10)/parseInt(t[1],10)):1e4}),function(e,t){return t+=e},0);return 12!==a?!1:n.join("_")},setActiveLayoutButton:function(e){e||(e=_.map(vc.shortcodes.where({parent_id:this.model.get("id")}),function(e){var t=e.getParam("width");return t?t.replace(/\//,""):"11"}).join("_")),this.$el.find("> .vc_controls .vc_active").removeClass("vc_active");var t=this.$el.find('> .vc_ [data-cells-mask="'+vc_get_column_mask(e)+'"] [data-cells="'+e+'"], > .vc_controls [data-cells-mask="'+vc_get_column_mask(e)+'"][data-cells="'+e+'"]');t.length?t.addClass("vc_active"):this.$el.find("> .vc_controls [data-cells-mask=custom]").addClass("vc_active")},layoutEditor:function(){return _.isUndefined(vc.row_layout_editor)&&(vc.row_layout_editor=new vc.RowLayoutUIPanelBackendEditor({el:e("#vc_ui-panel-row-layout")})),vc.row_layout_editor},setColumns:function(t){_.isObject(t)&&t.preventDefault();var n=e(t.currentTarget);if("custom"===n.data("cells"))this.layoutEditor().render(this.model).show();else{if(vc.is_mobile){var i=n.parent();i.hasClass("vc_visible")||(i.addClass("vc_visible"),e(document).off("click.vcRowColumnsControl").on("click.vcRowColumnsControl",function(e){i.removeClass("vc_visible")}))}n.is(".vc_active")||(this.change_columns_layout=!0,_.defer(function(e,t){e.convertRowColumns(t)},this,n.data("cells")))}this.$el.removeClass("vc_collapsed-row")},sizeRows:function(){var t=45;e("> .wpb_vc_column, > .wpb_vc_column_inner",this.$content).each(function(){var n=e(this).find("> .wpb_element_wrapper > .wpb_column_container").css({minHeight:0}).height();n>t&&(t=n)}).each(function(){e(this).find("> .wpb_element_wrapper > .wpb_column_container").css({minHeight:t})})},ready:function(e){return window.VcRowView.__super__.ready.call(this,e),this},checkIsEmpty:function(){window.VcRowView.__super__.checkIsEmpty.call(this),this.setSorting()},changedContent:function(e){return this.change_columns_layout?this:void this.setActiveLayoutButton()},moveElement:function(e){e.preventDefault()},toggleElement:function(e){e&&e.preventDefault(),this.$el.toggleClass("vc_collapsed-row")},openClosedRow:function(e){this.$el.removeClass("vc_collapsed-row")},remove:function(){this.$content&&this.$content.data("uiSortable")&&this.$content.sortable("destroy"),this.$content&&this.$content.data("uiDroppable")&&this.$content.droppable("destroy"),delete vc.app.views[this.model.id],window.VcRowView.__super__.remove.call(this)}}),window.VcColumnView=vc.shortcode_view.extend({events:{'click > .vc_controls [data-vc-control="delete"]':"deleteShortcode",'click > .vc_controls [data-vc-control="add"]':"addElement",'click > .vc_controls [data-vc-control="edit"]':"editElement",'click > .vc_controls [data-vc-control="clone"]':"clone","click > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},current_column_width:!1,initialize:function(e){window.VcColumnView.__super__.initialize.call(this,e),_.bindAll(this,"setDropable","dropButton")},ready:function(e){return window.VcColumnView.__super__.ready.call(this,e),this.setDropable(),this},render:function(){return window.VcColumnView.__super__.render.call(this),this.current_column_width=this.model.get("params").width||"1/1",this.$el.attr("data-width",this.current_column_width),this.setEmpty(),this},changeShortcodeParams:function(e){window.VcColumnView.__super__.changeShortcodeParams.call(this,e),this.setColumnClasses(),this.buildDesignHelpers()},designHelpersSelector:"> .vc_controls .column_add",buildDesignHelpers:function(){var t,n,i,a=this.model.getParam("css"),s=this.$el.find(this.designHelpersSelector).get(0);this.$el.find("> .vc_controls .vc_column_color").remove(),this.$el.find("> .vc_controls .vc_column_image").remove(),t=a.match(/background\-image:\s*url\(([^\)]+)\)/),t&&!_.isUndefined(t[1])&&(n=t[1]),t=a.match(/background\-color:\s*([^\s\;]+)\b/),t&&!_.isUndefined(t[1])&&(i=t[1]),t=a.match(/background:\s*([^\s]+)\b\s*url\(([^\)]+)\)/),t&&!_.isUndefined(t[1])&&(i=t[1],n=t[2]),n&&e('<span class="vc_column_image" style="background-image: url('+n+');" title="'+i18nLocale.column_background_image+'"></span>').insertBefore(s),i&&e('<span class="vc_column_color" style="background-color: '+i+'" title="'+i18nLocale.column_background_color+'"></span>').insertBefore(s)},setColumnClasses:function(){var e,t=this.model.getParam("offset")||"",n=this.model.getParam("width")||"1/1",i=this.convertSize(n);this.current_offset_class&&this.$el.removeClass(this.current_offset_class),this.current_column_width!==n&&(e=this.convertSize(this.current_column_width),this.$el.attr("data-width",n).removeClass(e).addClass(i),this.current_column_width=n),t.match(/vc_col\-sm\-\d+/)&&this.$el.removeClass(i),_.isEmpty(t)||this.$el.addClass(t),this.current_offset_class=t},addToEmpty:function(t){t.preventDefault(),e(t.target).hasClass("vc_empty-container")&&this.addElement(t)},setDropable:function(){return this.$content.droppable({greedy:!0,accept:"vc_column_inner"===this.model.get("shortcode")?".dropable_el":".dropable_el,.dropable_row",hoverClass:"wpb_ui-state-active",drop:this.dropButton}),this},dropButton:function(e,t){t.draggable.is("#wpb-add-new-element")?new vc.element_block_view({model:{position_to_add:"end"}}).show(this):t.draggable.is("#wpb-add-new-row")&&this.createRow()},setEmpty:function(){this.$el.addClass("vc_empty-column"),"edit"!==vc_user_access().getState("shortcodes")&&this.$content.addClass("vc_empty-container")},unsetEmpty:function(){this.$el.removeClass("vc_empty-column"),this.$content.removeClass("vc_empty-container")},checkIsEmpty:function(){t.where({parent_id:this.model.id}).length?this.unsetEmpty():this.setEmpty(),window.VcColumnView.__super__.checkIsEmpty.call(this)},createRow:function(){var e,n,i;return e={},"undefined"!=typeof window.vc_settings_presets.vc_row_inner&&(e=_.extend(e,window.vc_settings_presets.vc_row_inner)),n={width:"1/1"},"undefined"!=typeof window.vc_settings_presets.vc_column_inner&&(n=_.extend(n,window.vc_settings_presets.vc_column_inner)),i=t.create({shortcode:"vc_row_inner",params:e,parent_id:this.model.id}),t.create({shortcode:"vc_column_inner",params:n,parent_id:i.id}),i},convertSize:function(e){var t="vc_col-sm-",n=e?e.split("/"):[1,1],i=_.range(1,13),a=!_.isUndefined(n[0])&&0<=_.indexOf(i,parseInt(n[0],10))?parseInt(n[0],10):!1,s=!_.isUndefined(n[1])&&0<=_.indexOf(i,parseInt(n[1],10))?parseInt(n[1],10):!1;return!1!==a&&!1!==s?t+12*a/s:t+"12"},deleteShortcode:function(e){var t,n=this.model.get("parent_id");_.isObject(e)&&e.preventDefault();var i=confirm(window.i18nLocale.press_ok_to_delete_section);return!0!==i?!1:(this.model.destroy(),void(n&&!vc.shortcodes.where({parent_id:n}).length?(t=vc.shortcodes.get(n),_.contains(["vc_column","vc_column_inner"],t.get("shortcode"))||t.destroy()):n&&(t=vc.shortcodes.get(n),t&&t.view&&t.view.setActiveLayoutButton&&t.view.setActiveLayoutButton())))},remove:function(){this.$content&&this.$content.data("uiSortable")&&this.$content.sortable("destroy"),this.$content&&this.$content.data("uiDroppable")&&this.$content.droppable("destroy"),delete vc.app.views[this.model.id],window.VcColumnView.__super__.remove.call(this)}}),window.VcAccordionView=vc.shortcode_view.extend({adding_new_tab:!1,events:{'click .tab_controls:not(".nested_tab_controls") .add_tab':"addTab","click > .vc_controls .column_delete, > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .column_edit, > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .column_clone,> .vc_controls .vc_control-btn-clone":"clone"},render:function(){return window.VcAccordionView.__super__.render.call(this),vc_user_access().shortcodeAll("vc_accordion_tab")?(this.$content.sortable({axis:"y",handle:"h3",stop:function(t,n){n.item.prev().triggerHandler("focusout"),e(this).find("> .wpb_sortable").each(function(){var t=e(this).data("model");t.save({order:e(this).index()})})}}),this):(this.$el.find(".tab_controls").hide(),this)},changeShortcodeParams:function(e){var t,n;window.VcAccordionView.__super__.changeShortcodeParams.call(this,e),t=e.get("params"),n=_.isString(t.collapsible)&&"yes"===t.collapsible?!0:!1,this.$content.hasClass("ui-accordion")&&this.$content.accordion("option","collapsible",n)},changedContent:function(e){this.$content.hasClass("ui-accordion")&&this.$content.accordion("destroy");var t=_.isString(this.model.get("params").collapsible)&&"yes"===this.model.get("params").collapsible?!0:!1;this.$content.accordion({header:"h3:not('.wpb_vc_accordion_tab h3')",navigation:!1,autoHeight:!0,heightStyle:"content",collapsible:t,active:!1===this.adding_new_tab&&!0!==e.model.get("cloned")?0:e.$el.index()}),this.adding_new_tab=!1},addTab:function(e){return e.preventDefault(),vc_user_access().shortcodeAll("vc_accordion_tab")?(this.adding_new_tab=!0,void vc.shortcodes.create({shortcode:"vc_accordion_tab",params:{title:window.i18nLocale.section},parent_id:this.model.id})):!1},_loadDefaults:function(){window.VcAccordionView.__super__._loadDefaults.call(this)}}),window.VcAccordionTabView=window.VcColumnView.extend({events:{"click > [data-element_type] > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > [data-element_type] >  .vc_controls .vc_control-btn-prepend":"addElement","click > [data-element_type] >  .vc_controls .vc_control-btn-edit":"editElement","click > [data-element_type] > .vc_controls .vc_control-btn-clone":"clone","click > [data-element_type] > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},setContent:function(){this.$content=this.$el.find("> [data-element_type] > .wpb_element_wrapper > .vc_container_for_children")},changeShortcodeParams:function(e){var t;window.VcAccordionTabView.__super__.changeShortcodeParams.call(this,e),t=e.get("params"),_.isObject(t)&&_.isString(t.title)&&this.$el.find("> h3 .tab-label").text(t.title)},setEmpty:function(){e("> [data-element_type]",this.$el).addClass("vc_empty-column"),"edit"!==vc_user_access().getState("shortcodes")&&this.$content.addClass("vc_empty-container")},unsetEmpty:function(){e("> [data-element_type]",this.$el).removeClass("vc_empty-column"),this.$content.removeClass("vc_empty-container")}}),window.VcNestedAccordionView=vc.shortcode_view.extend({adding_new_tab:!1,events:{"click .nested_tab_controls .add_tab":"addTab","click > .vc_controls .column_delete, > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .column_edit, > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .column_clone,> .vc_controls .vc_control-btn-clone":"clone"},render:function(){return window.VcNestedAccordionView.__super__.render.call(this),this.$content.sortable({axis:"y",handle:"h3",stop:function(t,n){n.item.prev().triggerHandler("focusout"),e(this).find("> .wpb_sortable").each(function(){var t=e(this).data("model");t.save({order:e(this).index()})})}}),this},changeShortcodeParams:function(e){window.VcNestedAccordionView.__super__.changeShortcodeParams.call(this,e);var t=_.isString(this.model.get("params").collapsible)&&"yes"===this.model.get("params").collapsible?!0:!1;this.$content.hasClass("ui-accordion")&&this.$content.accordion("option","collapsible",t)},changedContent:function(e){this.$content.hasClass("ui-accordion")&&this.$content.accordion("destroy");var t=_.isString(this.model.get("params").collapsible)&&"yes"===this.model.get("params").collapsible?!0:!1;this.$content.accordion({header:"h3",navigation:!1,autoHeight:!0,heightStyle:"content",collapsible:t,active:this.adding_new_tab===!1&&e.model.get("cloned")!==!0?0:e.$el.index()}),this.adding_new_tab=!1},addTab:function(e){this.adding_new_tab=!0,e.preventDefault(),vc.shortcodes.create({shortcode:"vc_nested_accordion_tab",params:{title:window.i18nLocale.section},parent_id:this.model.id})},_loadDefaults:function(){window.VcNestedAccordionView.__super__._loadDefaults.call(this)}}),window.VcNestedAccordionTabView=window.VcColumnView.extend({events:{"click > [data-element_type] > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > [data-element_type] >  .vc_controls .vc_control-btn-prepend":"addElement","click > [data-element_type] >  .vc_controls .vc_control-btn-edit":"editElement","click > [data-element_type] > .vc_controls .vc_control-btn-clone":"clone","click > [data-element_type] > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},setContent:function(){this.$content=this.$el.find("> [data-element_type] > .wpb_element_wrapper > .vc_container_for_children")},changeShortcodeParams:function(e){var t=e.get("params");window.VcNestedAccordionTabView.__super__.changeShortcodeParams.call(this,e),_.isObject(t)&&_.isString(t.title)&&this.$el.find("> h3 .tab-label").text(t.title)},setEmpty:function(){e("> [data-element_type]",this.$el).addClass("vc_empty-column"),this.$content.addClass("vc_empty-container")},unsetEmpty:function(){e("> [data-element_type]",this.$el).removeClass("vc_empty-column"),this.$content.removeClass("vc_empty-container")}}),window.VcMessageView=vc.shortcode_view.extend({changeShortcodeParams:function(e){var t,n;window.VcMessageView.__super__.changeShortcodeParams.call(this,e),t=e.get("params"),n=this.$el.find("> .wpb_element_wrapper").removeClass(_.values(this.params.color.value).join(" ")),_.isObject(t)&&_.isString(t.color)&&n.addClass(t.color)}}),window.VcMessageView_Backend=vc.shortcode_view.extend({changeShortcodeParams:function(t){var n,i,a,s,o;switch(window.VcMessageView_Backend.__super__.changeShortcodeParams.call(this,t),n=t.get("params"),i=this.$el.find("> .wpb_element_wrapper"),a=["vc_message_box"],_.isUndefined(n.message_box_style)&&(n.message_box_style="classic"),_.isUndefined(n.message_box_color)&&(n.message_box_color="alert-info"),n.style?"3d"===n.style?(n.message_box_style="3d",n.style="rounded"):"outlined"===n.style?(n.message_box_style="outline",n.style="rounded"):"square_outlined"===n.style&&(n.message_box_style="outline",n.style="square"):n.style="rounded",a.push("vc_message_box-"+n.style),n.message_box_style&&a.push("vc_message_box-"+n.message_box_style),i.attr("class","wpb_element_wrapper"),i.find(".vc_message_box-icon").remove(),s=_.isUndefined(n["icon_"+n.icon_type])?"fa fa-info-circle":n["icon_"+n.icon_type],
o=n.color,n.color){case"info":s="fa fa-info-circle";break;case"alert-info":s="vc_pixel_icon vc_pixel_icon-info";break;case"success":s="fa fa-check";break;case"alert-success":s="vc_pixel_icon vc_pixel_icon-tick";break;case"warning":s="fa fa-exclamation-triangle";break;case"alert-warning":s="vc_pixel_icon vc_pixel_icon-alert";break;case"danger":s="fa fa-times";break;case"alert-danger":s="vc_pixel_icon vc_pixel_icon-explanation";break;case"alert-custom":default:o=n.message_box_color}a.push("vc_color-"+o),i.addClass(a.join(" ")),i.prepend(e('<div class="vc_message_box-icon"><i class="'+s+'"></i></div>'))}}),window.VcTextSeparatorView=vc.shortcode_view.extend({changeShortcodeParams:function(t){var n,i;window.VcTextSeparatorView.__super__.changeShortcodeParams.call(this,t),n=t.get("params");var a=this.$el.find("> .wpb_element_wrapper");_.isObject(n)&&_.isString(n.title_align)&&a.removeClass(_.values(this.params.title_align.value).join(" ")).addClass(n.title_align),_.isObject(n)&&_.isString(n.add_icon)&&"true"===n.add_icon&&(i=e('<i class="'+n["i_icon_"+n.i_type]+'" ></i>'),i.prependTo(a.find("[name=title]")),i.after(" "))}}),window.VcCallToActionView=vc.shortcode_view.extend({changeShortcodeParams:function(e){var t;window.VcCallToActionView.__super__.changeShortcodeParams.call(this,e),t=e.get("params"),_.isObject(t)&&_.isString(t.position)&&this.$el.find("> .wpb_element_wrapper").removeClass(_.values(this.params.position.value).join(" ")).addClass(t.position)}}),window.VcCallToActionView3=vc.shortcode_view.extend({changeShortcodeParams:function(e){var t,n,i;window.VcCallToActionView3.__super__.changeShortcodeParams.call(this,e),t=_.extend({add_icon:"",i_type:""},e.get("params")),i=this.$el.find(".vc_admin_label.admin_label_i_type"),_.isEmpty(t.add_icon)?i.addClass("hidden-label").hide():_.isEmpty(t.i_type)||_.isEmpty(t["i_icon_"+t.i_type])||(n=vc_toTitleCase(t.i_type)+' - <i class="'+t["i_icon_"+t.i_type]+'"></i>',i.html("<label>"+i.find("label").text()+"</label>: "+n),i.show().removeClass("hidden-label"))}}),window.VcToggleView=vc.shortcode_view.extend({events:function(){return _.extend({"click .vc_toggle_title":"toggle","click .toggle_title":"toggle"},window.VcToggleView.__super__.events)},toggle:function(t){t&&t.preventDefault(),e(t.currentTarget).toggleClass("vc_toggle_title_active"),e(".vc_toggle_content",this.$el).slideToggle(500)},changeShortcodeParams:function(t){var n;window.VcToggleView.__super__.changeShortcodeParams.call(this,t),n=t.get("params"),_.isObject(n)&&_.isString(n.open)&&"true"===n.open&&e(".vc_toggle_title",this.$el).addClass("vc_toggle_title_active").next().show()}}),window.VcButtonView=vc.shortcode_view.extend({events:function(){return _.extend({"click button":"buttonClick"},window.VcToggleView.__super__.events)},buttonClick:function(e){e.preventDefault()},changeShortcodeParams:function(e){var t;if(window.VcButtonView.__super__.changeShortcodeParams.call(this,e),t=e.get("params"),_.isObject(t)){var n;n=t.color+" "+t.size+" "+t.icon,this.$el.find(".wpb_element_wrapper").removeClass(n),this.$el.find("button.title").attr({"class":"title textfield wpb_button "+n}),"none"!==t.icon&&0===this.$el.find("button i.icon").length?this.$el.find("button.title").append('<i class="icon"></i>'):this.$el.find("button.title i.icon").remove()}}}),window.VcButton2View=vc.shortcode_view.extend({events:function(){return _.extend({"click button":"buttonClick"},window.VcToggleView.__super__.events)},buttonClick:function(e){e.preventDefault()},changeShortcodeParams:function(e){var t;if(window.VcButton2View.__super__.changeShortcodeParams.call(this,e),t=e.get("params"),_.isObject(t)){var n;n=(t.color?"vc_btn_"+t.color:"")+" "+(t.color?"vc_btn-"+t.color:"")+" "+(t.size?"vc_btn-"+t.size:"")+" "+(t.size?"vc_btn_"+t.size:"")+" "+(t.style?"vc_btn_"+t.style:""),this.$el.find(".wpb_element_wrapper").removeClass(n),this.$el.find("button.title").attr({"class":"title textfield vc_btn  "+n})}}}),window.VcButton3View=vc.shortcode_view.extend({buttonTemplate:!1,buttonTemplateCompiled:!1,$wrapper:!1,events:function(){return _.extend({"click .vc_btn3":"buttonClick"},window.VcToggleView.__super__.events)},buttonClick:function(e){e.preventDefault()},changeShortcodeParams:function(t){var n;if(window.VcButton3View.__super__.changeShortcodeParams.call(this,t),n=_.extend({},t.get("params")),this.buttonTemplate||(this.buttonTemplate=this.$el.find(".vc_btn3-container").html(),this.buttonTemplateCompiled=vc.template(this.buttonTemplate,vc.templateOptions.custom)),this.$wrapper||(this.$wrapper=this.$el.find(".wpb_element_wrapper")),_.isObject(n)){n.title&&_.isEmpty(n.title.trim())&&(n.title='<span class="vc_btn3-placeholder">&nbsp;</span>'),"custom"===n.style?(n.color=void 0,_.isEmpty(n.custom_background)&&_.isEmpty(n.custom_text)&&(n.color="grey")):"outline-custom"===n.style&&(n.color=void 0,_.isEmpty(n.outline_custom_color)&&_.isEmpty(n.outline_custom_hover_background)&&_.isEmpty(n.outline_custom_hover_text)&&(n.style="outline",n.color="grey"));var i=e(this.buttonTemplateCompiled({params:n}));"custom"===n.style?("undefined"!==n.custom_background&&i.css("background-color",n.custom_background),"undefined"!==n.custom_text&&i.css("color",n.custom_text)):"outline-custom"===n.style&&i.css({"background-color":"transparent","border-color":n.outline_custom_color,color:n.outline_custom_color}).hover(function(){e(this).css({"background-color":n.outline_custom_hover_background,"border-color":n.outline_custom_hover_background,color:n.outline_custom_hover_text})},function(){e(this).css({"background-color":"transparent","border-color":n.outline_custom_color,color:n.outline_custom_color})}),this.$wrapper.find(".vc_btn3-container").html(i)}}}),window.VcTabsView=vc.shortcode_view.extend({new_tab_adding:!1,events:{'click .tabs_controls .add_tab:not(".nested_tab_controls .add_tab")':"addTab","click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone"},initialize:function(e){window.VcTabsView.__super__.initialize.call(this,e),_.bindAll(this,"stopSorting")},render:function(){return window.VcTabsView.__super__.render.call(this),this.$tabs=this.$el.find(".wpb_tabs_holder"),this.createAddTabButton(),this},ready:function(e){window.VcTabsView.__super__.ready.call(this,e)},createAddTabButton:function(){var t=Date.now()+"-"+Math.floor(11*Math.random());this.$tabs.append('<div id="new-tab-'+t+'" class="new_element_button"></div>'),this.$add_button=e('<li class="add_tab_block"><a href="#new-tab-'+t+'" class="add_tab" title="'+window.i18nLocale.add_tab+'"></a></li>').appendTo(this.$tabs.find(".tabs_controls")),vc_user_access().shortcodeAll("vc_tab")||this.$add_button.hide()},addTab:function(e){if(e.preventDefault(),!vc_user_access().shortcodeAll("vc_tab"))return!1;this.new_tab_adding=!0;var t=window.i18nLocale.tab,n=this.$tabs.find("[data-element_type=vc_tab]").length,i=Date.now()+"-"+n+"-"+Math.floor(11*Math.random());return vc.shortcodes.create({shortcode:"vc_tab",params:{title:t,tab_id:i},parent_id:this.model.id}),!1},stopSorting:function(t,n){var i;this.$tabs.find("ul.tabs_controls li:not(.add_tab_block)").each(function(t){e(this).find("a").attr("href").replace("#",""),i=vc.shortcodes.get(e("[id="+e(this).attr("aria-controls")+"]").data("model-id")),vc.storage.lock(),i.save({order:e(this).index()})}),i&&i.save()},changedContent:function(t){var n=t.model.get("params");if(this.$tabs.hasClass("ui-tabs")||(this.$tabs.tabs({activate:function(t,n){var i=n.newPanel.selector.replace(/\\/gi,"").replace("#",""),a=n.oldPanel.selector.replace(/\\/gi,"").replace("#","");"http"==i.substr(4,4)&&e("[id='"+i+"']").css("display","block"),"http"==a.substr(4,4)&&e("[id='"+a+"']").css("display","none")},select:function(t,n){return!e(n.tab).hasClass("add_tab")}}),this.$tabs.find(".ui-tabs-nav").prependTo(this.$tabs),vc_user_access().shortcodeAll("vc_tab")&&this.$tabs.find(".ui-tabs-nav").sortable({axis:"vc_tour"===this.$tabs.closest("[data-element_type]").data("element_type")?"y":"x",update:this.stopSorting,items:"> li:not(.add_tab_block)"})),!0===t.model.get("cloned")){var i=(t.model.get("cloned_from"),e(".tabs_controls > .add_tab_block",this.$content)),a=e("<li><a href='#tab-"+n.tab_id+"'>"+n.title+"</a></li>").insertBefore(i);this.$tabs.tabs("refresh"),this.$tabs.tabs("option","active",a.index())}else e("<li><a href='#tab-"+n.tab_id+"'>"+n.title+"</a></li>").insertBefore(this.$add_button),this.$tabs.tabs("refresh"),this.$tabs.tabs("option","active",this.new_tab_adding?e(".ui-tabs-nav li",this.$content).length-2:0);this.new_tab_adding=!1},cloneModel:function(e,n,i){var a,s,o,c;return a=_.isBoolean(i)&&!0===i?e.get("order"):parseFloat(e.get("order"))+vc.clone_index,o=_.extend({},e.get("params")),c=e.get("shortcode"),"vc_tab"===c&&_.extend(o,{tab_id:Date.now()+"-"+this.$tabs.find("[data-element-type=vc_tab]").length+"-"+Math.floor(11*Math.random())}),s=t.create({shortcode:c,id:vc_guid(),parent_id:n,order:a,cloned:"vc_tab"!==c,cloned_from:e.toJSON(),params:o}),_.each(t.where({parent_id:e.id}),function(e){this.cloneModel(e,s.get("id"),!0)},this),s}}),window.VcNestedTabsView=vc.shortcode_view.extend({new_tab_adding:!1,events:{"click .add_tab":"addTab","click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone"},initialize:function(e){window.VcNestedTabsView.__super__.initialize.call(this,e),_.bindAll(this,"stopSorting")},render:function(){return window.VcNestedTabsView.__super__.render.call(this),this.$tabs=this.$el.find(".wpb_nested_tabs_holder"),this.createAddTabButton(),this},ready:function(e){window.VcNestedTabsView.__super__.ready.call(this,e)},createAddTabButton:function(){var t=+new Date+"-"+Math.floor(11*Math.random());this.$tabs.append('<div id="new-tab-'+t+'" class="new_element_button"></div>'),this.$add_button=e('<li class="add_tab_block"><a href="#new-tab-'+t+'" class="add_tab" title="'+window.i18nLocale.add_tab+'"></a></li>').appendTo(this.$tabs.find(".nested_tabs_controls"))},addTab:function(e){e.preventDefault(),this.new_tab_adding=!0;var t=window.i18nLocale.tab,n=this.$tabs.find("[data-element_type=vc_nested_tab]").length,i=+new Date+"-"+n+"-"+Math.floor(11*Math.random());return vc.shortcodes.create({shortcode:"vc_nested_tab",params:{title:t,tab_id:i},parent_id:this.model.id}),!1},stopSorting:function(t,n){var i;this.$tabs.find("ul.nested_tabs_controls li:not(.add_tab_block)").each(function(t){e(this).find("a").attr("href").replace("#","");i=vc.shortcodes.get(e("[id="+e(this).attr("aria-controls")+"]").data("model-id")),vc.storage.lock(),i.save({order:e(this).index()})}),i.save()},changedContent:function(t){var n=t.model.get("params");if(this.$tabs.hasClass("ui-tabs")||(this.$tabs.tabs({activate:function(t,n){var i=n.newPanel.selector.replace(/\\/gi,"").replace("#",""),a=n.oldPanel.selector.replace(/\\/gi,"").replace("#","");"http"==i.substr(4,4)&&e("[id='"+i+"']").css("display","block"),"http"==a.substr(4,4)&&e("[id='"+a+"']").css("display","none")},select:function(t,n){return e(n.tab).hasClass("add_tab")?!1:!0}}),this.$tabs.find(".ui-tabs-nav").prependTo(this.$tabs),this.$tabs.find(".ui-tabs-nav").sortable({axis:"vc_tour"==this.$tabs.closest("[data-element_type]").data("element_type")?"y":"x",update:this.stopSorting,items:"> li:not(.add_tab_block)"})),t.model.get("cloned")===!0){var i,a=t.model.get("cloned_from"),s=e('[href="#tab-'+a.params.tab_id+'"]',this.$content).parent();i="undefined"!=typeof s.prop("tagName")?e("<li><a href='#tab-"+n.tab_id+"'>"+n.title+"</a></li>").insertAfter(s):e("<li><a href='#tab-"+n.tab_id+"'>"+n.title+"</a></li>").insertBefore(this.$add_button),this.$tabs.tabs("refresh"),this.$tabs.tabs("option","active",i.index())}else e("<li><a href='#tab-"+n.tab_id+"'>"+n.title+"</a></li>").insertBefore(this.$add_button),this.$tabs.tabs("refresh"),this.$tabs.tabs("option","active",this.new_tab_adding?e(".nested_tabs_controls li",this.$content).length-2:0);this.new_tab_adding=!1},cloneModel:function(e,n,i){var a,s=_.isBoolean(i)&&i===!0?e.get("order"):parseFloat(e.get("order"))+vc.clone_index,o=_.extend({},e.get("params"));return"vc_nested_tab"===e.get("shortcode")&&_.extend(o,{tab_id:+new Date+"-"+this.$tabs.find("[data-element-type=vc_nested_tab]").length+"-"+Math.floor(11*Math.random())}),a=t.create({shortcode:e.get("shortcode"),id:vc_guid(),parent_id:n,order:s,cloned:"vc_nested_tab"!==e.get("shortcode"),cloned_from:e.toJSON(),params:o}),_.each(t.where({parent_id:e.id}),function(e){this.cloneModel(e,a.get("id"),!0)},this),a}}),window.VcTabView=window.VcColumnView.extend({events:{"click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-prepend":"addElement","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone","click > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},render:function(){var e=this.model.get("params");return window.VcTabView.__super__.render.call(this),e.tab_id||(e.tab_id=Date.now()+"-"+Math.floor(11*Math.random()),this.model.save("params",e)),this.id="tab-"+e.tab_id,this.$el.attr("id",this.id),this},ready:function(e){return window.VcTabView.__super__.ready.call(this,e),this.$tabs=this.$el.closest(".wpb_tabs_holder"),this.model.get("params"),this},changeShortcodeParams:function(t){var n;window.VcTabView.__super__.changeShortcodeParams.call(this,t),n=t.get("params"),_.isObject(n)&&_.isString(n.title)&&_.isString(n.tab_id)&&e(".ui-tabs-nav [href='#tab-"+n.tab_id+"']").text(n.title)},deleteShortcode:function(t){_.isObject(t)&&t.preventDefault();var n=confirm(window.i18nLocale.press_ok_to_delete_section),i=this.model.get("parent_id");if(!0!==n)return!1;if(this.model.destroy(),!vc.shortcodes.where({parent_id:i}).length){var a=vc.shortcodes.get(i);return a.destroy(),!1}var s=this.model.get("params"),o=e("[href=#tab-"+s.tab_id+"]",this.$tabs).parent().index();e("[href=#tab-"+s.tab_id+"]").parent().remove();var c=this.$tabs.find(".ui-tabs-nav li:not(.add_tab_block)").length;c>0&&this.$tabs.tabs("refresh"),c>o?this.$tabs.tabs("option","active",o):c>0&&this.$tabs.tabs("option","active",c-1)},cloneModel:function(e,n,i){var a,s,o,c;return a=_.isBoolean(i)&&!0===i?e.get("order"):parseFloat(e.get("order"))+vc.clone_index,o=_.extend({},e.get("params")),c=e.get("shortcode"),"vc_tab"===c&&_.extend(o,{tab_id:Date.now()+"-"+this.$tabs.find("[data-element_type=vc_tab]").length+"-"+Math.floor(11*Math.random())}),s=t.create({shortcode:c,parent_id:n,order:a,cloned:!0,cloned_from:e.toJSON(),params:o}),_.each(t.where({parent_id:e.id}),function(e){this.cloneModel(e,s.get("id"),!0)},this),s}}),window.VcNestedTabView=window.VcColumnView.extend({events:{"click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-prepend":"addElement","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone","click > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},render:function(){var e=this.model.get("params");return window.VcNestedTabView.__super__.render.call(this),e.tab_id&&-1==e.tab_id.indexOf("def")||(e.tab_id=+new Date+"-"+Math.floor(11*Math.random()),this.model.save("params",e)),this.id="tab-"+e.tab_id,this.$el.attr("id",this.id),this},ready:function(e){window.VcNestedTabView.__super__.ready.call(this,e),this.$tabs=this.$el.closest(".wpb_nested_tabs_holder");this.model.get("params");return this},changeShortcodeParams:function(t){var n=t.get("params");window.VcNestedTabView.__super__.changeShortcodeParams.call(this,t),_.isObject(n)&&_.isString(n.title)&&_.isString(n.tab_id)&&e('.ui-tabs-nav [href="#tab-'+n.tab_id+'"]').text(n.title)},deleteShortcode:function(t){_.isObject(t)&&t.preventDefault();var n=confirm(window.i18nLocale.press_ok_to_delete_section),i=this.model.get("parent_id");if(n!==!0)return!1;if(this.model.destroy(),!vc.shortcodes.where({parent_id:i}).length)return vc.shortcodes.get(i).destroy(),!1;var a=this.model.get("params"),s=e('[href="#tab-'+a.tab_id+'"]',this.$tabs).parent().index();e('[href="#tab-'+a.tab_id+'"]').parent().remove();var o=this.$tabs.find(".ui-tabs-nav li:not(.add_tab_block)").length;o>0&&this.$tabs.tabs("refresh"),o>s?this.$tabs.tabs("option","active",s):o>0&&this.$tabs.tabs("option","active",o-1)},cloneModel:function(e,n,i){var a=_.isBoolean(i)&&i===!0?e.get("order"):parseFloat(e.get("order"))+vc.clone_index,s=_.extend({},e.get("params"));"vc_nested_tab"===e.get("shortcode")&&_.extend(s,{tab_id:+new Date+"-"+this.$tabs.find("[data-element_type=vc_nested_tab]").length+"-"+Math.floor(11*Math.random())});var o=t.create({shortcode:e.get("shortcode"),parent_id:n,order:a,cloned:!0,cloned_from:e.toJSON(),params:s});return _.each(t.where({parent_id:e.id}),function(e){this.cloneModel(e,o.id,!0)},this),o}}),window.VcIconElementView_Backend=vc.shortcode_view.extend({changeShortcodeParams:function(e){var t,n,i,a;t=e.get("shortcode"),n=e.get("params"),i=vc.map[t],_.isArray(i.params)&&_.each(i.params,function(e){if(!_.isUndefined(e.admin_label)&&e.admin_label){var t,i,a,s;t=e.param_name,i=n[t],a=this.$el.find("> .wpb_element_wrapper"),s=a.children(".admin_label_"+t),s.length&&(""===i||_.isUndefined(i)?s.hide().addClass("hidden-label"):("type"===t&&(_.isUndefined(n["icon_"+i])||(i=vc_toTitleCase(i)+" - <i class='"+n["icon_"+i]+"'></i>")),s.html("<label>"+s.find("label").text()+"</label>: "+i),s.show().removeClass("hidden-label")))}},this),a=vc.app.views[this.model.get("parent_id")],!1!==e.get("parent_id")&&_.isObject(a)&&a.checkIsEmpty()}}),window.VcBackendTtaViewInterface=vc.shortcode_view.extend({sortableSelector:!1,$sortable:!1,$navigation:!1,defaultSectionTitle:window.i18nLocale.tab,sortableUpdateModelIdSelector:"data-vc-target-model-id",activeClass:"vc_active",sortingPlaceholder:"vc_placeholder",events:{"click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone","click > .vc_controls .vc_control-btn-prepend":"clickPrependSection","click .vc_tta-section-append":"clickAppendSection"},initialize:function(e){window.VcBackendTtaViewInterface.__super__.initialize.call(this,e),_.bindAll(this,"updateSorting")},render:function(){return window.VcBackendTtaViewInterface.__super__.render.call(this),this.$el.addClass("vc_tta-container vc_tta-o-non-responsive"),this},setContent:function(){this.$content=this.$el.find("> .wpb_element_wrapper .vc_tta-panels")},clickAppendSection:function(e){e.preventDefault(),this.addSection()},clickPrependSection:function(e){e.preventDefault(),this.addSection(!0)},addSection:function(e){var t,n,i;return t=this.defaultSectionTitle,n={shortcode:"vc_tta_section",params:{title:t},parent_id:this.model.get("id"),order:_.isBoolean(e)&&e?vc.add_element_block_view.getFirstPositionIndex():vc.shortcodes.getNextOrder(),prepend:e},i=vc.shortcodes.create(n)},findSection:function(e){return this.$content.children('[data-model-id="'+e+'"]')},getIndex:function(e){return e.index()},buildSortable:function(e){return"edit"!==vc_user_access().getState("shortcodes")&&vc_user_access().shortcodeAll("vc_tta_section")?e.sortable({forcePlaceholderSize:!0,placeholder:this.sortingPlaceholder,helper:this.renderSortingPlaceholder,scroll:!0,cursor:"move",cursorAt:{top:20,left:16},start:function(e,t){},over:function(e,t){},stop:function(e,t){t.item.attr("style","")},update:this.updateSorting,items:this.sortableSelector}):!1},updateSorting:function(t,n){var i;return vc_user_access().shortcodeAll("vc_tta_section")?(i=this,this.$sortable.find(this.sortableSelector).each(function(){var t,n,a;a=e(this),n=a.attr(i.sortableUpdateModelIdSelector),t=vc.shortcodes.get(n),vc.storage.lock(),t.save({order:i.getIndex(a)})}),vc.storage.unlock(),void vc.storage.save()):!1},makeFirstSectionActive:function(){this.$content.children(":first-child").addClass(this.activeClass)},checkForActiveSection:function(){var e;e=this.$content.children("."+this.activeClass),e.length||this.makeFirstSectionActive()},changeActiveSection:function(e){this.$content.children(".vc_tta-panel."+this.activeClass).removeClass(this.activeClass),this.findSection(e).addClass(this.activeClass)},changedContent:function(e){var t;return t=window.VcBackendTtaViewInterface.__super__.changedContent.call(this,e),this.checkForActiveSection(),this.buildSortable(this.$sortable),t},notifySectionChanged:function(e){var t,n;t=e.get("view"),_.isObject(t)&&(n=e.getParam("title"),_.isString(n)&&n.length||(n=this.defaultSectionTitle),t.$el.find(".vc_tta-panel-title a .vc_tta-title-text").text(n))},notifySectionRendered:function(e){},getNextTab:function(e){var t,n,i,a;return a=this.$navigation.children(),t=a.length-2,n=e.index(),i=n!==t?a.eq(n+1):a.eq(n-1)},renderSortingPlaceholder:function(e,t){return vc.app.renderPlaceholder(e,t)}}),window.VcBackendTtaTabsView=window.VcBackendTtaViewInterface.extend({sortableSelector:"> [data-vc-tab]",sortableSelectorCancel:".vc-non-draggable-container",sortablePlaceholderClass:"vc_placeholder-tta-tab",navigationSectionTemplate:null,navigationSectionTemplateParsed:null,$navigationSectionAdd:null,sortingPlaceholder:"vc_placeholder-tab vc_tta-tab",render:function(){return window.VcBackendTtaTabsView.__super__.render.call(this),this.$navigation=this.$el.find("> .wpb_element_wrapper .vc_tta-tabs-list"),this.$sortable=this.$navigation,this.$navigationSectionAdd=this.$navigation.children(".vc_tta-tab:first-child"),this.setNavigationSectionTemplate(this.$navigationSectionAdd.prop("outerHTML")),vc_user_access().shortcodeAll("vc_tta_section")?this.$navigationSectionAdd.addClass("vc_tta-section-append").removeAttr("data-vc-target-model-id").removeAttr("data-vc-tab").find("[data-vc-target]").html('<i class="vc_tta-controls-icon vc_tta-controls-icon-plus"></i>').removeAttr("data-vc-tabs").removeAttr("data-vc-target").removeAttr("data-vc-target-model-id").removeAttr("data-vc-toggle"):this.$navigationSectionAdd.hide(),this},setNavigationSectionTemplate:function(e){this.navigationSectionTemplate=e,this.navigationSectionTemplateParsed=vc.template(this.navigationSectionTemplate,vc.templateOptions.custom)},getNavigationSectionTemplate:function(){return this.navigationSectionTemplate},getParsedNavigationSectionTemplate:function(e){return this.navigationSectionTemplateParsed(e)},changeNavigationSectionTitle:function(e,t){this.findNavigationTab(e).find("[data-vc-target]").text(t)},changeActiveSection:function(e){window.VcBackendTtaTabsView.__super__.changeActiveSection.call(this,e),this.$navigation.children("."+this.activeClass).removeClass(this.activeClass),this.findNavigationTab(e).addClass(this.activeClass)},notifySectionRendered:function(t){var n,i,a,s;window.VcBackendTtaTabsView.__super__.notifySectionRendered.call(this,t),i=t.getParam("title"),n=e(this.getParsedNavigationSectionTemplate({model_id:t.get("id"),section_title:_.isString(i)&&0<i.length?i:this.defaultSectionTitle})),t.get("cloned")?(s=t.get("cloned_from"),_.isObject(s)&&(a=this.$navigation.children('[data-vc-target-model-id="'+s.id+'"]'),a.length?n.insertAfter(a):n.insertBefore(this.$navigation.children(".vc_tta-section-append")))):t.get("prepend")?n.insertBefore(this.$navigation.children(":first-child")):n.insertBefore(this.$navigation.children(":last-child"))},notifySectionChanged:function(e){var t;window.VcBackendTtaTabsView.__super__.notifySectionChanged.call(this,e),t=e.getParam("title"),_.isString(t)&&t.length||(t=this.defaultSectionTitle),this.changeNavigationSectionTitle(e.get("id"),t),e.view.$el.find("> .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_element-name").removeClass("vc_element-move")},makeFirstSectionActive:function(){var e;e=this.$navigation.children(":first-child:not(.vc_tta-section-append)").addClass(this.activeClass),e.length&&this.findSection(e.data("vc-target-model-id")).addClass(this.activeClass)},findNavigationTab:function(e){return this.$navigation.children('[data-vc-target-model-id="'+e+'"]')},removeSection:function(e){var t,n,i;t=this.findNavigationTab(e.get("id")),i=t.hasClass(this.activeClass),i&&(n=this.getNextTab(t),n.addClass(this.activeClass),this.changeActiveSection(n.data("vc-target-model-id"))),t.remove()},renderSortingPlaceholder:function(e,t){var n,i,a;return n=t,i=t.width()+1,a=t.height(),n.width(i),n.height(a),n}}),window.VcBackendTtaAccordionView=VcBackendTtaViewInterface.extend({sortableSelector:"> .vc_tta-panel:not(.vc_tta-section-append)",sortableSelectorCancel:".vc-non-draggable",sortableUpdateModelIdSelector:"data-model-id",defaultSectionTitle:window.i18nLocale.section,render:function(){return window.VcBackendTtaTabsView.__super__.render.call(this),this.$navigation=this.$content,this.$sortable=this.$content,vc_user_access().shortcodeAll("vc_tta_section")||this.$content.find(".vc_tta-section-append").hide(),this},removeSection:function(e){var t,n,i;t=this.findSection(e.get("id")),i=t.hasClass(this.activeClass),i&&(n=this.getNextTab(t),n.addClass(this.activeClass))},addShortcode:function(e){var t;t=_.last(vc.shortcodes.filter(function(e){return e.get("parent_id")===this.get("parent_id")&&parseFloat(e.get("order"))<parseFloat(this.get("order"))},e.model)),t?e.render().$el.insertAfter("[data-model-id="+t.id+"]"):this.$content.prepend(e.render().el)}}),window.VcBackendTtaTourView=window.VcBackendTtaTabsView.extend({defaultSectionTitle:window.i18nLocale.section}),window.VcBackendTtaPageableView=window.VcBackendTtaTabsView.extend({defaultSectionTitle:window.i18nLocale.section}),window.VcBackendTtaSectionView=window.VcColumnView.extend({parentObj:null,events:{"click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-prepend":"addElement","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-edit":"editElement","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-clone":"clone","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_empty-container":"addToEmpty"},setContent:function(){this.$content=this.$el.find("> .wpb_element_wrapper > .vc_tta-panel-body > .vc_container_for_children")},render:function(){var e;return window.VcBackendTtaSectionView.__super__.render.call(this),e=vc.shortcodes.get(this.model.get("parent_id")),_.isObject(e)&&!_.isUndefined(e.view)&&(this.parentObj=e),this.$el.addClass("vc_tta-panel"),this.$el.attr("style",""),this.$el.attr("data-vc-toggle","tab"),this.replaceTemplateVars(),this},replaceTemplateVars:function(){var e,t;e=this.model.getParam("title"),_.isEmpty(e)&&(e=this.parentObj&&this.parentObj.defaultSectionTitle&&this.parentObj.defaultSectionTitle.length?this.parentObj.defaultSectionTitle:window.i18nLocale.section),t=this.$el.find(".vc_tta-panel-heading");var n=vc.template(t.html(),vc.templateOptions.custom);t.html(n({model_id:this.model.get("id"),section_title:e}))},getIndex:function(){return this.$el.index()},ready:function(){this.updateParentNavigation(),window.VcBackendTtaSectionView.__super__.ready.call(this)},updateParentNavigation:function(){_.isObject(this.parentObj)&&this.parentObj.view&&this.parentObj.view.notifySectionRendered&&this.parentObj.view.notifySectionRendered(this.model)},deleteShortcode:function(e){var t;return _.isObject(e)&&e.preventDefault(),t=confirm(window.i18nLocale.press_ok_to_delete_section),!0!==t?!1:(1===vc.shortcodes.where({parent_id:this.model.get("parent_id")}).length?(this.model.destroy(),this.parentObj&&this.parentObj.destroy()):(this.parentObj&&this.parentObj.view&&this.parentObj.view.removeSection&&this.parentObj.view.removeSection(this.model),this.model.destroy()),!0)},changeShortcodeParams:function(e){window.VcBackendTtaSectionView.__super__.changeShortcodeParams.call(this,e),_.isObject(this.parentObj)&&this.parentObj.view&&this.parentObj.view.notifySectionChanged&&this.parentObj.view.notifySectionChanged(e)}}),vc.addTemplateFilter(function(e){var t=VCS4()+"-"+VCS4();return e.replace(/tab\_id\=\"([^\"]+)\"/g,'tab_id="$1'+t+'"')})}(window.jQuery),function(e,t){"use strict";function n(t,n){var i=t.models?t.pluck("id"):t;e.ajax({dataType:"json",type:"POST",url:window.ajaxurl,data:{action:"vc_media_editor_add_image",filters:window.vc_selectedFilters,ids:i,vc_inline:!0,_vcnonce:window.vcAdminNonce}}).done(function(i){var a,s,c,r;if("function"==typeof n){for(a=[],c=[],r=0;r<i.data.ids.length;r++)s=t[i.data.ids[r]],s||(s=o.model.Attachment.get(i.data.ids[r]),c.push(s.fetch())),a.push(s);e.when.apply(e,c).done(function(){n(a)})}}).fail(function(t){e(".media-modal-close").click(),s=[],window.vc&&window.vc.active_panel&&window.i18nLocale&&window.i18nLocale.error_while_saving_image_filtered&&vc.active_panel.showMessage(window.i18nLocale.error_while_saving_image_filtered,"error"),window.console&&window.console.error&&window.console.error(t)}).always(function(){e(".media-modal").removeClass("processing-media")})}function i(t){var n,i,a;return a=e(".media-frame:visible [data-vc-preview-image-filter="+t+"]"),a.length?(n=e(".media-frame:visible .attachment-info .thumbnail-image").eq(-1),i=n.find("img"),n.addClass("loading"),i.data("original-src")||i.data("original-src",i.attr("src")),a.val().length?void e.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:{action:"vc_media_editor_preview_image",filter:a.val(),attachment_id:t,preferred_size:window.getUserSetting("imgsize","medium"),_vcnonce:window.vcAdminNonce}}).done(function(e){e.success&&e.data.src.length&&i.attr("src",e.data.src)}).fail(function(e,t,n){window.console&&window.console.error&&window.console.error("Filter preview failed:",t,n)}).always(function(){n.removeClass("loading")}):(i.attr("src",i.data("original-src")),void n.removeClass("loading"))):void 0}var a,s=[],o=wp.media,c=o.featuredImage.set,r=o.editor.send.attachment,l=i18nLocale,d={};a=t.extend(o.view.AttachmentCompat.prototype.render),o.view.AttachmentCompat.prototype.render=function(){var n,s=this;return n=this.model.get("id"),a.call(this),t.defer(function(){var t,a,o,c,r;t=s.controller.$el.find(".attachment-info"),r=s.controller.$el.find("[data-vc-preview-image-filter]"),t.length&&r.length&&(c=r.parent().find(".vc-filter-label").text(),a='<label class="setting vc-image-filter-setting">',a+='<span class="name">'+c+"</span>",a+=r[0].outerHTML,a+="</label>",t.before(a),r.parents("tr").remove()),"undefined"!=typeof window.vc_selectedFilters&&"undefined"!=typeof window.vc_selectedFilters[n]&&(o=e(".media-frame:visible [data-vc-preview-image-filter="+n+"]"),o.length&&o.val(window.vc_selectedFilters[n]).change()),i(n)}),this},o.editor.send.attachment=function(e,t){function i(t){var n=t.slice(0).pop().attributes;r(e,n).done(function(e){a(e,n.id)})}function a(e,t){s&&s[0]!==t?setTimeout(function(){a(e,t)},50):(s.shift(),o.editor.insert(e))}s.push(t.id),n([t.id],i)},o.featuredImage.set=function(t){var n=[t];-1!==t?e.ajax({type:"POST",url:window.ajaxurl,data:{action:"vc_media_editor_add_image",filters:window.vc_selectedFilters,ids:n,_vcnonce:window.vcAdminNonce}}).done(function(e){var n;!0===e.success&&e.data.ids.length?(n=e.data.ids.pop(),c(n)):c(t)}).fail(function(){c(t)}):c(t)},o.controller.VcSingleImage=o.controller.FeaturedImage.extend({defaults:t.defaults({id:"vc_single-image",filterable:"uploaded",multiple:!1,toolbar:"vc_single-image",title:l.set_image,priority:60,syncSelection:!1},o.controller.Library.prototype.defaults),updateSelection:function(){var e,n=this.get("selection"),i=o.vc_editor.getData();this.get("library"),"undefined"!=typeof i&&""!==i&&-1!==i&&(e=t.map(i.toString().split(/,/),function(e){var t=o.model.Attachment.get(e);return t.fetch(),t})),n.reset(e)}}),o.controller.VcGallery=o.controller.VcSingleImage.extend({defaults:t.defaults({id:"vc_gallery",title:l.add_images,toolbar:"main-insert",filterable:"uploaded",library:o.query({type:"image"}),multiple:"add",
editable:!0,priority:60,syncSelection:!1},o.controller.Library.prototype.defaults)}),o.VcSingleImage={getData:function(){return this.$hidden_ids.val()},set:function(t){var n=vc.template(e("#vc_settings-image-block").html(),vc.templateOptions.custom);return this.$img_ul.html(n(t)),this.$clear_button.show(),this.$hidden_ids.val(t.id).trigger("change"),!1},frame:function(t){return window.vc_selectedFilters={},this.element=t,this.$button=e(this.element),this.$block=this.$button.closest(".edit_form_line"),this.$hidden_ids=this.$block.find(".gallery_widget_attached_images_ids"),this.$img_ul=this.$block.find(".gallery_widget_attached_images_list"),this.$clear_button=this.$img_ul.next(),this._frame?this._frame:(this._frame=o({state:"vc_single-image",states:[new o.controller.VcSingleImage]}),this._frame.on("toolbar:create:vc_single-image",function(e){this.createSelectToolbar(e,{text:l.set_image,close:!1})},this._frame),this._frame.state("vc_single-image").on("select",this.select),this._frame)},select:function(){var e=this.get("selection");vc.events.trigger("click:media_editor:add_image",e,"single")}},o.view.MediaFrame.VcGallery=o.view.MediaFrame.Post.extend({createStates:function(){this.states.add([new o.controller.VcGallery])},bindHandlers:function(){o.view.MediaFrame.Select.prototype.bindHandlers.apply(this,arguments),this.on("toolbar:create:main-insert",this.createToolbar,this);var e={content:{embed:"embedContent","edit-selection":"editSelectionContent"},toolbar:{"main-insert":"mainInsertToolbar"}};t.each(e,function(e,n){t.each(e,function(e,t){this.on(n+":render:"+t,this[e],this)},this)},this)},mainInsertToolbar:function(e){var t=this;this.selectionStatusToolbar(e),e.set("insert",{style:"primary",priority:80,text:l.add_images,requires:{selection:!0},click:function(){var e=t.state(),n=e.get("selection");vc.events.trigger("click:media_editor:add_image",n,"gallery"),e.trigger("insert",n).reset()}})}}),o.vc_editor=t.clone(o.editor),t.extend(o.vc_editor,{$vc_editor_element:null,getData:function(){var e=o.vc_editor.$vc_editor_element,t=e.closest(".edit_form_line"),n=t.find(".gallery_widget_attached_images_ids");return n.val()},insert:function(n){var i=o.vc_editor.$vc_editor_element,a=i.closest(".edit_form_line"),s=a.find(".gallery_widget_attached_images_ids"),c=a.find(".gallery_widget_attached_images_list"),r="",l=vc.template(e("#vc_settings-image-block").html(),vc.templateOptions.custom);t.each(n,function(e){r+=l(e)}),s.val(t.map(n,function(e){return e.id}).join(",")).trigger("change"),c.html(r)},open:function(e){var t;return e=this.id(e),t=this.get(e),t||(t=this.add(e)),window.vc_selectedFilters={},t.open()},add:function(e,n){var i=this.get(e);return i?i:d[e]?d[e]:i=d[e]=new o.view.MediaFrame.VcGallery(t.defaults(n||{},{state:"vc_gallery",title:l.add_images,library:{type:"image"},multiple:!0}))},init:function(){e("body").unbind("click.vcGalleryWidget").on("click.vcGalleryWidget",".gallery_widget_add_images",function(t){t.preventDefault();var n=e(this),i="visual-composer";return o.vc_editor.$vc_editor_element=e(this),"true"===n.attr("use-single")?void o.VcSingleImage.frame(this).open("vc_editor"):(n.blur(),void o.vc_editor.open(i))})}}),t.bindAll(o.vc_editor,"open"),e(document).ready(function(){o.vc_editor.init()}),vc.events.on("click:media_editor:add_image",function(i,a){function s(n){var s,c;switch(s=t.map(n,function(e){return e.attributes}),i.reset(s),c=t.map(i.models,function(e){return e.attributes}),"undefined"==typeof a&&(a=""),a){case"gallery":o.vc_editor.insert(c);break;case"single":o.VcSingleImage.set(c[0])}e(".media-modal").removeClass("processing-media"),e(".media-modal-close").click()}e(".media-modal").addClass("processing-media"),n(t.extend({},i),s)}),e("body").on("change","[data-vc-preview-image-filter]",function(){var t;t=e(this).data("vcPreviewImageFilter"),"undefined"==typeof window.vc_selectedFilters&&(window.vc_selectedFilters={}),window.vc_selectedFilters[t]=e(this).val(),i(t)})}(window.jQuery,window._);var vcPointerMessage;!function(e){"use strict";vcPointerMessage=function(e,t,n){this.target=e,this.$pointer=null,this.texts=n,this.pointerOptions=t,this.init()},vcPointerMessage.prototype={init:function(){_.bindAll(this,"openedEvent","reposition")},show:function(){this.$pointer=e(this.target),this.$pointer.data("vcPointerMessage",this),this.pointerOptions.opened=this.openedEvent,this.$pointer.addClass("vc-with-vc-pointer").pointer(this.pointerOptions).pointer("open"),e(window).on("resize.vcPointer",this.reposition)},domButtonsWrapper:function(){return e('<div class="vc_wp-pointer-controls" />')},domCloseBtn:function(){return e('<a class="vc_pointer-close close">'+this.texts.finish+"</a>")},domNextBtn:function(){return e('<button class="button button-primary button-large vc_wp-pointers-next">'+this.texts.next+'<i class="vc_pointer-icon"></i></button>')},domPrevBtn:function(){return e('<button class="button button-primary button-large vc_wp-pointers-prev"><i class="vc_pointer-icon"></i>'+this.texts.prev+"</button> ")},openedEvent:function(t,n){var i=n.pointer.offset();i&&i.top&&e("body").scrollTop(80<i.top?i.top-80:0)},reposition:function(){this.$pointer.pointer("reposition")},close:function(){this.$pointer&&this.$pointer.removeClass("vc-with-vc-pointer").pointer("close"),e(window).off("resize.vcPointer")}}}(window.jQuery);var vcPointersController;!function(e){"use strict";vcPointersController=function(e,t){this.pointers=e&&e.messages||[],this._texts=t,this.pointerId=e&&e.pointer_id?e.pointer_id:"",this.pointerData={},this._index=0,this.messagesDismissed=!1,this.init()},vcPointersController.prototype={init:function(){_.bindAll(this,"show","clickEventClose","clickEventNext","clickEventPrev","buttonsEvent"),this.build()},getPointer:function(e){return this.pointerData=this.pointers[e]&&this.pointers[e].target?this.pointers[e]:null,this.pointerData&&this.pointerData.options?new vcPointerMessage(this.pointerData.target,this.buildOptions(this.pointerData.options),this._texts):null},buildOptions:function(e){return e.buttonsEvent&&_.isFunction(window[e.buttonsEvent])?e.buttons=_.bind(window[e.buttonsEvent],this):e.buttons=this.buttonsEvent,e.vcPointerController=this,e},build:function(){return this.pointer=this.getPointer(this._index),vc.events.once("backendEditor.close",this.close,this),this.pointer?void this.setShowEventHandler():!1},show:function(){this.pointer.show(),this.setCloseEventHandler(),vc.events.trigger("vcPointer:show")},setShowEventHandler:function(){var t;this.pointerData.showCallback&&window[this.pointerData.showCallback]?window[this.pointerData.showCallback].call(this):this.pointerData.showEvent?this.pointerData.showEvent.match(/\s/)?(t=this.pointerData.closeEvent.split(/\s+(.+)?/),1<t.length&&e(t[1]).one(t[0],this.show)):vc.events.once(this.pointerData.showEvent,this.show):this.show()},setCloseEventHandler:function(){var t;this.pointerData.closeCallback&&window[this.pointerData.closeCallback]?window[this.pointerData.closeCallback].call(this):this.pointerData.closeEvent?this.pointerData.closeEvent.match(/\s/)?(t=this.pointerData.closeEvent.split(/\s+(.+)?/),e(t[1]||this.$pointer).one(t[1]&&t[0]?t[0]:"click",this.clickEventNext)):vc.events.once(this.pointerData.closeEvent,this.nextOnEvent,this):this.pointer.$pointer&&0<this.pointer.$pointer.length&&e(this.pointer.$pointer).one("click",this.clickEventNext)},nextOnEvent:function(){this.close(),this.next()},next:function(){this._index++,this.build()},prev:function(){this._index--,this.build()},close:function(){this.pointer&&(this.pointer.close(),this.pointerData=null,this.pointer=null,vc.events.trigger("vcPointer:close",this))},buttonsEvent:function(){var e,t,n,i;return e=this.pointer.domCloseBtn(),t=this.pointer.domNextBtn(),n=this.pointer.domPrevBtn(),e.bind("click.vcPointer",this.clickEventClose),i=this.pointer.domButtonsWrapper().append(e),0<this._index&&(n.bind("click.vcPointer",this.clickEventPrev),i.addClass("vc_wp-pointer-controls-prev").append(n)),this._index+1<this.pointers.length&&(t.bind("click.vcPointer",this.clickEventNext),i.addClass("vc_wp-pointer-controls-next").append(t)),i},clickEventClose:function(){this.close(),this.dismissMessages()},clickEventNext:function(){this.close(),this.next()},clickEventPrev:function(){this.close(),this.prev()},dismissMessages:function(){return this.messagesDismissed?!1:(e.post(window.ajaxurl,{pointer:this.pointerId,action:"dismiss-wp-pointer"}),void(this.messagesDismissed=!0))}}}(window.jQuery),function(e){"use strict";vc.events.on("app.render",function(){window.vcPointer&&window.vcPointer.pointers&&window.vcPointer.pointers.length&&_.each(vcPointer.pointers,function(e){new vcPointersController(e,vcPointer.texts)},this)}),vc.events.on("vcPointer:show",function(){vc.app.disableFixedNav=!0}),vc.events.on("vcPointer:close",function(){vc.app.disableFixedNav=!1}),window.vcPointersEditorsTourEvents=function(){var e;return e=this.pointer.domCloseBtn(),e.bind("click.vcPointer",this.clickEventClose),this.dismissMessages(),e},window.vcPointersShowOnContentElementControls=function(){this.pointer&&e(this.pointer.target).length?(e(this.pointer.target).parent().addClass("vc-with-vc-pointer-controls"),this.show(),e("#wpb_visual_composer").one("click",function(){e(".vc-with-vc-pointer-controls").removeClass("vc-with-vc-pointer-controls")})):vc.events.once("shortcodes:add",vcPointersShowOnContentElementControls,this)},window.vcPointersSetInIFrame=function(){this.pointerData&&vc.frame_window.jQuery(this.pointerData.target).length?(this.pointer=new vc.frame_window.vcPointerMessage(this.pointerData.target,this.buildOptions(this.pointerData.options),this._texts),this.show(),this.pointer.$pointer.closest(".vc_controls").addClass("vc-with-vc-pointer-controls")):vc.events.once("shortcodeView:ready",vcPointersSetInIFrame,this)},window.vcPointersCloseInIFrame=function(){var e,t;e=this,t=vc.frame_window.jQuery,t("body").one("click",function(){t(".vc-with-vc-pointer-controls").removeClass("vc-with-vc-pointer-controls"),e.nextOnEvent()})}}(window.jQuery);