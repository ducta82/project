(function(b,n,g,q){var k=function(a,c){this.widget="";this.$element=b(a);this.defaultTime=c.defaultTime;this.disableFocus=c.disableFocus;this.disableMousewheel=c.disableMousewheel;this.isOpen=c.isOpen;this.minuteStep=c.minuteStep;this.modalBackdrop=c.modalBackdrop;this.orientation=c.orientation;this.secondStep=c.secondStep;this.showInputs=c.showInputs;this.showMeridian=c.showMeridian;this.showSeconds=c.showSeconds;this.template=c.template;this.appendWidgetTo=c.appendWidgetTo;this.showWidgetOnAddonClick=
c.showWidgetOnAddonClick;this._init()};k.prototype={constructor:k,_init:function(){var a=this;if(this.showWidgetOnAddonClick&&(this.$element.parent().hasClass("input-append")||this.$element.parent().hasClass("input-prepend")))this.$element.parent(".input-append, .input-prepend").find(".add-on").on({"click.timepicker":b.proxy(this.showWidget,this)}),this.$element.on({"focus.timepicker":b.proxy(this.highlightUnit,this),"click.timepicker":b.proxy(this.highlightUnit,this),"keydown.timepicker":b.proxy(this.elementKeydown,
this),"blur.timepicker":b.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":b.proxy(this.mousewheel,this)});else if(this.template)this.$element.on({"focus.timepicker":b.proxy(this.showWidget,this),"click.timepicker":b.proxy(this.showWidget,this),"blur.timepicker":b.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":b.proxy(this.mousewheel,this)});else this.$element.on({"focus.timepicker":b.proxy(this.highlightUnit,this),"click.timepicker":b.proxy(this.highlightUnit,
this),"keydown.timepicker":b.proxy(this.elementKeydown,this),"blur.timepicker":b.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":b.proxy(this.mousewheel,this)});this.$widget=!1!==this.template?b(this.getTemplate()).on("click",b.proxy(this.widgetClick,this)):!1;this.showInputs&&!1!==this.$widget&&this.$widget.find("input").each(function(){b(this).on({"click.timepicker":function(){b(this).select()},"keydown.timepicker":b.proxy(a.widgetKeydown,a),"keyup.timepicker":b.proxy(a.widgetKeyup,
a)})});this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=null;this.updateFromElementVal()},clear:function(){this.meridian=this.second=this.minute=this.hour="";this.$element.val("")},decrementHour:function(){if(this.showMeridian)if(1===this.hour)this.hour=12;else{if(12===this.hour)return this.hour--,this.toggleMeridian();if(0===this.hour)return this.hour=11,this.toggleMeridian();this.hour--}else 0>=this.hour?this.hour=23:this.hour--},decrementMinute:function(a){a=a?
this.minute-a:this.minute-this.minuteStep;0>a?(this.decrementHour(),this.minute=a+60):this.minute=a},decrementSecond:function(){var a=this.second-this.secondStep;0>a?(this.decrementMinute(!0),this.second=a+60):this.second=a},elementKeydown:function(a){switch(a.keyCode){case 9:case 27:this.updateFromElementVal();break;case 37:a.preventDefault();this.highlightPrevUnit();break;case 38:a.preventDefault();switch(this.highlightedUnit){case "hour":this.incrementHour();this.highlightHour();break;case "minute":this.incrementMinute();
this.highlightMinute();break;case "second":this.incrementSecond();this.highlightSecond();break;case "meridian":this.toggleMeridian(),this.highlightMeridian()}this.update();break;case 39:a.preventDefault();this.highlightNextUnit();break;case 40:a.preventDefault();switch(this.highlightedUnit){case "hour":this.decrementHour();this.highlightHour();break;case "minute":this.decrementMinute();this.highlightMinute();break;case "second":this.decrementSecond();this.highlightSecond();break;case "meridian":this.toggleMeridian(),
this.highlightMeridian()}this.update()}},getCursorPosition:function(){var a=this.$element.get(0);if("selectionStart"in a)return a.selectionStart;if(g.selection){a.focus();var c=g.selection.createRange(),d=g.selection.createRange().text.length;c.moveStart("character",-a.value.length);return c.text.length-d}},getTemplate:function(){var a,c,d,f,b;this.showInputs?(c='<input type="text" class="bootstrap-timepicker-hour" maxlength="2"/>',d='<input type="text" class="bootstrap-timepicker-minute" maxlength="2"/>',
f='<input type="text" class="bootstrap-timepicker-second" maxlength="2"/>',b='<input type="text" class="bootstrap-timepicker-meridian" maxlength="2"/>'):(c='<span class="bootstrap-timepicker-hour"></span>',d='<span class="bootstrap-timepicker-minute"></span>',f='<span class="bootstrap-timepicker-second"></span>',b='<span class="bootstrap-timepicker-meridian"></span>');c='<table><tr><td><a href="#" data-action="incrementHour"><i class="icon-chevron-up"></i></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><i class="icon-chevron-up"></i></a></td>'+
(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><i class="icon-chevron-up"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="icon-chevron-up"></i></a></td>':"")+"</tr><tr><td>"+c+'</td> <td class="separator">:</td><td>'+d+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+f+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+
b+"</td>":"")+'</tr><tr><td><a href="#" data-action="decrementHour"><i class="icon-chevron-down"></i></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><i class="icon-chevron-down"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><i class="icon-chevron-down"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><i class="icon-chevron-down"></i></a></td>':
"")+"</tr></table>";switch(this.template){case "modal":a='<div class="bootstrap-timepicker-widget modal hide fade in" data-backdrop="'+(this.modalBackdrop?"true":"false")+'"><div class="modal-header"><a href="#" class="close" data-dismiss="modal">\u00d7</a><h3>Pick a Time</h3></div><div class="modal-content">'+c+'</div><div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">OK</a></div></div>';break;case "dropdown":a='<div class="bootstrap-timepicker-widget dropdown-menu">'+
c+"</div>"}return a},getTime:function(){return""===this.hour?"":this.hour+":"+(1===this.minute.toString().length?"0"+this.minute:this.minute)+(this.showSeconds?":"+(1===this.second.toString().length?"0"+this.second:this.second):"")+(this.showMeridian?" "+this.meridian:"")},hideWidget:function(){!1!==this.isOpen&&(this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),"modal"===this.template&&this.$widget.modal?
this.$widget.modal("hide"):this.$widget.removeClass("open"),b(g).off("mousedown.timepicker, touchend.timepicker"),this.isOpen=!1,this.$widget.detach())},highlightUnit:function(){this.position=this.getCursorPosition();0<=this.position&&2>=this.position?this.highlightHour():3<=this.position&&5>=this.position?this.highlightMinute():6<=this.position&&8>=this.position?this.showSeconds?this.highlightSecond():this.highlightMeridian():9<=this.position&&11>=this.position&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case "hour":this.highlightMinute();
break;case "minute":this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case "second":this.showMeridian?this.highlightMeridian():this.highlightHour();break;case "meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case "hour":this.showMeridian?this.highlightMeridian():this.showSeconds?this.highlightSecond():this.highlightMinute();break;case "minute":this.highlightHour();break;case "second":this.highlightMinute();
break;case "meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){var a=this.$element.get(0),c=this;this.highlightedUnit="hour";a.setSelectionRange&&setTimeout(function(){10>c.hour?a.setSelectionRange(0,1):a.setSelectionRange(0,2)},0)},highlightMinute:function(){var a=this.$element.get(0),c=this;this.highlightedUnit="minute";a.setSelectionRange&&setTimeout(function(){10>c.hour?a.setSelectionRange(2,4):a.setSelectionRange(3,5)},0)},highlightSecond:function(){var a=
this.$element.get(0),c=this;this.highlightedUnit="second";a.setSelectionRange&&setTimeout(function(){10>c.hour?a.setSelectionRange(5,7):a.setSelectionRange(6,8)},0)},highlightMeridian:function(){var a=this.$element.get(0),c=this;this.highlightedUnit="meridian";a.setSelectionRange&&(this.showSeconds?setTimeout(function(){10>c.hour?a.setSelectionRange(8,10):a.setSelectionRange(9,11)},0):setTimeout(function(){10>c.hour?a.setSelectionRange(5,7):a.setSelectionRange(6,8)},0))},incrementHour:function(){if(this.showMeridian){if(11===
this.hour)return this.hour++,this.toggleMeridian();12===this.hour&&(this.hour=0)}23===this.hour?this.hour=0:this.hour++},incrementMinute:function(a){a=a?this.minute+a:this.minute+this.minuteStep-this.minute%this.minuteStep;59<a?(this.incrementHour(),this.minute=a-60):this.minute=a},incrementSecond:function(){var a=this.second+this.secondStep-this.second%this.secondStep;59<a?(this.incrementMinute(!0),this.second=a-60):this.second=a},mousewheel:function(a){if(!this.disableMousewheel){a.preventDefault();
a.stopPropagation();var c=a.originalEvent.wheelDelta||-a.originalEvent.detail,d=null;"mousewheel"===a.type?d=-1*a.originalEvent.wheelDelta:"DOMMouseScroll"===a.type&&(d=40*a.originalEvent.detail);d&&(a.preventDefault(),b(this).scrollTop(d+b(this).scrollTop()));switch(this.highlightedUnit){case "minute":0<c?this.incrementMinute():this.decrementMinute();this.highlightMinute();break;case "second":0<c?this.incrementSecond():this.decrementSecond();this.highlightSecond();break;case "meridian":this.toggleMeridian();
this.highlightMeridian();break;default:0<c?this.incrementHour():this.decrementHour(),this.highlightHour()}return!1}},place:function(){if(!this.isInline){var a=this.$widget.outerWidth(),c=this.$widget.outerHeight(),d=b(n).width(),f=b(n).height(),e=b(n).scrollTop(),p=parseInt(this.$element.parents().filter(function(){}).first().css("z-index"),10)+10,h=this.component?this.component.parent().offset():this.$element.offset(),g=this.component?this.component.outerHeight(!0):this.$element.outerHeight(!1),
k=this.component?this.component.outerWidth(!0):this.$element.outerWidth(!1),l=h.left,m=h.top;this.$widget.removeClass("timepicker-orient-top timepicker-orient-bottom timepicker-orient-right timepicker-orient-left");"auto"!==this.orientation.x?(this.picker.addClass("datepicker-orient-"+this.orientation.x),"right"===this.orientation.x&&(l-=a-k)):(this.$widget.addClass("timepicker-orient-left"),0>h.left?l-=h.left-10:h.left+a>d&&(l=d-a-10));a=this.orientation.y;"auto"===a&&(a=-e+h.top-c,f=e+f-(h.top+
g+c),a=Math.max(a,f)===f?"top":"bottom");this.$widget.addClass("timepicker-orient-"+a);m="top"===a?m+g:m-(c+parseInt(this.$widget.css("padding-top"),10));this.$widget.css({top:m,left:l,zIndex:p})}},remove:function(){b("document").off(".timepicker");this.$widget&&this.$widget.remove();delete this.$element.data().timepicker},setDefaultTime:function(a){if(this.$element.val())this.updateFromElementVal();else if("current"===a){a=new Date;var c=a.getHours(),d=a.getMinutes(),f=a.getSeconds(),b="AM";0!==
f&&(f=Math.ceil(a.getSeconds()/this.secondStep)*this.secondStep,60===f&&(d+=1,f=0));0!==d&&(d=Math.ceil(a.getMinutes()/this.minuteStep)*this.minuteStep,60===d&&(c+=1,d=0));this.showMeridian&&(0===c?c=12:12<=c?(12<c&&(c-=12),b="PM"):b="AM");this.hour=c;this.minute=d;this.second=f;this.meridian=b;this.update()}else!1===a?(this.second=this.minute=this.hour=0,this.meridian="AM"):this.setTime(a)},setTime:function(a,c){if(a){var d,b,e,g;"object"===typeof a&&a.getMonth?(b=a.getHours(),e=a.getMinutes(),d=
a.getSeconds(),this.showMeridian&&(g="AM",12<b&&(g="PM",b%=12),12===b&&(g="PM"))):(g=null!==a.match(/p/i)?"PM":"AM",a=a.replace(/[^0-9\:]/g,""),d=a.split(":"),b=d[0]?d[0].toString():d.toString(),e=d[1]?d[1].toString():"",d=d[2]?d[2].toString():"",4<b.length&&(d=b.substr(4,2)),2<b.length&&(e=b.substr(2,2),b=b.substr(0,2)),2<e.length&&(d=e.substr(2,2),e=e.substr(0,2)),2<d.length&&(d=d.substr(2,2)),b=parseInt(b,10),e=parseInt(e,10),d=parseInt(d,10),isNaN(b)&&(b=0),isNaN(e)&&(e=0),isNaN(d)&&(d=0),this.showMeridian?
1>b?b=1:12<b&&(b=12):(24<=b?b=23:0>b&&(b=0),13>b&&"PM"===g&&(b+=12)),0>e?e=0:60<=e&&(e=59),this.showSeconds&&(isNaN(d)?d=0:0>d?d=0:60<=d&&(d=59)));this.hour=b;this.minute=e;this.second=d;this.meridian=g;this.update(c)}else this.clear()},showWidget:function(){if(!this.isOpen&&!this.$element.is(":disabled")){this.$widget.appendTo(this.appendWidgetTo);var a=this;b(g).on("mousedown.timepicker, touchend.timepicker",function(b){a.$element.parent().find(b.target).length||a.$widget.is(b.target)||a.$widget.find(b.target).length||
a.hideWidget()});this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}});this.place();this.disableFocus&&this.$element.blur();""===this.hour&&(this.defaultTime?this.setDefaultTime(this.defaultTime):this.setTime("0:0:0"));if("modal"===this.template&&this.$widget.modal)this.$widget.modal("show").on("hidden",b.proxy(this.hideWidget,this));else!1===this.isOpen&&this.$widget.addClass("open");this.isOpen=
!0}},toggleMeridian:function(){this.meridian="AM"===this.meridian?"PM":"AM"},update:function(a){this.updateElement();a||this.updateWidget();this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}})},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(){this.setTime(this.$element.val())},updateWidget:function(){if(!1!==this.$widget){var a=this.hour,b=
1===this.minute.toString().length?"0"+this.minute:this.minute,d=1===this.second.toString().length?"0"+this.second:this.second;this.showInputs?(this.$widget.find("input.bootstrap-timepicker-hour").val(a),this.$widget.find("input.bootstrap-timepicker-minute").val(b),this.showSeconds&&this.$widget.find("input.bootstrap-timepicker-second").val(d),this.showMeridian&&this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)):(this.$widget.find("span.bootstrap-timepicker-hour").text(a),
this.$widget.find("span.bootstrap-timepicker-minute").text(b),this.showSeconds&&this.$widget.find("span.bootstrap-timepicker-second").text(d),this.showMeridian&&this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))}},updateFromWidgetInputs:function(){if(!1!==this.$widget){var a=this.$widget.find("input.bootstrap-timepicker-hour").val()+":"+this.$widget.find("input.bootstrap-timepicker-minute").val()+(this.showSeconds?":"+this.$widget.find("input.bootstrap-timepicker-second").val():
"")+(this.showMeridian?this.$widget.find("input.bootstrap-timepicker-meridian").val():"");this.setTime(a,!0)}},widgetClick:function(a){a.stopPropagation();a.preventDefault();a=b(a.target);var c=a.closest("a").data("action");if(c)this[c]();this.update();a.is("input")&&a.get(0).setSelectionRange(0,2)},widgetKeydown:function(a){var c=b(a.target),d=c.attr("class").replace("bootstrap-timepicker-","");switch(a.keyCode){case 9:if(this.showMeridian&&"meridian"===d||this.showSeconds&&"second"===d||!this.showMeridian&&
!this.showSeconds&&"minute"===d)return this.hideWidget();break;case 27:this.hideWidget();break;case 38:a.preventDefault();switch(d){case "hour":this.incrementHour();break;case "minute":this.incrementMinute();break;case "second":this.incrementSecond();break;case "meridian":this.toggleMeridian()}this.setTime(this.getTime());c.get(0).setSelectionRange(0,2);break;case 40:a.preventDefault();switch(d){case "hour":this.decrementHour();break;case "minute":this.decrementMinute();break;case "second":this.decrementSecond();
break;case "meridian":this.toggleMeridian()}this.setTime(this.getTime());c.get(0).setSelectionRange(0,2)}},widgetKeyup:function(a){(65===a.keyCode||77===a.keyCode||80===a.keyCode||46===a.keyCode||8===a.keyCode||46<=a.keyCode&&57>=a.keyCode||96<=a.keyCode&&105>=a.keyCode)&&this.updateFromWidgetInputs()}};b.fn.timepicker=function(a){var c=Array.apply(null,arguments);c.shift();return this.each(function(){var d=b(this),f=d.data("timepicker"),e="object"===typeof a&&a;f||d.data("timepicker",f=new k(this,
b.extend({},b.fn.timepicker.defaults,e,b(this).data())));"string"===typeof a&&f[a].apply(f,c)})};b.fn.timepicker.defaults={defaultTime:"current",disableFocus:!1,disableMousewheel:!1,isOpen:!1,minuteStep:15,modalBackdrop:!1,orientation:{x:"auto",y:"auto"},secondStep:15,showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",appendWidgetTo:"body",showWidgetOnAddonClick:!0};b.fn.timepicker.Constructor=k})(jQuery,window,document);


